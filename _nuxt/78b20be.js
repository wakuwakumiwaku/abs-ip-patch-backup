(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{726:function(t,e,r){var content=r(790);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("f89cc9c4",content,!0,{sourceMap:!1})},789:function(t,e,r){"use strict";r(726)},790:function(t,e,r){var n=r(18)((function(i){return i[1]}));n.push([t.i,"\n.dir-item.dir-selected {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n.dir-item.dir-used {\n  background-color: rgba(255, 25, 0, 0.1);\n}\n.folder-container {\n  max-height: calc(100% - 130px);\n  height: calc(100% - 130px);\n  min-height: calc(100% - 130px);\n}\n",""]),n.locals={},t.exports=n},883:function(t,e,r){"use strict";r.r(e);var n=r(7),o=r(16);r(29),r(17),r(22),r(26),r(33),r(56),r(27),r(57),r(44),r(45),r(38),r(8),r(35),r(352),r(28),r(63),r(77);function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){Object(o.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var d={props:{paths:{type:Array,default:function(){return[]}}},data:function(){return{initialLoad:!1,loadingDirs:!1,isPosix:!0,rootDirs:[],directories:[],selectedPath:"",subdirs:[],level:0,currentDir:null,previousDir:null}},computed:{_directories:function(){var t=this;return this.directories.map((function(e){var r=!!t.paths.find((function(path){return path.endsWith(e.path)})),n=e.path===t.selectedPath,o=[];return n&&o.push("dir-selected"),r&&o.push("dir-used"),l({isUsed:r,isSelected:n,className:o.join(" ")},e)}))},_subdirs:function(){var t=this;return this.subdirs.map((function(e){var r=!!t.paths.find((function(path){return path.endsWith(e.path)})),n=[];return r&&n.push("dir-used"),l({isUsed:r,className:n.join(" ")},e)}))}},methods:{goBack:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.selectedPath.replace(/^\//,""),n=r.split("/"),o="",c="",n.length>2&&(c=n.slice(0,-2).join("/")),o=n.slice(0,-1).join("/"),t.isPosix?(o&&(o="/"+o),c&&(c="/"+c)):(!t.isPosix&&c.endsWith(":")&&(c+="/"),!t.isPosix&&o.endsWith(":")&&(o+="/")),t.level--,t.subdirs=t.directories,t.selectedPath=o,e.next=12,t.fetchDirs(c,t.level);case 12:t.directories=e.sent;case 13:case"end":return e.stop()}}),e)})))()},selectDir:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.isUsed){r.next=2;break}return r.abrupt("return");case 2:return e.selectedPath=t.path,e.level=t.level,r.next=6,e.fetchDirs(t.path,t.level+1);case 6:e.subdirs=r.sent;case 7:case"end":return r.stop()}}),r)})))()},selectSubDir:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.isUsed){r.next=2;break}return r.abrupt("return");case 2:return e.selectedPath=t.path,e.level=t.level,e.directories=e.subdirs,r.next=7,e.fetchDirs(t.path,t.level+1);case 7:e.subdirs=r.sent;case 8:case"end":return r.stop()}}),r)})))()},selectFolder:function(){var t=this;this.selectedPath?this.paths.find((function(p){return p.startsWith(t.selectedPath)}))?this.$toast.error("Oops, you cannot add a parent directory of a folder already added"):(this.$emit("select",this.selectedPath),this.selectedPath=""):console.error("No Selected path")},fetchDirs:function(path,t){var e=this;return this.loadingDirs=!0,this.$axios.$get("/api/filesystem?path=".concat(path,"&level=").concat(t)).then((function(data){return console.log("Fetched directories",data.directories),e.isPosix=!!data.posix,data.directories})).catch((function(t){return console.error("Failed to get filesystem paths",t),e.$toast.error(e.$strings.ToastFailedToLoadData),[]})).finally((function(){e.loadingDirs=!1}))},init:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.initialLoad=!0,e.next=3,t.fetchDirs("",0);case 3:t.rootDirs=e.sent,t.initialLoad=!1,t.directories=t.rootDirs,t.subdirs=[],t.selectedPath="";case 8:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.init()}},f=(r(789),r(4)),component=Object(f.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full h-full bg-bg absolute top-0 left-0 px-4 py-4 z-10"},[e("div",{staticClass:"flex items-center py-1 mb-2"},[e("span",{staticClass:"material-symbols text-3xl cursor-pointer hover:text-gray-300",on:{click:function(e){return t.$emit("back")}}},[t._v("arrow_back")]),t._v(" "),e("p",{staticClass:"px-4 text-xl"},[t._v(t._s(t.$strings.HeaderChooseAFolder))])]),t._v(" "),t.rootDirs.length?e("div",{staticClass:"w-full bg-primary/70 py-1 px-4 mb-2"},[e("p",{staticClass:"font-mono truncate"},[t._v(t._s(t.selectedPath||"/"))])]):t._e(),t._v(" "),t.rootDirs.length?e("div",{staticClass:"relative flex bg-primary/50 p-4 folder-container"},[e("div",{staticClass:"w-1/2 border-r border-bg h-full overflow-y-auto"},[t.level>0?e("div",{staticClass:"w-full p-1 cursor-pointer flex items-center hover:bg-white/10",on:{click:t.goBack}},[e("span",{staticClass:"material-symbols fill text-yellow-200",staticStyle:{"font-size":"1.2rem"}},[t._v("folder")]),t._v(" "),e("p",{staticClass:"text-base font-mono px-2"},[t._v("..")])]):t._e(),t._v(" "),t._l(t._directories,(function(r){return e("div",{key:r.path,staticClass:"dir-item w-full p-1 cursor-pointer flex items-center hover:text-white text-gray-200 hover:bg-white/10",class:r.className,on:{click:function(e){return t.selectDir(r)}}},[e("span",{staticClass:"material-symbols fill text-yellow-200",staticStyle:{"font-size":"1.2rem"}},[t._v("folder")]),t._v(" "),e("p",{staticClass:"text-base font-mono px-2 truncate"},[t._v(t._s(r.dirname))]),t._v(" "),r.path===t.selectedPath?e("span",{staticClass:"material-symbols",staticStyle:{"font-size":"1.1rem"}},[t._v("arrow_right")]):t._e()])}))],2),t._v(" "),e("div",{staticClass:"w-1/2 h-full overflow-y-auto"},t._l(t._subdirs,(function(r){return e("div",{key:r.path,staticClass:"dir-item w-full p-1 cursor-pointer flex items-center hover:text-white text-gray-200 hover:bg-white/10",class:r.className,on:{click:function(e){return t.selectSubDir(r)}}},[e("span",{staticClass:"material-symbols fill text-yellow-200",staticStyle:{"font-size":"1.2rem"}},[t._v("folder")]),t._v(" "),e("p",{staticClass:"text-base font-mono px-2 truncate"},[t._v(t._s(r.dirname))])])})),0),t._v(" "),t.loadingDirs?e("div",{staticClass:"absolute inset-0 w-full h-full flex items-center justify-center bg-black/10"},[e("ui-loading-indicator")],1):t._e()]):t.initialLoad?e("div",{staticClass:"py-12 text-center"},[e("p",[t._v(t._s(t.$strings.MessageLoadingFolders))])]):e("div",{staticClass:"py-12 text-center max-w-sm mx-auto"},[e("p",{staticClass:"text-lg mb-2"},[t._v(t._s(t.$strings.MessageNoFoldersAvailable))]),t._v(" "),e("p",{staticClass:"text-gray-300 mb-2"},[t._v(t._s(t.$strings.NoteFolderPicker))])]),t._v(" "),e("div",{staticClass:"w-full py-2"},[e("ui-btn",{staticClass:"w-full mt-2",attrs:{disabled:!t.selectedPath,color:"bg-primary"},on:{click:t.selectFolder}},[t._v(t._s(t.$strings.ButtonSelectFolderPath))])],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiLoadingIndicator:r(348).default,UiBtn:r(42).default})}}]);