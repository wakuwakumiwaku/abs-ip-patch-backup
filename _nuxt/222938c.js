(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{723:function(t,e,l){var content=l(780);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(19).default)("e6ee2626",content,!0,{sourceMap:!1})},779:function(t,e,l){"use strict";l(723)},780:function(t,e,l){var o=l(18)((function(i){return i[1]}));o.push([t.i,"\n#podcast-wrapper[data-v-5dc14042] {\n  min-height: 400px;\n  max-height: 80vh;\n}\n#episodes-scroll[data-v-5dc14042] {\n  max-height: calc(80vh - 200px);\n}\n",""]),o.locals={},t.exports=o},876:function(t,e,l){"use strict";l.r(e);l(22),l(43),l(17);var o=l(642),d=(l(33),l(56),l(27),l(8),l(188)),c=l.n(d),r={props:{value:Boolean,podcastData:{type:Object,default:function(){return null}},podcastFeedData:{type:Object,default:function(){return null}}},data:function(){return{processing:!1,selectedFolderId:null,fullPath:null,podcast:{title:"",author:"",description:"",releaseDate:"",genres:[],feedUrl:"",feedImageUrl:"",itunesPageUrl:"",itunesId:"",itunesArtistId:"",autoDownloadEpisodes:!1,language:"",explicit:!1,type:""}}},watch:{show:{immediate:!0,handler:function(t){t&&this.init()}}},computed:{show:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},title:function(){return this._podcastData.title},currentLibrary:function(){return this.$store.getters["libraries/getCurrentLibrary"]},folders:function(){return this.currentLibrary&&this.currentLibrary.folders||[]},folderItems:function(){return this.folders.map((function(t){return{value:t.id,text:t.fullPath}}))},_podcastData:function(){return this.podcastData||{}},feedMetadata:function(){return this.podcastFeedData&&this.podcastFeedData.metadata||{}},episodes:function(){return this.podcastFeedData&&this.podcastFeedData.episodes||[]},selectedFolder:function(){var t=this;return this.folders.find((function(e){return e.id===t.selectedFolderId}))},selectedFolderPath:function(){return this.selectedFolder?this.selectedFolder.fullPath:""},podcastTypes:function(){var t=this;return this.$store.state.globals.podcastTypes.map((function(e){return{text:t.$strings[e.descriptionKey]||e.text,value:e.value}}))}},methods:{titleUpdated:function(){this.folderUpdated()},folderUpdated:function(){this.selectedFolderPath&&this.podcast.title?this.fullPath=c.a.join(this.selectedFolderPath,this.$sanitizeFilename(this.podcast.title)):this.fullPath=""},submit:function(){var t=this,e={path:this.fullPath,folderId:this.selectedFolderId,libraryId:this.currentLibrary.id,media:{metadata:{title:this.podcast.title,author:this.podcast.author,description:this.podcast.description,releaseDate:this.podcast.releaseDate,genres:Object(o.a)(this.podcast.genres),feedUrl:this.podcast.feedUrl,imageUrl:this.podcast.imageUrl,itunesPageUrl:this.podcast.itunesPageUrl,itunesId:this.podcast.itunesId,itunesArtistId:this.podcast.itunesArtistId,language:this.podcast.language,explicit:this.podcast.explicit,type:this.podcast.type},autoDownloadEpisodes:this.podcast.autoDownloadEpisodes}};console.log("Podcast payload",e),this.processing=!0,this.$axios.$post("/api/podcasts",e).then((function(e){t.processing=!1,t.$toast.success(t.$strings.ToastPodcastCreateSuccess),t.show=!1,t.$router.push("/item/".concat(e.id))})).catch((function(e){var l=e.response&&e.response.data?e.response.data:t.$strings.ToastPodcastCreateFailed;console.error("Failed to create podcast",e),t.processing=!1,t.$toast.error(l)}))},init:function(){this.podcast.title=this._podcastData.title||this.feedMetadata.title||"",this.podcast.author=this._podcastData.artistName||this.feedMetadata.author||"",this.podcast.description=this._podcastData.description||this.feedMetadata.descriptionPlain||"",this.podcast.releaseDate=this._podcastData.releaseDate||"",this.podcast.genres=this._podcastData.genres||this.feedMetadata.categories||[],this.podcast.feedUrl=this._podcastData.feedUrl||this.feedMetadata.feedUrl||"",this.podcast.imageUrl=this._podcastData.cover||this.feedMetadata.image||"",this.podcast.itunesPageUrl=this._podcastData.pageUrl||"",this.podcast.itunesId=this._podcastData.id||"",this.podcast.itunesArtistId=this._podcastData.artistId||"",this.podcast.language=this._podcastData.language||this.feedMetadata.language||"",this.podcast.autoDownloadEpisodes=!1,this.podcast.type=this._podcastData.type||this.feedMetadata.type||"episodic",this.podcast.explicit=this._podcastData.explicit||"yes"===this.feedMetadata.explicit||"true"==this.feedMetadata.explicit,this.folderItems[0]&&(this.selectedFolderId=this.folderItems[0].value,this.folderUpdated())}},mounted:function(){}},n=(l(779),l(4)),component=Object(n.a)(r,(function(){var t=this,e=t._self._c;return e("modals-modal",{attrs:{name:"new-podcast-modal",width:1e3,height:"unset",processing:t.processing},scopedSlots:t._u([{key:"outer",fn:function(){return[e("div",{staticClass:"absolute top-0 left-0 p-5 w-3/4 overflow-hidden"},[e("p",{staticClass:"text-xl md:text-3xl text-white truncate"},[t._v(t._s(t.title))])])]},proxy:!0}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._v(" "),e("div",{ref:"wrapper",staticClass:"p-2 md:p-8 w-full text-sm py-2 rounded-lg bg-bg shadow-lg border border-black-300 relative overflow-x-hidden overflow-y-auto",staticStyle:{"max-height":"80vh"},attrs:{id:"podcast-wrapper"}},[e("div",{staticClass:"w-full"},[e("p",{staticClass:"text-lg font-semibold mb-2 px-2"},[t._v(t._s(t.$strings.HeaderDetails))]),t._v(" "),t.podcast.imageUrl?e("div",{staticClass:"p-2 w-full"},[e("img",{staticClass:"h-16 w-16 object-contain",attrs:{src:t.podcast.imageUrl}})]):t._e(),t._v(" "),e("div",{staticClass:"flex flex-wrap"},[e("div",{staticClass:"w-full md:w-1/2 p-2"},[e("ui-text-input-with-label",{attrs:{label:t.$strings.LabelTitle},on:{input:t.titleUpdated},model:{value:t.podcast.title,callback:function(e){t.$set(t.podcast,"title",e)},expression:"podcast.title"}})],1),t._v(" "),e("div",{staticClass:"w-full md:w-1/2 p-2"},[e("ui-text-input-with-label",{attrs:{label:t.$strings.LabelAuthor},model:{value:t.podcast.author,callback:function(e){t.$set(t.podcast,"author",e)},expression:"podcast.author"}})],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap"},[e("div",{staticClass:"w-full md:w-1/2 p-2"},[e("ui-text-input-with-label",{attrs:{label:t.$strings.LabelFeedURL,readonly:""},model:{value:t.podcast.feedUrl,callback:function(e){t.$set(t.podcast,"feedUrl",e)},expression:"podcast.feedUrl"}})],1),t._v(" "),e("div",{staticClass:"w-full md:w-1/2 p-2"},[e("ui-multi-select",{attrs:{items:t.podcast.genres,label:t.$strings.LabelGenres},model:{value:t.podcast.genres,callback:function(e){t.$set(t.podcast,"genres",e)},expression:"podcast.genres"}})],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap"},[e("div",{staticClass:"md:w-1/4 p-2"},[e("ui-dropdown",{attrs:{label:t.$strings.LabelPodcastType,items:t.podcastTypes,small:""},model:{value:t.podcast.type,callback:function(e){t.$set(t.podcast,"type",e)},expression:"podcast.type"}})],1),t._v(" "),e("div",{staticClass:"md:w-1/4 p-2"},[e("ui-text-input-with-label",{attrs:{label:t.$strings.LabelLanguage},model:{value:t.podcast.language,callback:function(e){t.$set(t.podcast,"language",e)},expression:"podcast.language"}})],1),t._v(" "),e("div",{staticClass:"md:w-1/4 px-2 pt-7"},[e("ui-checkbox",{attrs:{label:t.$strings.LabelExplicit,"checkbox-bg":"primary","border-color":"gray-600","label-class":"pl-2 text-base font-semibold"},model:{value:t.podcast.explicit,callback:function(e){t.$set(t.podcast,"explicit",e)},expression:"podcast.explicit"}})],1)]),t._v(" "),e("div",{staticClass:"p-2 w-full"},[e("ui-textarea-with-label",{attrs:{label:t.$strings.LabelDescription,rows:3},model:{value:t.podcast.description,callback:function(e){t.$set(t.podcast,"description",e)},expression:"podcast.description"}})],1),t._v(" "),e("div",{staticClass:"flex flex-wrap"},[e("div",{staticClass:"w-full md:w-1/2 p-2"},[e("ui-dropdown",{attrs:{items:t.folderItems,disabled:t.processing,label:t.$strings.LabelFolder},on:{input:t.folderUpdated},model:{value:t.selectedFolderId,callback:function(e){t.selectedFolderId=e},expression:"selectedFolderId"}})],1),t._v(" "),e("div",{staticClass:"w-full md:w-1/2 p-2"},[e("ui-text-input-with-label",{attrs:{label:"".concat(t.$strings.LabelPodcast," ").concat(t.$strings.LabelPath),"input-class":"h-10",readonly:""},model:{value:t.fullPath,callback:function(e){t.fullPath=e},expression:"fullPath"}})],1)])]),t._v(" "),e("div",{staticClass:"flex items-center py-4 px-2"},[e("div",{staticClass:"grow"}),t._v(" "),e("div",{staticClass:"px-4"},[e("ui-checkbox",{attrs:{label:t.$strings.LabelAutoDownloadEpisodes,"checkbox-bg":"primary","border-color":"gray-600","label-class":"pl-2 text-sm md:text-base font-semibold"},model:{value:t.podcast.autoDownloadEpisodes,callback:function(e){t.$set(t.podcast,"autoDownloadEpisodes",e)},expression:"podcast.autoDownloadEpisodes"}})],1),t._v(" "),e("ui-btn",{attrs:{color:"bg-success"},on:{click:t.submit}},[t._v(t._s(t.$strings.ButtonSubmit))])],1)])])}),[],!1,null,"5dc14042",null);e.default=component.exports;installComponents(component,{UiTextInputWithLabel:l(121).default,UiMultiSelect:l(675).default,UiDropdown:l(236).default,UiCheckbox:l(184).default,UiTextareaWithLabel:l(186).default,UiBtn:l(42).default,ModalsModal:l(39).default})}}]);