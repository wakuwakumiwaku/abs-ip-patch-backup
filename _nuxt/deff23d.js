(window.webpackJsonp=window.webpackJsonp||[]).push([[104,146],{1099:function(e,t,n){"use strict";n.r(t);n(22),n(43);var o=n(7),l=(n(29),n(17),n(27),n(38),{props:{processing:Boolean,libraryItem:{type:Object,default:function(){}},episode:{type:Object,default:function(){}}},data:function(){return{newEpisode:{season:null,episode:null,episodeType:null,title:null,subtitle:null,description:null,pubDate:null,publishedAt:null},pubDateInput:null}},watch:{episode:{immediate:!0,handler:function(e){e&&this.init()}}},computed:{isProcessing:{get:function(){return this.processing},set:function(e){this.$emit("update:processing",e)}},episodeId:function(){return this.episode?this.episode.id:null},enclosure:function(){return this.episode&&this.episode.enclosure||{}},enclosureUrl:function(){return this.enclosure.url},episodeTypes:function(){var e=this;return this.$store.state.globals.episodeTypes.map((function(t){return{text:e.$strings[t.descriptionKey]||t.text,value:t.value}}))}},methods:{updatePubDate:function(e){e?(this.newEpisode.pubDate=this.$formatJsDate(new Date(e),"E, d MMM yyyy HH:mm:ssxx"),this.newEpisode.publishedAt=new Date(e).valueOf()):(this.newEpisode.pubDate=null,this.newEpisode.publishedAt=null)},init:function(){this.newEpisode.season=this.episode.season||"",this.newEpisode.episode=this.episode.episode||"",this.newEpisode.episodeType=this.episode.episodeType||"",this.newEpisode.title=this.episode.title||"",this.newEpisode.subtitle=this.episode.subtitle||"",this.newEpisode.description=this.episode.description||"",this.newEpisode.pubDate=this.episode.pubDate||"",this.newEpisode.publishedAt=this.episode.publishedAt,this.pubDateInput=this.episode.pubDate?this.$formatJsDate(new Date(this.episode.pubDate),"yyyy-MM-dd'T'HH:mm"):null},getUpdatePayload:function(){var e={};for(var t in this.newEpisode)this.newEpisode[t]!=this.episode[t]&&(e[t]=this.newEpisode[t]);return e},saveAndClose:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.submit();case 2:null!==t.sent&&e.$emit("close");case 4:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isProcessing){t.next=2;break}return t.abrupt("return",null);case 2:if(null!==e.newEpisode.pubDate||null===(n=e.$refs.pubdate)||void 0===n||null===(n=n.$refs)||void 0===n||null===(n=n.input)||void 0===n||!n.isInvalidDate){t.next=5;break}return e.$toast.error(e.$strings.ToastDateTimeInvalidOrIncomplete),t.abrupt("return",null);case 5:if(o=e.getUpdatePayload(),Object.keys(o).length){t.next=9;break}return e.$toast.info(e.$strings.ToastNoUpdatesNecessary),t.abrupt("return",!1);case 9:return t.abrupt("return",e.updateDetails(o));case 10:case"end":return t.stop()}}),t)})))()},updateDetails:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.isProcessing=!0,n.next=3,t.$axios.$patch("/api/podcasts/".concat(t.libraryItem.id,"/episode/").concat(t.episodeId),e).catch((function(e){var n;return console.error("Failed update episode",e),t.isProcessing=!1,t.$toast.error((null==e||null===(n=e.response)||void 0===n?void 0:n.data)||t.$strings.ToastFailedToUpdate),!1}));case 3:if(o=n.sent,t.isProcessing=!1,!o){n.next=8;break}return t.$toast.success(t.$strings.ToastItemUpdateSuccess),n.abrupt("return",!0);case 8:return n.abrupt("return",!1);case 9:case"end":return n.stop()}}),n)})))()}},mounted:function(){}}),r=n(4),component=Object(r.a)(l,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"flex flex-wrap"},[t("div",{staticClass:"w-1/5 p-1"},[t("ui-text-input-with-label",{attrs:{"trim-whitespace":"",label:e.$strings.LabelSeason},model:{value:e.newEpisode.season,callback:function(t){e.$set(e.newEpisode,"season",t)},expression:"newEpisode.season"}})],1),e._v(" "),t("div",{staticClass:"w-1/5 p-1"},[t("ui-text-input-with-label",{attrs:{"trim-whitespace":"",label:e.$strings.LabelEpisode},model:{value:e.newEpisode.episode,callback:function(t){e.$set(e.newEpisode,"episode",t)},expression:"newEpisode.episode"}})],1),e._v(" "),t("div",{staticClass:"w-1/5 p-1"},[t("ui-dropdown",{attrs:{label:e.$strings.LabelEpisodeType,items:e.episodeTypes,small:""},model:{value:e.newEpisode.episodeType,callback:function(t){e.$set(e.newEpisode,"episodeType",t)},expression:"newEpisode.episodeType"}})],1),e._v(" "),t("div",{staticClass:"w-2/5 p-1"},[t("ui-text-input-with-label",{ref:"pubdate",attrs:{type:"datetime-local",label:e.$strings.LabelPubDate},on:{input:e.updatePubDate},model:{value:e.pubDateInput,callback:function(t){e.pubDateInput=t},expression:"pubDateInput"}})],1),e._v(" "),t("div",{staticClass:"w-full p-1"},[t("ui-text-input-with-label",{attrs:{label:e.$strings.LabelTitle,"trim-whitespace":""},model:{value:e.newEpisode.title,callback:function(t){e.$set(e.newEpisode,"title",t)},expression:"newEpisode.title"}})],1),e._v(" "),t("div",{staticClass:"w-full p-1"},[t("ui-textarea-with-label",{attrs:{label:e.$strings.LabelSubtitle,rows:3,"trim-whitespace":""},model:{value:e.newEpisode.subtitle,callback:function(t){e.$set(e.newEpisode,"subtitle",t)},expression:"newEpisode.subtitle"}})],1),e._v(" "),t("div",{staticClass:"w-full p-1"},[t("ui-rich-text-editor",{attrs:{label:e.$strings.LabelDescription},model:{value:e.newEpisode.description,callback:function(t){e.$set(e.newEpisode,"description",t)},expression:"newEpisode.description"}})],1)]),e._v(" "),t("div",{staticClass:"flex items-center justify-end pt-4"},[t("ui-btn",{staticClass:"mx-2 hidden md:block",on:{click:e.submit}},[e._v(e._s(e.$strings.ButtonSave))]),e._v(" "),t("ui-btn",{staticClass:"mx-2 hidden md:block",on:{click:e.saveAndClose}},[e._v(e._s(e.$strings.ButtonSaveAndClose))]),e._v(" "),t("ui-btn",{staticClass:"mx-2 md:hidden",on:{click:e.saveAndClose}},[e._v(e._s(e.$strings.ButtonSave))])],1),e._v(" "),e.enclosureUrl?t("div",{staticClass:"pb-4 pt-6"},[t("ui-text-input-with-label",{staticClass:"text-xs",attrs:{value:e.enclosureUrl,readonly:""}},[t("label",{staticClass:"px-1 text-xs text-gray-200 font-semibold"},[e._v(e._s(e.$strings.LabelEpisodeUrlFromRssFeed))])])],1):t("div",{staticClass:"py-4"},[t("p",{staticClass:"text-xs text-gray-300 font-semibold"},[e._v(e._s(e.$strings.LabelEpisodeNotLinkedToRssFeed))])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{UiTextInputWithLabel:n(121).default,UiDropdown:n(236).default,UiTextareaWithLabel:n(186).default,UiRichTextEditor:n(679).default,UiBtn:n(42).default})},679:function(e,t,n){"use strict";n.r(t);var o={props:{value:String,label:String,disabled:{type:Boolean,default:!1}},data:function(){return{}},computed:{content:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{trixFileAccept:function(e){e.preventDefault()},blur:function(){this.$refs.input&&this.$refs.input.blur&&this.$refs.input.blur()}},mounted:function(){},beforeDestroy:function(){}},l=n(4),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"default-style"},[e.label?t("p",{staticClass:"px-1 text-sm font-semibold",class:{"text-gray-400":e.disabled},staticStyle:{"margin-top":"0","margin-bottom":"0.125em"}},[e._v("\n    "+e._s(e.label)+"\n  ")]):e._e(),e._v(" "),t("ui-vue-trix",{ref:"input",attrs:{"disabled-editor":e.disabled},on:{"trix-file-accept":e.trixFileAccept},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{UiVueTrix:n(702).default})}}]);