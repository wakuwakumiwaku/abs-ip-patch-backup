(window.webpackJsonp=window.webpackJsonp||[]).push([[174,59,75,125],{1057:function(t,e,r){"use strict";r.r(e);var n=r(7),o=(r(26),r(8),r(29),{asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.store,n=t.redirect,r.getters["user/getIsAdminOrUp"]){e.next=4;break}return n("/"),e.abrupt("return");case 4:return e.abrupt("return",{});case 5:case"end":return e.stop()}}),e)})))()},data:function(){return{showAddModal:!1,processing:!1,providers:[]}},methods:{providerRemoved:function(t){this.providers=this.providers.filter((function(p){return p.id!==t}))},providerAdded:function(t){this.providers.push(t)},setShowAddModal:function(){this.showAddModal=!0},loadProviders:function(){var t=this;this.processing=!0,this.$axios.$get("/api/custom-metadata-providers").then((function(e){t.providers=e.providers})).catch((function(e){console.error("Failed",e),t.$toast.error(t.$strings.ToastFailedToLoadData)})).finally((function(){t.processing=!1}))}},mounted:function(){this.loadProviders()}}),l=r(4),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative"},[e("app-settings-content",{attrs:{"header-text":t.$strings.HeaderCustomMetadataProviders},scopedSlots:t._u([{key:"header-prefix",fn:function(){return[e("nuxt-link",{staticClass:"w-8 h-8 flex items-center justify-center rounded-full cursor-pointer hover:bg-white/10 text-center mr-2",attrs:{to:"/config/item-metadata-utils"}},[e("span",{staticClass:"material-symbols text-2xl"},[t._v("arrow_back")])])]},proxy:!0},{key:"header-items",fn:function(){return[e("ui-tooltip",{staticClass:"inline-flex ml-2",attrs:{text:t.$strings.LabelClickForMoreInfo}},[e("a",{staticClass:"inline-flex",attrs:{href:"https://www.audiobookshelf.org/guides/custom-metadata-providers",target:"_blank"}},[e("span",{staticClass:"material-symbols text-xl w-5 text-gray-200"},[t._v("help_outline")])])]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),e("ui-btn",{attrs:{color:"bg-primary",small:""},on:{click:t.setShowAddModal}},[t._v(t._s(t.$strings.ButtonAdd))])]},proxy:!0}])},[t._v(" "),t._v(" "),e("tables-custom-metadata-provider-table",{staticClass:"pt-2",attrs:{providers:t.providers,processing:t.processing},on:{"update:processing":function(e){t.processing=e},removed:t.providerRemoved}}),t._v(" "),e("modals-add-custom-metadata-provider-modal",{ref:"addModal",on:{added:t.providerAdded},model:{value:t.showAddModal,callback:function(e){t.showAddModal=e},expression:"showAddModal"}})],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiTooltip:r(76).default,UiBtn:r(42).default,TablesCustomMetadataProviderTable:r(851).default,ModalsAddCustomMetadataProviderModal:r(852).default,AppSettingsContent:r(652).default})},646:function(t,e,r){var content=r(648);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("6d988fa2",content,!0,{sourceMap:!1})},647:function(t,e,r){"use strict";r(646)},648:function(t,e,r){var n=r(18)((function(i){return i[1]}));n.push([t.i,"\n#settings-description a {\n  color: rgb(96 165 250);\n}\n#settings-description a:hover {\n  color: rgb(147 197 253);\n  text-decoration-line: underline;\n}\n#settings-description code {\n  font-size: 0.875rem;\n  border-radius: 6px;\n  background-color: rgb(82, 82, 82);\n  color: white;\n  padding: 2px 4px;\n}\n",""]),n.locals={},t.exports=n},652:function(t,e,r){"use strict";r.r(e);r(22),r(43);var n={props:{headerText:String,description:String,note:String},methods:{}},o=(r(647),r(4)),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-bg rounded-md shadow-lg border border-white/5 p-2 sm:p-4 mb-8"},[e("div",{staticClass:"flex items-center mb-2"},[t._t("header-prefix"),t._v(" "),e("h1",{staticClass:"text-xl"},[t._v(t._s(t.headerText))]),t._v(" "),t._t("header-items")],2),t._v(" "),t.description?e("p",{staticClass:"mb-6 text-gray-200",attrs:{id:"settings-description"},domProps:{innerHTML:t._s(t.description)}}):t._e(),t._v(" "),t._t("default")],2)}),[],!1,null,null,null);e.default=component.exports},716:function(t,e,r){var content=r(766);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("4c9c9f37",content,!0,{sourceMap:!1})},765:function(t,e,r){"use strict";r(716)},766:function(t,e,r){var n=r(18)((function(i){return i[1]}));n.push([t.i,"\n#providers {\n  table-layout: fixed;\n  border-collapse: collapse;\n  border: 1px solid #474747;\n  width: 100%;\n}\n#providers td,\n#providers th {\n  /* border: 1px solid #2e2e2e; */\n  padding: 8px 8px;\n  text-align: left;\n}\n#providers td.py-0 {\n  padding: 0px 8px;\n}\n#providers tr:nth-child(even) {\n  background-color: #373838;\n}\n#providers tr:nth-child(odd) {\n  background-color: #2f2f2f;\n}\n#providers tr:hover {\n  background-color: #444;\n}\n#providers th {\n  font-size: 0.8rem;\n  font-weight: 600;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  background-color: #272727;\n}\n.custom-provider-api-key {\n  padding: 1px;\n  background-color: #272727;\n  border-radius: 4px;\n  color: transparent;\n  transition: color, background-color 0.5s ease;\n}\n.custom-provider-api-key:hover {\n  background-color: transparent;\n  color: white;\n}\n",""]),n.locals={},t.exports=n},851:function(t,e,r){"use strict";r.r(e);r(15),r(8);var n={props:{providers:{type:Array,default:function(){return[]}},processing:Boolean},data:function(){return{}},methods:{removeProvider:function(t){var e=this,r={message:this.$getString("MessageConfirmDeleteMetadataProvider",[t.name]),callback:function(r){r&&(e.$emit("update:processing",!0),e.$axios.$delete("/api/custom-metadata-providers/".concat(t.id)).then((function(){e.$toast.success(e.$strings.ToastProviderRemoveSuccess),e.$emit("removed",t.id)})).catch((function(t){console.error("Failed to remove provider",t),e.$toast.error(e.$strings.ToastRemoveFailed)})).finally((function(){e.$emit("update:processing",!1)})))},type:"yesNo"};this.$store.commit("globals/setConfirmPrompt",r)}}},o=(r(765),r(4)),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"min-h-40"},[t.providers.length?e("table",{attrs:{id:"providers"}},[e("tr",[e("th",[t._v(t._s(t.$strings.LabelName))]),t._v(" "),e("th",[t._v("URL")]),t._v(" "),e("th",[t._v("Authorization Header Value")]),t._v(" "),e("th",{staticClass:"w-12"})]),t._v(" "),t._l(t.providers,(function(r){return e("tr",{key:r.id},[e("td",{staticClass:"text-sm"},[t._v(t._s(r.name))]),t._v(" "),e("td",{staticClass:"text-sm"},[t._v(t._s(r.url))]),t._v(" "),e("td",{staticClass:"text-sm"},[r.authHeaderValue?e("span",{staticClass:"custom-provider-api-key"},[t._v(t._s(r.authHeaderValue))]):t._e()]),t._v(" "),e("td",{staticClass:"py-0"},[e("div",{staticClass:"h-8 w-8 flex items-center justify-center text-white/50 hover:text-error cursor-pointer",on:{click:function(e){return e.stopPropagation(),t.removeProvider(r)}}},[e("button",{staticClass:"material-symbols text-base",attrs:{type:"button","aria-label":t.$strings.ButtonDelete}},[t._v("delete")])])])])}))],2):t.processing?t._e():e("div",{staticClass:"text-center py-8"},[e("p",{staticClass:"text-lg"},[t._v(t._s(t.$strings.LabelNoCustomMetadataProviders))])]),t._v(" "),t.processing?e("div",{staticClass:"absolute inset-0 h-full flex items-center justify-center bg-black/40 rounded-md"},[e("ui-loading-indicator")],1):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiLoadingIndicator:r(348).default})},852:function(t,e,r){"use strict";r.r(e);var n=r(7),o=(r(29),r(8),{props:{value:Boolean},data:function(){return{processing:!1,newName:"",newUrl:"",newAuthHeaderValue:""}},watch:{show:{handler:function(t){t&&this.init()}}},computed:{show:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{submitForm:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=document.activeElement)||void 0===r||null===(n=r.blur)||void 0===n||n.call(r),e.next=3,t.$nextTick();case 3:if(t.newName&&t.newUrl){e.next=6;break}return t.$toast.error(t.$strings.ToastProviderNameAndUrlRequired),e.abrupt("return");case 6:t.processing=!0,t.$axios.$post("/api/custom-metadata-providers",{name:t.newName,url:t.newUrl,mediaType:"book",authHeaderValue:t.newAuthHeaderValue}).then((function(data){t.$emit("added",data.provider),t.$toast.success(t.$strings.ToastProviderCreatedSuccess),t.show=!1})).catch((function(e){var r,n=(null===(r=e.response)||void 0===r?void 0:r.data)||"Unknown error";console.error("Failed to add provider",e),t.$toast.error(t.$strings.ToastProviderCreatedFailed+": "+n)})).finally((function(){t.processing=!1}));case 8:case"end":return e.stop()}}),e)})))()},init:function(){this.processing=!1,this.newName="",this.newUrl="",this.newAuthHeaderValue=""}},mounted:function(){}}),l=r(4),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("modals-modal",{ref:"modal",attrs:{name:"custom-metadata-provider",width:600,height:"unset",processing:t.processing},scopedSlots:t._u([{key:"outer",fn:function(){return[e("div",{staticClass:"absolute top-0 left-0 p-5 w-2/3 overflow-hidden"},[e("p",{staticClass:"text-3xl text-white truncate"},[t._v(t._s(t.$strings.HeaderAddCustomMetadataProvider))])])]},proxy:!0}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._v(" "),e("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("div",{staticClass:"px-4 w-full flex items-center text-sm py-6 rounded-lg bg-bg shadow-lg border border-black-300 overflow-y-auto overflow-x-hidden",staticStyle:{"min-height":"400px","max-height":"80vh"}},[e("div",{staticClass:"w-full p-8"},[e("div",{staticClass:"flex mb-2"},[e("div",{staticClass:"w-3/4 p-1"},[e("ui-text-input-with-label",{attrs:{label:t.$strings.LabelName,"trim-whitespace":""},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}})],1),t._v(" "),e("div",{staticClass:"w-1/4 p-1"},[e("ui-text-input-with-label",{attrs:{value:"Book",readonly:"",label:t.$strings.LabelMediaType}})],1)]),t._v(" "),e("div",{staticClass:"w-full mb-2 p-1"},[e("ui-text-input-with-label",{attrs:{label:"URL","trim-whitespace":""},model:{value:t.newUrl,callback:function(e){t.newUrl=e},expression:"newUrl"}})],1),t._v(" "),e("div",{staticClass:"w-full mb-2 p-1"},[e("ui-text-input-with-label",{attrs:{label:t.$strings.LabelProviderAuthorizationValue,type:"password"},model:{value:t.newAuthHeaderValue,callback:function(e){t.newAuthHeaderValue=e},expression:"newAuthHeaderValue"}})],1),t._v(" "),e("div",{staticClass:"flex px-1 pt-4"},[e("div",{staticClass:"grow"}),t._v(" "),e("ui-btn",{attrs:{color:"bg-success",type:"submit"}},[t._v(t._s(t.$strings.ButtonAdd))])],1)])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiTextInputWithLabel:r(121).default,UiBtn:r(42).default,ModalsModal:r(39).default})}}]);