(window.webpackJsonp=window.webpackJsonp||[]).push([[87,78,128,129],{1095:function(t,e,l){"use strict";l.r(e);var n={props:{libraryItem:{type:Object,default:function(){}}},data:function(){return{tracks:[]}},watch:{libraryItem:{immediate:!0,handler:function(t){t&&this.init()}}},computed:{media:function(){return this.libraryItem.media||{}},userCanUpdate:function(){return this.$store.getters["user/getUserCanUpdate"]},userCanDownload:function(){return this.$store.getters["user/getUserCanDownload"]},isMissing:function(){return this.libraryItem.isMissing},showDownload:function(){return this.userCanDownload&&!this.isMissing}},methods:{init:function(){this.tracks=this.media.tracks||[]}}},o=l(4),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full h-full overflow-y-auto overflow-x-hidden px-4 py-6"},[e("tables-library-files-table",{attrs:{expanded:"","library-item":t.libraryItem,"is-missing":t.isMissing,"in-modal":""}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{TablesLibraryFilesTable:l(747).default})},688:function(t,e,l){"use strict";l.r(e);l(35),l(63),l(17),l(8),l(40);var n={props:{value:Boolean,audioFile:{type:Object,default:function(){}},libraryItemId:String},data:function(){return{probingFile:!1,ffprobeData:null,hasCopied:null}},watch:{show:function(t){t&&(this.ffprobeData=null,this.probingFile=!1)}},computed:{show:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},metadata:function(){var t;return(null===(t=this.audioFile)||void 0===t?void 0:t.metadata)||{}},metaTags:function(){var t;return(null===(t=this.audioFile)||void 0===t?void 0:t.metaTags)||{}},userIsAdminOrUp:function(){return this.$store.getters["user/getIsAdminOrUp"]},prettyFfprobeData:function(){return this.ffprobeData?JSON.stringify(this.ffprobeData,null,2):""}},methods:{getFFProbeData:function(){var t=this;this.probingFile=!0,this.$axios.$get("/api/items/".concat(this.libraryItemId,"/ffprobe/").concat(this.audioFile.ino)).then((function(data){console.log("Got ffprobe data",data),t.ffprobeData=data})).catch((function(e){console.error("Failed to get ffprobe data",e),t.$toast.error(t.$strings.ToastFailedToLoadData)})).finally((function(){t.probingFile=!1}))},copyToClipboard:function(){var t=this;clearTimeout(this.hasCopied),this.$copyToClipboard(this.prettyFfprobeData).then((function(e){t.hasCopied=setTimeout((function(){t.hasCopied=null}),2e3)}))}},mounted:function(){}},o=l(4),component=Object(o.a)(n,(function(){var t,e=this,l=e._self._c;return l("modals-modal",{attrs:{name:"audiofile-data-modal",width:700,height:"unset"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e.audioFile?l("div",{ref:"container",staticClass:"w-full rounded-lg bg-bg box-shadow-md overflow-y-auto overflow-x-hidden p-6",staticStyle:{"max-height":"80vh"}},[l("div",{staticClass:"flex items-center justify-between"},[l("p",{staticClass:"text-base text-gray-200 truncate"},[e._v(e._s(e.metadata.filename))]),e._v(" "),e.ffprobeData?l("ui-btn",{staticClass:"ml-2",attrs:{small:""},on:{click:function(t){e.ffprobeData=null}}},[e._v(e._s(e.$strings.ButtonReset))]):e.userIsAdminOrUp?l("ui-btn",{staticClass:"ml-2",attrs:{small:"",loading:e.probingFile},on:{click:e.getFFProbeData}},[e._v(e._s(e.$strings.ButtonProbeAudioFile))]):e._e()],1),e._v(" "),l("div",{staticClass:"w-full h-px bg-white/10 my-4"}),e._v(" "),e.ffprobeData?l("div",{staticClass:"w-full"},[l("div",{staticClass:"relative"},[l("ui-textarea-with-label",{staticClass:"text-xs",attrs:{value:e.prettyFfprobeData,readonly:"",rows:30}}),e._v(" "),l("button",{staticClass:"absolute top-4 right-4",class:e.hasCopied?"text-success":"text-gray-400 hover:text-white",on:{click:function(t){return t.stopPropagation(),e.copyToClipboard.apply(null,arguments)}}},[l("span",{staticClass:"material-symbols"},[e._v(e._s(e.hasCopied?"done":"content_copy"))])])],1)]):[l("ui-text-input-with-label",{staticClass:"mb-4 text-sm",attrs:{value:e.metadata.path,readonly:"",label:e.$strings.LabelPath}}),e._v(" "),l("div",{staticClass:"flex flex-col sm:flex-row text-sm"},[l("div",{staticClass:"w-full sm:w-1/2"},[l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelSize)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.$bytesPretty(e.metadata.size)))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelDuration)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.$secondsToTimestamp(e.audioFile.duration)))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v(e._s(e.$strings.LabelFormat))]),e._v(" "),l("p",[e._v(e._s(e.audioFile.format))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelChapters)+"\n            ")]),e._v(" "),l("p",[e._v(e._s((null===(t=e.audioFile.chapters)||void 0===t?void 0:t.length)||0))])]),e._v(" "),e.audioFile.embeddedCoverArt?l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelEmbeddedCover)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.audioFile.embeddedCoverArt||""))])]):e._e()]),e._v(" "),l("div",{staticClass:"w-full sm:w-1/2"},[l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelCodec)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.audioFile.codec))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelChannels)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.audioFile.channels)+" ("+e._s(e.audioFile.channelLayout)+")")])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelBitrate)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.$bytesPretty(e.audioFile.bitRate||0,0)))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v(e._s(e.$strings.LabelTimeBase))]),e._v(" "),l("p",[e._v(e._s(e.audioFile.timeBase))])]),e._v(" "),e.audioFile.language?l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelLanguage)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.audioFile.language||""))])]):e._e()])]),e._v(" "),l("div",{staticClass:"w-full h-px bg-white/10 my-4"}),e._v(" "),l("p",{staticClass:"font-bold mb-2"},[e._v(e._s(e.$strings.LabelMetaTags))]),e._v(" "),e._l(e.metaTags,(function(t,n){return l("div",{key:n,staticClass:"flex mb-1 text-sm"},[l("p",{staticClass:"w-32 min-w-32 text-black-50 mb-1"},[e._v("\n          "+e._s(n.replace("tag",""))+"\n        ")]),e._v(" "),l("p",[e._v(e._s(t))])])}))]],2):e._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiBtn:l(42).default,UiTextInputWithLabel:l(121).default,UiTextareaWithLabel:l(186).default,ModalsModal:l(39).default})},709:function(t,e,l){"use strict";l.r(e);l(17);var n={props:{libraryItemId:String,showFullPath:Boolean,file:{type:Object,default:function(){}},inModal:Boolean},data:function(){return{}},computed:{userToken:function(){return this.$store.getters["user/getToken"]},userCanDownload:function(){return this.$store.getters["user/getUserCanDownload"]},userCanDelete:function(){return this.$store.getters["user/getUserCanDelete"]},userIsAdmin:function(){return this.$store.getters["user/getIsAdminOrUp"]},downloadUrl:function(){return"".concat("/audiobookshelf","/api/items/").concat(this.libraryItemId,"/file/").concat(this.file.ino,"/download?token=").concat(this.userToken)},contextMenuItems:function(){var t=[];return this.userCanDownload&&t.push({text:this.$strings.LabelDownload,action:"download"}),this.userCanDelete&&t.push({text:this.$strings.ButtonDelete,action:"delete"}),this.userIsAdmin&&this.file.audioFile&&!this.inModal&&t.push({text:this.$strings.LabelMoreInfo,action:"more"}),t}},methods:{contextMenuAction:function(t){var e=t.action;"delete"===e?this.deleteLibraryFile():"download"===e?this.downloadLibraryFile():"more"===e&&this.$emit("showMore",this.file.audioFile)},deleteLibraryFile:function(){var t=this,e={message:this.$strings.MessageConfirmDeleteFile,callback:function(e){e&&t.$axios.$delete("/api/items/".concat(t.libraryItemId,"/file/").concat(t.file.ino)).then((function(){t.$toast.success(t.$strings.ToastDeleteFileSuccess)})).catch((function(e){console.error("Failed to delete file",e),t.$toast.error(t.$strings.ToastDeleteFileFailed)}))},type:"yesNo"};this.$store.commit("globals/setConfirmPrompt",e)},downloadLibraryFile:function(){this.$downloadFile(this.downloadUrl,this.file.metadata.filename)}},mounted:function(){}},o=l(4),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"px-4"},[t._v("\n    "+t._s(t.showFullPath?t.file.metadata.path:t.file.metadata.relPath)+"\n  ")]),t._v(" "),e("td",[t._v("\n    "+t._s(t.$bytesPretty(t.file.metadata.size))+"\n  ")]),t._v(" "),e("td",{staticClass:"text-xs"},[e("div",{staticClass:"flex items-center"},[e("p",[t._v(t._s(t.file.fileType))])])]),t._v(" "),t.contextMenuItems.length?e("td",{staticClass:"text-center"},[e("ui-context-menu-dropdown",{attrs:{items:t.contextMenuItems,"menu-width":110},on:{action:t.contextMenuAction}})],1):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiContextMenuDropdown:l(349).default})},747:function(t,e,l){"use strict";l.r(e);l(26),l(33),l(27),l(14),l(8);var n={props:{libraryItem:{type:Object,default:function(){}},expanded:Boolean,inModal:Boolean},data:function(){return{showFiles:!1,showFullPath:!1,showAudioFileDataModal:!1,selectedAudioFile:null}},computed:{libraryItemId:function(){return this.libraryItem.id},userCanDownload:function(){return this.$store.getters["user/getUserCanDownload"]},userCanDelete:function(){return this.$store.getters["user/getUserCanDelete"]},userIsAdmin:function(){return this.$store.getters["user/getIsAdminOrUp"]},files:function(){return this.libraryItem.libraryFiles||[]},audioFiles:function(){var t,e;return"podcast"===this.libraryItem.mediaType?(null===(e=this.libraryItem.media)||void 0===e?void 0:e.episodes.map((function(t){return t.audioFile})).filter((function(t){return t})))||[]:(null===(t=this.libraryItem.media)||void 0===t?void 0:t.audioFiles)||[]},filesWithAudioFile:function(){var t=this;return this.files.map((function(e){return"audio"===e.fileType&&(e.audioFile=t.audioFiles.find((function(t){return t.ino===e.ino}))),e}))}},methods:{toggleFullPath:function(){this.showFullPath=!this.showFullPath,localStorage.setItem("showFullPath",this.showFullPath?1:0)},clickBar:function(){this.showFiles=!this.showFiles},showMore:function(t){this.selectedAudioFile=t,this.showAudioFileDataModal=!0}},mounted:function(){this.userIsAdmin&&(this.showFullPath=!!Number(localStorage.getItem("showFullPath")||0)),this.showFiles=this.expanded}},o=l(4),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full my-2"},[e("div",{staticClass:"w-full bg-primary px-4 md:px-6 py-2 flex items-center cursor-pointer",on:{click:function(e){return e.stopPropagation(),t.clickBar.apply(null,arguments)}}},[e("p",{staticClass:"pr-2 md:pr-4"},[t._v(t._s(t.$strings.HeaderLibraryFiles))]),t._v(" "),e("div",{staticClass:"h-5 md:h-7 w-5 md:w-7 rounded-full bg-white/10 flex items-center justify-center"},[e("span",{staticClass:"text-sm font-mono"},[t._v(t._s(t.files.length))])]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),t.userIsAdmin?e("ui-btn",{staticClass:"mr-2 hidden md:block",attrs:{small:"",color:t.showFullPath?"bg-gray-600":"bg-primary"},on:{click:function(e){return e.stopPropagation(),t.toggleFullPath.apply(null,arguments)}}},[t._v(t._s(t.$strings.ButtonFullPath))]):t._e(),t._v(" "),e("div",{staticClass:"cursor-pointer h-10 w-10 rounded-full hover:bg-black-400 flex justify-center items-center duration-500",class:t.showFiles?"transform rotate-180":""},[e("span",{staticClass:"material-symbols text-4xl"},[t._v("îŒ“")])])],1),t._v(" "),e("transition",{attrs:{name:"slide"}},[t.showFiles?e("div",{staticClass:"w-full"},[e("table",{staticClass:"text-sm tracksTable"},[e("tr",[e("th",{staticClass:"text-left px-4"},[t._v(t._s(t.$strings.LabelPath))]),t._v(" "),e("th",{staticClass:"text-left w-24 min-w-24"},[t._v(t._s(t.$strings.LabelSize))]),t._v(" "),e("th",{staticClass:"text-left px-4 w-24"},[t._v(t._s(t.$strings.LabelType))]),t._v(" "),t.userCanDelete||t.userCanDownload||t.userIsAdmin&&t.audioFiles.length&&!t.inModal?e("th",{staticClass:"text-center w-16"}):t._e()]),t._v(" "),t._l(t.filesWithAudioFile,(function(l){return[e("tables-library-files-table-row",{key:l.path,attrs:{libraryItemId:t.libraryItemId,showFullPath:t.showFullPath,file:l,inModal:t.inModal},on:{showMore:t.showMore}})]}))],2)]):t._e()]),t._v(" "),e("modals-audio-file-data-modal",{attrs:{"library-item-id":t.libraryItemId,"audio-file":t.selectedAudioFile},model:{value:t.showAudioFileDataModal,callback:function(e){t.showAudioFileDataModal=e},expression:"showAudioFileDataModal"}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiBtn:l(42).default,TablesLibraryFilesTableRow:l(709).default,ModalsAudioFileDataModal:l(688).default})}}]);