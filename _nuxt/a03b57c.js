(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{848:function(t,e,n){"use strict";n.r(e);var r=n(16);n(22),n(26),n(27),n(150),n(8),n(44),n(45),n(38),n(351),n(28);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var l={props:{listeningStats:{type:Object,default:function(){}}},data:function(){return{chartHeight:288,chartWidth:384,chartContentWidth:360,chartContentHeight:268}},computed:{yAxisLabels:function(){for(var t=[],i=6;i>=0;i--)t.push(i*this.yAxisFactor);return t},chartContentMarginLeft:function(){return this.chartWidth-this.chartContentWidth},chartContentMarginBottom:function(){return this.chartHeight-this.chartContentHeight},lineSpacing:function(){return this.chartHeight/7},daySpacing:function(){return this.chartContentWidth/7},linePositions:function(){for(var t=[],i=7;i>0;i--)t.push(i*this.lineSpacing);return t.push(0),t},last7Days:function(){for(var t=[],i=6;i>=0;i--){var e=this.$addDaysToToday(-1*i);t.push({dayOfWeek:this.$formatJsDate(e,"EEEE"),dayOfWeekAbbr:this.$formatJsDate(e,"EEE"),date:this.$formatJsDate(e,"yyyy-MM-dd")})}return t},last7DaysOfListening:function(){var t=this,e={},n=0;return this.last7Days.forEach((function(r){e[n++]={dayOfWeek:r.dayOfWeek,minutesListening:t.getMinutesListeningForDate(r.date)}})),e},mostListenedDay:function(){var t=Object.values(this.last7DaysOfListening).map((function(dl){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},dl)})).sort((function(a,b){return b.minutesListening-a.minutesListening}));return t[0].minutesListening},yAxisFactor:function(){var t=Math.ceil(this.mostListenedDay/5);return t>25?5*Math.ceil(t/5):Math.max(1,t)},points:function(){for(var data=[],i=0;i<7;i++){var t=(this.last7DaysOfListening[String(i)].minutesListening||0)/(7*this.yAxisFactor);data.push({x:4+this.chartContentMarginLeft+(this.daySpacing+this.daySpacing/14)*i,y:this.chartContentMarginBottom+this.chartHeight*t-2})}return data},pointLines:function(){for(var t=[],i=1;i<7;i++){var e=this.points[i-1],n=this.points[i],r=e.x,o=n.x,l=e.y,c=n.y;t.push({x:r+4,y:l+2,angle:this.getAngleBetweenPoints(r,l,o,c),width:Math.sqrt(Math.pow(r-o,2)+Math.pow(l-c,2))-2})}return t},totalMinutesListeningThisWeek:function(){var t=0;return Object.values(this.last7DaysOfListening).forEach((function(e){return t+=e.minutesListening})),t},averageMinutesPerDay:function(){return Math.round(this.totalMinutesListeningThisWeek/7)},daysInARow:function(){for(var t=0;;){var e=this.$addDaysToToday(-1*t-1),n=this.$formatJsDate(e,"yyyy-MM-dd");if(!this.listeningStatsDays[n]||0===this.listeningStatsDays[n]){var r=this.$formatJsDate(new Date,"yyyy-MM-dd");return this.listeningStatsDays[r]&&t++,t}if(++t>9999)return console.error("Overflow protection"),0}},listeningStatsDays:function(){return this.listeningStats&&this.listeningStats.days||[]}},methods:{getAngleBetweenPoints:function(t,e,n,r){var o=r-e,l=n-t,c=Math.atan2(o,l);return-1*(c*=180/Math.PI)},getMinutesListeningForDate:function(t){return this.listeningStats&&this.listeningStats.days?Math.round((this.listeningStats.days[t]||0)/60):0}},mounted:function(){}},c=l,h=n(4),component=Object(h.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-96 my-6 mx-auto"},[e("h1",{staticClass:"text-2xl mb-4"},[t._v(t._s(t.$strings.HeaderStatsMinutesListeningChart))]),t._v(" "),e("div",{staticClass:"relative w-96 h-72"},[e("div",{staticClass:"absolute top-0 left-0"},[t._l(t.yAxisLabels,(function(n){return[e("div",{key:n,staticClass:"flex items-center justify-end",style:{height:t.lineSpacing+"px"}},[e("p",{staticClass:"text-xs font-semibold"},[t._v(t._s(n))])])]}))],2),t._v(" "),t._l(7,(function(n){return[e("div",{key:n,staticClass:"absolute pointer-events-none left-0 h-px bg-white/10",style:{top:n*t.lineSpacing-t.lineSpacing/2+"px",width:"360px",marginLeft:"24px"}}),t._v(" "),e("div",{key:"dot-".concat(n),staticClass:"absolute z-10",style:{left:t.points[n-1].x+"px",bottom:t.points[n-1].y+"px"}},[e("ui-tooltip",{attrs:{text:t.last7DaysOfListening[n-1].minutesListening,plaintext:"",direction:"top"}},[e("div",{staticClass:"h-2 w-2 bg-yellow-400 hover:bg-yellow-300 rounded-full transform duration-150 transition-transform hover:scale-125"})])],1)]})),t._v(" "),t._l(t.pointLines,(function(line,t){return[e("div",{key:"line-".concat(t),staticClass:"absolute h-0.5 bg-yellow-400 origin-bottom-left pointer-events-none",style:{width:line.width+"px",left:line.x+"px",bottom:line.y+"px",transform:"rotate(".concat(line.angle,"deg)")}})]})),t._v(" "),e("div",{staticClass:"absolute -bottom-2 left-0 flex ml-6"},[t._l(t.last7Days,(function(n){return[e("div",{key:n.date,style:{width:t.daySpacing+t.daySpacing/14+"px"}},[e("p",{staticClass:"text-sm"},[t._v(t._s(n.dayOfWeekAbbr))])])]}))],2)],2),t._v(" "),e("div",{staticClass:"flex justify-between pt-12"},[e("div",[e("p",{staticClass:"text-sm text-center"},[t._v(t._s(t.$strings.LabelStatsWeekListening))]),t._v(" "),e("p",{staticClass:"text-5xl font-semibold text-center",staticStyle:{"line-height":"0.85"}},[t._v(t._s(t.$formatNumber(t.totalMinutesListeningThisWeek)))]),t._v(" "),e("p",{staticClass:"text-sm text-center"},[t._v(t._s(t.$strings.LabelStatsMinutes))])]),t._v(" "),e("div",[e("p",{staticClass:"text-sm text-center"},[t._v(t._s(t.$strings.LabelStatsDailyAverage))]),t._v(" "),e("p",{staticClass:"text-5xl font-semibold text-center",staticStyle:{"line-height":"0.85"}},[t._v(t._s(t.$formatNumber(t.averageMinutesPerDay)))]),t._v(" "),e("p",{staticClass:"text-sm text-center"},[t._v(t._s(t.$strings.LabelStatsMinutes))])]),t._v(" "),e("div",[e("p",{staticClass:"text-sm text-center"},[t._v(t._s(t.$strings.LabelStatsBestDay))]),t._v(" "),e("p",{staticClass:"text-5xl font-semibold text-center",staticStyle:{"line-height":"0.85"}},[t._v(t._s(t.$formatNumber(t.mostListenedDay)))]),t._v(" "),e("p",{staticClass:"text-sm text-center"},[t._v(t._s(t.$strings.LabelStatsMinutes))])]),t._v(" "),e("div",[e("p",{staticClass:"text-sm text-center"},[t._v(t._s(t.$strings.LabelStatsDays))]),t._v(" "),e("p",{staticClass:"text-5xl font-semibold text-center",staticStyle:{"line-height":"0.85"}},[t._v(t._s(t.$formatNumber(t.daysInARow)))]),t._v(" "),e("p",{staticClass:"text-sm text-center"},[t._v(t._s(t.$strings.LabelStatsInARow))])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiTooltip:n(76).default})}}]);