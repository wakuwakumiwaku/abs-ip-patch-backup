(window.webpackJsonp=window.webpackJsonp||[]).push([[165,155],{1065:function(t,e,r){"use strict";r.r(e);r(22),r(43),r(17),r(15);var o=r(16),n=r(7);r(26),r(44),r(45),r(38),r(8),r(28),r(35),r(63),r(29);function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){Object(o.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var d={asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,o,n,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.store,o=t.app,n=t.params,c=t.redirect,t.query,e.next=3,o.$axios.$get("/api/authors/".concat(n.id,"?include=items,series")).catch((function(t){return console.error("Failed to get author",t),null}));case 3:if(l=e.sent){e.next=6;break}return e.abrupt("return",c("/library/".concat(r.state.libraries.currentLibraryId,"/bookshelf/authors")));case 6:if(r.state.libraries.currentLibraryId===l.libraryId&&r.state.libraries.filterData){e.next=9;break}return e.next=9,r.dispatch("libraries/fetch",l.libraryId);case 9:return e.abrupt("return",{author:l});case 10:case"end":return e.stop()}}),e)})))()},data:function(){return{isDescriptionClamped:!1,showFullDescription:!1}},computed:{streamLibraryItem:function(){return this.$store.state.streamLibraryItem},currentLibraryId:function(){return this.$store.state.libraries.currentLibraryId},libraryItems:function(){return this.author.libraryItems||[]},authorSeries:function(){return this.author.series||[]},userCanUpdate:function(){return this.$store.getters["user/getUserCanUpdate"]}},methods:{checkDescriptionClamped:function(){this.$refs.description&&(this.isDescriptionClamped=this.$refs.description.scrollHeight>this.$refs.description.clientHeight)},editAuthor:function(){this.$store.commit("globals/showEditAuthorModal",this.author)},authorUpdated:function(t){t.id===this.author.id&&(console.log("Author was updated",t),this.author=l(l({},t),{},{series:this.authorSeries,libraryItems:this.libraryItems}),this.$nextTick(this.checkDescriptionClamped))},authorRemoved:function(t){t.id===this.author.id&&(console.warn("Author was removed"),this.$router.replace("/library/".concat(this.currentLibraryId,"/bookshelf/authors")))}},mounted:function(){this.author||this.$router.replace("/"),this.checkDescriptionClamped(),this.$root.socket.on("author_updated",this.authorUpdated),this.$root.socket.on("author_removed",this.authorRemoved)},beforeDestroy:function(){this.$root.socket.off("author_updated",this.authorUpdated),this.$root.socket.off("author_removed",this.authorRemoved)}},h=(r(912),r(4)),component=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-bg page overflow-y-auto p-4 md:p-8",class:t.streamLibraryItem?"streaming":"",attrs:{id:"page-wrapper"}},[e("div",{staticClass:"max-w-6xl mx-auto"},[e("div",{staticClass:"flex flex-wrap sm:flex-nowrap justify-center mb-6"},[e("div",{staticClass:"w-48 min-w-48"},[e("div",{staticClass:"w-full h-60"},[e("covers-author-image",{attrs:{author:t.author,"rounded-sm":"0"}})],1)]),t._v(" "),e("div",{staticClass:"grow py-4 sm:py-0 px-4 md:px-8"},[e("div",{staticClass:"flex items-center mb-8"},[e("h1",{staticClass:"text-2xl"},[t._v(t._s(t.author.name))]),t._v(" "),t.userCanUpdate?e("button",{staticClass:"w-8 h-8 rounded-full flex items-center justify-center mx-4 cursor-pointer text-gray-300 hover:text-warning transform hover:scale-125 duration-100",on:{click:t.editAuthor}},[e("span",{staticClass:"material-symbols text-base"},[t._v("edit")])]):t._e()]),t._v(" "),t.author.description?e("p",{staticClass:"text-white/60 uppercase text-xs mb-2"},[t._v(t._s(t.$strings.LabelDescription))]):t._e(),t._v(" "),e("p",{ref:"description",staticClass:"text-white max-w-3xl text-base whitespace-pre-wrap",class:{"show-full":t.showFullDescription},attrs:{id:"author-description"}},[t._v(t._s(t.author.description))]),t._v(" "),t.isDescriptionClamped?e("button",{staticClass:"py-0.5 flex items-center text-slate-300 hover:text-white",on:{click:function(e){t.showFullDescription=!t.showFullDescription}}},[t._v("\n          "+t._s(t.showFullDescription?t.$strings.ButtonReadLess:t.$strings.ButtonReadMore)+" "),e("span",{staticClass:"material-symbols text-xl pl-1"},[t._v(t._s(t.showFullDescription?"expand_less":"expand_more"))])]):t._e()])]),t._v(" "),e("div",{staticClass:"py-4"},[e("widgets-item-slider",{attrs:{items:t.libraryItems,"shelf-id":"author-books","bookshelf-view":t.$constants.BookshelfView.AUTHOR}},[e("nuxt-link",{staticClass:"hover:underline",attrs:{to:"/library/".concat(t.currentLibraryId,"/bookshelf?filter=authors.").concat(t.$encode(t.author.id))}},[e("h2",{staticClass:"text-lg"},[t._v(t._s(t.libraryItems.length)+" "+t._s(t.$strings.LabelBooks))])])],1)],1),t._v(" "),t._l(t.authorSeries,(function(r){return e("div",{key:r.id,staticClass:"py-4"},[e("widgets-item-slider",{attrs:{items:r.items,"shelf-id":r.id,"bookshelf-view":t.$constants.BookshelfView.AUTHOR}},[e("nuxt-link",{staticClass:"hover:underline",attrs:{to:"/library/".concat(t.currentLibraryId,"/series/").concat(r.id)}},[e("h2",{staticClass:"text-lg"},[t._v(t._s(r.name))])]),t._v(" "),e("p",{staticClass:"text-white/40 text-base px-2"},[t._v(t._s(t.$strings.LabelSeries))])],1)],1)}))],2)])}),[],!1,null,"51e822f2",null);e.default=component.exports;installComponents(component,{CoversAuthorImage:r(241).default,WidgetsItemSlider:r(741).default})},741:function(t,e,r){"use strict";r.r(e);r(41),r(27),r(15),r(14),r(8),r(28);var o={props:{items:{type:Array,default:function(){return[]}},bookshelfView:{type:Number,default:1},shelfId:{type:String,default:""},continueListeningShelf:{type:Boolean,default:!1},type:{type:String,default:"book"}},data:function(){return{isScrollable:!1,canScrollLeft:!1,canScrollRight:!1,clientWidth:0,shelfOptionsByType:{episode:{component:"cards-lazy-book-card",itemPropName:"book-mount",itemIdFunc:function(t){return t.recentEpisode.id}},series:{component:"cards-lazy-series-card",itemPropName:"series-mount",itemIdFunc:function(t){return t.id}},authors:{component:"cards-author-card",itemPropName:"author-mount",itemIdFunc:function(t){return t.id}},narrators:{component:"cards-narrator-card",itemPropName:"narrator",itemIdFunc:function(t){return t.name}},book:{component:"cards-lazy-book-card",itemPropName:"book-mount",itemIdFunc:function(t){return t.id}},podcast:{component:"cards-lazy-book-card",itemPropName:"book-mount",itemIdFunc:function(t){return t.id}}}}},computed:{isSelectionMode:function(){return this.$store.getters["globals/getIsBatchSelectingMediaItems"]},options:function(){return this.shelfOptionsByType[this.type]},itemIdFunc:function(){return this.options.itemIdFunc},itemKeyFunc:function(){var t=this;return function(e){return t.itemIdFunc(e)+t.shelfId}},itemRefFunc:function(){var t=this;return function(e){return"slider-item-".concat(t.itemIdFunc(e))}},componentName:function(){return this.options.component},itemPropName:function(){return this.options.itemPropName},editFunc:function(){switch(this.type){case"episode":return this.editEpisode;case"authors":return this.editAuthor;default:return this.editItem}}},methods:{clearSelectedEntities:function(){this.updateSelectionMode(!1)},editEpisode:function(t){var e=t.libraryItem,r=t.episode;this.$store.commit("setEpisodeTableEpisodeIds",[r.id]),this.$store.commit("setSelectedLibraryItem",e),this.$store.commit("globals/setSelectedEpisode",r),this.$store.commit("globals/setShowEditPodcastEpisodeModal",!0)},editAuthor:function(t){this.$store.commit("globals/showEditAuthorModal",t)},editItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"details",r=this.items.map((function(t){return t.id}));this.$store.commit("setBookshelfBookIds",r),this.$store.commit("showEditModalOnTab",{libraryItem:t,tab:e||"details"})},selectItem:function(t){this.$emit("selectEntity",t)},itemSelectedEvt:function(){this.updateSelectionMode(this.isSelectionMode)},updateSelectionMode:function(t){var e=this,r=this.$store.state.globals.selectedMediaItems;this.items.forEach((function(o){var component=e.$refs[e.itemRefFunc(o)];component&&component.length&&((component=component[0]).setSelectionMode(t),component.selected=r.some((function(i){return i.id===o.id})))}))},scrolled:function(){this.setScrollVars()},scrollRight:function(){if(this.canScrollRight){var t=this.$refs.slider;if(t){var e=this.clientWidth,r=t.scrollWidth-t.clientWidth,o=Math.min(r,t.scrollLeft+e);t.scrollLeft=o}}},scrollLeft:function(){if(this.canScrollLeft){var t=this.$refs.slider;if(t){var e=this.clientWidth,r=Math.max(0,t.scrollLeft-e);t.scrollLeft=r}}},setScrollVars:function(){var t=this.$refs.slider;if(t){var e=t.scrollLeft,r=t.scrollWidth,o=t.clientWidth,n=Math.abs(e+o-r);this.clientWidth=o,this.isScrollable=r>o,this.canScrollRight=n>=1,this.canScrollLeft=e>0}}},updated:function(){this.setScrollVars()},mounted:function(){this.setScrollVars(),["book","podcast","episode"].includes(this.type)&&(this.$eventBus.$on("bookshelf_clear_selection",this.clearSelectedEntities),this.$eventBus.$on("item-selected",this.itemSelectedEvt))},beforeDestroy:function(){["book","podcast","episode"].includes(this.type)&&(this.$eventBus.$off("bookshelf_clear_selection",this.clearSelectedEntities),this.$eventBus.$off("item-selected",this.itemSelectedEvt))}},n=o,c=r(4),component=Object(c.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full"},[e("div",{staticClass:"flex items-center py-3e"},[t._t("default"),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),t.isScrollable?e("button",{staticClass:"w-8e h-8e mx-1e flex items-center justify-center rounded-full",class:t.canScrollLeft?"hover:bg-white/5 text-gray-300 hover:text-white":"text-white/40 cursor-text",attrs:{"cy-id":"leftScrollButton","aria-label":t.$strings.ButtonScrollLeft},on:{click:t.scrollLeft}},[e("span",{staticClass:"material-symbols",style:{fontSize:"1.5em"}},[t._v("chevron_left")])]):t._e(),t._v(" "),t.isScrollable?e("button",{staticClass:"w-8e h-8e mx-1e flex items-center justify-center rounded-full",class:t.canScrollRight?"hover:bg-white/5 text-gray-300 hover:text-white":"text-white/40 cursor-text",attrs:{"cy-id":"rightScrollButton","aria-label":t.$strings.ButtonScrollRight},on:{click:t.scrollRight}},[e("span",{staticClass:"material-symbols",style:{fontSize:"1.5em"}},[t._v("chevron_right")])]):t._e()],2),t._v(" "),e("div",{ref:"slider",staticClass:"w-full overflow-y-hidden overflow-x-auto no-scroll",staticStyle:{"scroll-behavior":"smooth"},attrs:{"cy-id":"slider"},on:{scroll:t.scrolled}},[e("div",{staticClass:"flex space-x-4e"},[t._l(t.items,(function(r,o){return[e("div",{key:t.itemKeyFunc(r),ref:"item",refInFor:!0,attrs:{"cy-id":"item"}},[e(t.componentName,t._b({ref:t.itemRefFunc(r),refInFor:!0,tag:"component",staticClass:"relative",attrs:{index:o,"bookshelf-view":t.bookshelfView,"continue-listening-shelf":t.continueListeningShelf},on:{edit:t.editFunc,editPodcast:t.editItem,select:t.selectItem,"hook:updated":t.setScrollVars}},"component",t._d({},[t.itemPropName,r])))],1)]}))],2)])])}),[],!1,null,null,null);e.default=component.exports},802:function(t,e,r){var content=r(913);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("f9b51ce0",content,!0,{sourceMap:!1})},912:function(t,e,r){"use strict";r(802)},913:function(t,e,r){var o=r(18)((function(i){return i[1]}));o.push([t.i,"\n#author-description[data-v-51e822f2] {\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 4;\n  max-height: 6.25rem;\n  transition: all 0.3s ease-in-out;\n}\n#author-description.show-full[data-v-51e822f2] {\n  -webkit-line-clamp: unset;\n  max-height: 999rem;\n}\n",""]),o.locals={},t.exports=o}}]);