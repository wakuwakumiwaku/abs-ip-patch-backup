(window.webpackJsonp=window.webpackJsonp||[]).push([[90,149],{1098:function(t,e,n){"use strict";n.r(e);n(33),n(8);var r={props:{processing:Boolean,libraryItem:{type:Object,default:function(){}}},data:function(){return{}},computed:{libraryItemId:function(){var t;return(null===(t=this.libraryItem)||void 0===t?void 0:t.id)||null},media:function(){var t;return(null===(t=this.libraryItem)||void 0===t?void 0:t.media)||{}},mediaTracks:function(){return this.media.tracks||[]},chapters:function(){return this.media.chapters||[]},showM4bDownload:function(){return!!this.mediaTracks.length},queuedEmbedLIds:function(){return this.$store.state.tasks.queuedEmbedLIds||[]},isMetadataEmbedQueued:function(){var t=this;return this.queuedEmbedLIds.some((function(e){return e===t.libraryItemId}))},tasks:function(){return this.$store.getters["tasks/getTasksByLibraryItemId"](this.libraryItemId)},embedTask:function(){return this.tasks.find((function(t){return"embed-metadata"===t.action}))},encodeTask:function(){return this.tasks.find((function(t){return"encode-m4b"===t.action}))},isEmbedTaskRunning:function(){var t;return this.embedTask&&!(null!==(t=this.embedTask)&&void 0!==t&&t.isFinished)},isEncodeTaskRunning:function(){var t;return this.encodeTask&&!(null!==(t=this.encodeTask)&&void 0!==t&&t.isFinished)}},methods:{quickEmbed:function(){var t=this,e={message:this.$strings.MessageConfirmQuickEmbed,callback:function(e){e&&t.$axios.$post("/api/tools/item/".concat(t.libraryItemId,"/embed-metadata")).then((function(){console.log("Audio metadata encode started")})).catch((function(t){console.error("Audio metadata encode failed",t)}))},type:"yesNo"};this.$store.commit("globals/setConfirmPrompt",e)}}},o=n(4),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full h-full overflow-hidden overflow-y-auto px-4 py-6"},[e("p",{staticClass:"text-xl font-semibold mb-2"},[t._v(t._s(t.$strings.HeaderAudiobookTools))]),t._v(" "),t.showM4bDownload?e("div",{staticClass:"w-full border border-black-200 p-4 my-8"},[e("div",{staticClass:"flex flex-wrap items-center"},[e("div",[e("p",{staticClass:"text-lg"},[t._v(t._s(t.$strings.LabelToolsMakeM4b))]),t._v(" "),e("p",{staticClass:"max-w-sm text-sm pt-2 text-gray-300"},[t._v(t._s(t.$strings.LabelToolsMakeM4bDescription))])]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),e("div",[e("ui-btn",{staticClass:"flex items-center",attrs:{to:"/audiobook/".concat(t.libraryItemId,"/manage?tool=m4b")}},[t._v(t._s(t.$strings.ButtonOpenManager)+"\n          "),e("span",{staticClass:"material-symbols text-lg ml-2"},[t._v("launch")])])],1)])]):t._e(),t._v(" "),t.mediaTracks.length?e("div",{staticClass:"w-full border border-black-200 p-4 my-8"},[e("div",{staticClass:"flex items-center"},[e("div",[e("p",{staticClass:"text-lg"},[t._v(t._s(t.$strings.LabelToolsEmbedMetadata))]),t._v(" "),e("p",{staticClass:"max-w-sm text-sm pt-2 text-gray-300"},[t._v(t._s(t.$strings.LabelToolsEmbedMetadataDescription))])]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),e("div",[e("ui-btn",{staticClass:"flex items-center",attrs:{to:"/audiobook/".concat(t.libraryItemId,"/manage?tool=embed")}},[t._v(t._s(t.$strings.ButtonOpenManager)+"\n          "),e("span",{staticClass:"material-symbols text-lg ml-2"},[t._v("launch")])]),t._v(" "),t.isMetadataEmbedQueued||t.isEmbedTaskRunning?t._e():e("ui-btn",{staticClass:"w-full mt-4",attrs:{small:""},on:{click:function(e){return e.stopPropagation(),t.quickEmbed.apply(null,arguments)}}},[t._v(t._s(t.$strings.ButtonQuickEmbed))])],1)]),t._v(" "),t.isMetadataEmbedQueued?e("widgets-alert",{staticClass:"mt-4",attrs:{type:"warning"}},[e("p",{staticClass:"text-lg"},[t._v(t._s(t.$getString("MessageQuickEmbedQueue",[t.queuedEmbedLIds.length])))])]):t._e(),t._v(" "),t.isEmbedTaskRunning?e("widgets-alert",{staticClass:"mt-4",attrs:{type:"warning"}},[e("p",{staticClass:"text-lg"},[t._v(t._s(t.$strings.MessageQuickEmbedInProgress))])]):t._e()],1):t._e(),t._v(" "),t.mediaTracks.length?t._e():e("p",{staticClass:"text-lg text-center my-8"},[t._v(t._s(t.$strings.MessageNoAudioTracks))])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiBtn:n(42).default,WidgetsAlert:n(657).default})},657:function(t,e,n){"use strict";n.r(e);var r={props:{type:{type:String,default:"error"}},data:function(){return{}},computed:{icon:function(){return"error"===this.type||"warning"===this.type?"report":"info"},wrapperClass:function(){switch(this.type){case"error":return"bg-error/5 border-error/60 text-error";case"warning":return"bg-warning/5 border-warning/60 text-warning";case"success":return"bg-success/5 border-success/60 text-success";case"info":return"bg-info/5 border-info/60 text-info";default:return"bg-primary/5 border-primary/60 text-primary"}}},methods:{},mounted:function(){}},o=n(4),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full border rounded-lg flex items-center relative py-4 pl-16",class:t.wrapperClass},[e("div",{staticClass:"absolute top-0 left-4 h-full flex items-center"},[e("span",{staticClass:"material-symbols text-2xl"},[t._v(t._s(t.icon))])]),t._v(" "),t._t("default")],2)}),[],!1,null,null,null);e.default=component.exports}}]);