(window.webpackJsonp=window.webpackJsonp||[]).push([[192,57,134,159],{1076:function(t,e,o){"use strict";o.r(e);var r=o(7),n=(o(26),o(8),o(29),{asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var o,r,n,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.params,r=t.redirect,n=t.store,d=o.library,e.next=4,n.dispatch("libraries/fetch",d);case 4:if(l=e.sent){e.next=7;break}return e.abrupt("return",r("/oops?message=Library not found"));case 7:if("book"!==l.library.mediaType){e.next=10;break}return e.abrupt("return",r("/library/".concat(d)));case 10:return e.abrupt("return",{libraryId:o.library});case 11:case"end":return e.stop()}}),e)})))()},data:function(){return{episodesDownloading:[],episodeDownloadsQueued:[],processing:!1}},computed:{bookCoverAspectRatio:function(){return this.$store.getters["libraries/getBookCoverAspectRatio"]},streamLibraryItem:function(){return this.$store.state.streamLibraryItem}},methods:{episodeDownloadQueued:function(t){t.libraryId===this.libraryId&&this.episodeDownloadsQueued.push(t)},episodeDownloadStarted:function(t){t.libraryId===this.libraryId&&(this.episodeDownloadsQueued=this.episodeDownloadsQueued.filter((function(e){return e.id!==t.id})),this.episodesDownloading.push(t))},episodeDownloadFinished:function(t){t.libraryId===this.libraryId&&(this.episodeDownloadsQueued=this.episodeDownloadsQueued.filter((function(e){return e.id!==t.id})),this.episodesDownloading=this.episodesDownloading.filter((function(e){return e.id!==t.id})))},loadInitialDownloadQueue:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.processing=!0,e.next=3,t.$axios.$get("/api/libraries/".concat(t.libraryId,"/episode-downloads")).catch((function(e){return console.error("Failed to get download queue",e),t.$toast.error(t.$strings.ToastFailedToLoadData),null}));case 3:o=e.sent,t.processing=!1,t.episodeDownloadsQueued=(null==o?void 0:o.queue)||[],null!=o&&o.currentDownload&&t.episodesDownloading.push(o.currentDownload),t.initListeners();case 8:case"end":return e.stop()}}),e)})))()},initListeners:function(){this.$root.socket.on("episode_download_queued",this.episodeDownloadQueued),this.$root.socket.on("episode_download_started",this.episodeDownloadStarted),this.$root.socket.on("episode_download_finished",this.episodeDownloadFinished)}},mounted:function(){this.loadInitialDownloadQueue()},beforeDestroy:function(){this.$root.socket.off("episode_download_queued",this.episodeDownloadQueued),this.$root.socket.off("episode_download_started",this.episodeDownloadStarted),this.$root.socket.off("episode_download_finished",this.episodeDownloadFinished)}}),d=o(4),component=Object(d.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"page",class:t.streamLibraryItem?"streaming":""},[e("app-book-shelf-toolbar",{attrs:{page:"podcast-search"}}),t._v(" "),e("div",{staticClass:"w-full overflow-y-auto px-2 py-6 sm:px-4 md:p-12 relative",attrs:{id:"bookshelf"}},[e("div",{staticClass:"w-full max-w-5xl mx-auto py-4"},[e("p",{staticClass:"text-xl mb-2 font-semibold px-4 md:px-0"},[t._v(t._s(t.$strings.HeaderCurrentDownloads))]),t._v(" "),t.episodesDownloading.length?t._e():e("p",{staticClass:"text-lg py-4"},[t._v(t._s(t.$strings.MessageNoDownloadsInProgress))]),t._v(" "),t._l(t.episodesDownloading,(function(o){return[e("div",{key:o.id,staticClass:"flex py-5 relative"},[e("covers-preview-cover",{staticClass:"hidden md:block",attrs:{src:t.$store.getters["globals/getLibraryItemCoverSrcById"](o.libraryItemId),width:96,"book-cover-aspect-ratio":t.bookCoverAspectRatio,"show-resolution":!1}}),t._v(" "),e("div",{staticClass:"grow pl-4 max-w-2xl"},[e("div",{staticClass:"flex md:hidden mb-2"},[e("covers-preview-cover",{staticClass:"md:hidden",attrs:{src:t.$store.getters["globals/getLibraryItemCoverSrcById"](o.libraryItemId),width:48,"book-cover-aspect-ratio":t.bookCoverAspectRatio,"show-resolution":!1}}),t._v(" "),e("div",{staticClass:"grow px-2"},[e("div",{staticClass:"flex items-center"},[e("nuxt-link",{staticClass:"text-sm text-gray-200 hover:underline",attrs:{to:"/item/".concat(o.libraryItemId)}},[t._v(t._s(o.podcastTitle))]),t._v(" "),o.podcastExplicit?e("widgets-explicit-indicator"):t._e()],1),t._v(" "),e("p",{staticClass:"text-xs text-gray-300 mb-1"},[t._v(t._s(t.$dateDistanceFromNow(o.publishedAt)))])])],1),t._v(" "),e("div",{staticClass:"hidden md:block"},[e("div",{staticClass:"flex items-center"},[e("nuxt-link",{staticClass:"text-sm text-gray-200 hover:underline",attrs:{to:"/item/".concat(o.libraryItemId)}},[t._v(t._s(o.podcastTitle))]),t._v(" "),o.podcastExplicit?e("widgets-explicit-indicator"):t._e()],1),t._v(" "),e("p",{staticClass:"text-xs text-gray-300 mb-1"},[t._v(t._s(t.$dateDistanceFromNow(o.publishedAt)))])]),t._v(" "),e("div",{staticClass:"flex items-center font-semibold text-gray-200"},[o.season||o.episode?e("div",[t._v("#")]):t._e(),t._v(" "),o.season?e("div",[t._v(t._s(o.season)+"x")]):t._e(),t._v(" "),o.episode?e("div",[t._v(t._s(o.episode))]):t._e()]),t._v(" "),e("div",{staticClass:"flex items-center mb-2"},[e("span",{staticClass:"font-semibold text-sm md:text-base"},[t._v(t._s(o.episodeDisplayTitle))]),t._v(" "),e("widgets-podcast-type-indicator",{attrs:{type:o.episodeType}})],1),t._v(" "),e("p",{staticClass:"text-sm text-gray-200 mb-4"},[t._v(t._s(o.subtitle))])])],1)]})),t._v(" "),t.episodeDownloadsQueued.length?e("tables-podcast-download-queue-table",{attrs:{queue:t.episodeDownloadsQueued}}):t._e()],2)])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AppBookShelfToolbar:o(689).default,CoversPreviewCover:o(356).default,WidgetsExplicitIndicator:o(354).default,WidgetsPodcastTypeIndicator:o(677).default,TablesPodcastDownloadQueueTable:o(874).default})},642:function(t,e,o){"use strict";o.d(e,"a",(function(){return l}));var r=o(183);var n=o(237),d=o(149);function l(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||Object(n.a)(t)||Object(d.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},677:function(t,e,o){"use strict";o.r(e);var r={props:{type:{type:String,default:"full"}},data:function(){return{}},computed:{},methods:{},mounted:function(){}},n=o(4),component=Object(n.a)(r,(function(){var t=this,e=t._self._c;return e("div",["bonus"==t.type?[e("ui-tooltip",{attrs:{text:"Bonus",direction:"top"}},[e("span",{staticClass:"material-symbols ml-1",staticStyle:{"font-size":"0.8rem"}},[t._v("local_play")])])]:t._e(),t._v(" "),"trailer"==t.type?[e("ui-tooltip",{attrs:{text:"Trailer",direction:"top"}},[e("span",{staticClass:"material-symbols ml-1",staticStyle:{"font-size":"0.8rem"}},[t._v("local_movies")])])]:t._e()],2)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiTooltip:o(76).default})},874:function(t,e,o){"use strict";o.r(e);var r={props:{queue:{type:Array,default:function(){return[]}},libraryItemId:String},data:function(){return{}},computed:{},methods:{},mounted:function(){}},n=o(4),component=Object(n.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full my-2"},[e("div",{staticClass:"w-full bg-primary px-4 md:px-6 py-2 flex items-center"},[e("p",{staticClass:"pr-2 md:pr-4"},[t._v(t._s(t.$strings.HeaderDownloadQueue))]),t._v(" "),e("div",{staticClass:"h-5 md:h-7 w-5 md:w-7 rounded-full bg-white/10 flex items-center justify-center"},[e("span",{staticClass:"text-sm font-mono"},[t._v(t._s(t.queue.length))])])]),t._v(" "),e("transition",{attrs:{name:"slide"}},[e("div",{staticClass:"w-full"},[e("table",{staticClass:"text-sm tracksTable"},[e("tr",[e("th",{staticClass:"text-left px-4 min-w-48"},[t._v(t._s(t.$strings.LabelPodcast))]),t._v(" "),e("th",{staticClass:"text-left w-32 min-w-32"},[t._v(t._s(t.$strings.LabelEpisode))]),t._v(" "),e("th",{staticClass:"text-left px-4"},[t._v(t._s(t.$strings.LabelEpisodeTitle))]),t._v(" "),e("th",{staticClass:"text-left px-4 w-48"},[t._v(t._s(t.$strings.LabelPubDate))])]),t._v(" "),t._l(t.queue,(function(o){return[e("tr",{key:o.id},[e("td",{staticClass:"px-4"},[e("div",{staticClass:"flex items-center"},[e("nuxt-link",{staticClass:"text-sm text-gray-200 hover:underline",attrs:{to:"/item/".concat(o.libraryItemId)}},[t._v(t._s(o.podcastTitle))]),t._v(" "),o.podcastExplicit?e("widgets-explicit-indicator"):t._e()],1)]),t._v(" "),e("td",[e("div",{staticClass:"flex items-center"},[o.season?e("div",[t._v(t._s(o.season)+"x")]):t._e(),t._v(" "),o.episode?e("div",[t._v(t._s(o.episode))]):t._e(),t._v(" "),e("widgets-podcast-type-indicator",{attrs:{type:o.episodeType}})],1)]),t._v(" "),e("td",{staticClass:"px-4",attrs:{dir:"auto"}},[t._v("\n              "+t._s(o.episodeDisplayTitle)+"\n            ")]),t._v(" "),e("td",{staticClass:"text-xs"},[e("div",{staticClass:"flex items-center"},[e("p",[t._v(t._s(t.$dateDistanceFromNow(o.publishedAt)))])])])])]}))],2)])])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{WidgetsExplicitIndicator:o(354).default,WidgetsPodcastTypeIndicator:o(677).default})}}]);