(window.webpackJsonp=window.webpackJsonp||[]).push([[194,101,102,140,150],{1078:function(t,e,r){"use strict";r.r(e);r(56);var o=r(7);r(22),r(43),r(84),r(26),r(33),r(83),r(41),r(27),r(57),r(15),r(8),r(35),r(59),r(52),r(62),r(77),r(58),r(350),r(29);function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,a){if(t){if("string"==typeof t)return l(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function l(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}var c={asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r,o,n,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.params,t.query,o=t.store,t.app,n=t.redirect,o.getters["user/getIsAdminOrUp"]){e.next=3;break}return e.abrupt("return",n("/library/".concat(r.library)));case 3:return l=r.library,e.next=6,o.dispatch("libraries/fetch",l);case 6:if(c=e.sent){e.next=9;break}return e.abrupt("return",n("/oops?message=Library not found"));case 9:if("book"!==c.library.mediaType){e.next=12;break}return e.abrupt("return",n("/library/".concat(l)));case 12:return e.abrupt("return",{libraryId:l});case 13:case"end":return e.stop()}}),e)})))()},data:function(){return{searchInput:"",results:[],termSearched:"",processing:!1,showNewPodcastModal:!1,selectedPodcast:null,selectedPodcastFeed:null,showOPMLFeedsModal:!1,opmlFeeds:[],existentPodcasts:[]}},computed:{currentLibraryId:function(){return this.$store.state.libraries.currentLibraryId},streamLibraryItem:function(){return this.$store.state.streamLibraryItem},librarySettings:function(){return this.$store.getters["libraries/getCurrentLibrarySettings"]}},methods:{opmlFileUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.processing=!0,r.next=3,new Promise((function(e){var r=new FileReader;r.onload=function(){e(r.result)},r.readAsText(t)}));case 3:if(o=r.sent,e.$refs.fileInput&&e.$refs.fileInput.reset(),o&&o.includes("<opml")&&o.includes("<outline ")){r.next=9;break}return e.$toast.error(e.$strings.MessageTaskOpmlParseFastFail),e.processing=!1,r.abrupt("return");case 9:e.$axios.$post("/api/podcasts/opml/parse",{opmlText:o}).then((function(data){var t;null!==(t=data.feeds)&&void 0!==t&&t.length?(e.opmlFeeds=data.feeds||[],e.showOPMLFeedsModal=!0):e.$toast.error(e.$strings.MessageTaskOpmlParseNoneFound)})).catch((function(t){console.error("Failed",t),e.$toast.error(e.$strings.MessageTaskOpmlParseFailed)})).finally((function(){e.processing=!1}));case 10:case"end":return r.stop()}}),r)})))()},submit:function(){this.searchInput&&(this.searchInput.startsWith("http:")||this.searchInput.startsWith("https:")?(this.termSearched="",this.results=[],this.checkRSSFeed(this.searchInput)):this.submitSearch(this.searchInput))},checkRSSFeed:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.processing=!0,r.next=3,e.$axios.$post("/api/podcasts/feed",{rssFeed:t}).catch((function(t){return console.error("Failed to get feed",t),e.$toast.error(e.$strings.ToastPodcastGetFeedFailed),null}));case 3:if(o=r.sent,e.processing=!1,o){r.next=7;break}return r.abrupt("return");case 7:e.selectedPodcastFeed=o.podcast,e.selectedPodcast=null,e.showNewPodcastModal=!0;case 10:case"end":return r.stop()}}),r)})))()},submitSearch:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,l,c,d,f,h;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.processing=!0,e.termSearched="",l=new URLSearchParams({term:t,country:(null===(o=e.librarySettings)||void 0===o?void 0:o.podcastSearchRegion)||"us"}),r.next=5,e.$axios.$get("/api/search/podcast?".concat(l.toString())).catch((function(t){return console.error("Search request failed",t),[]}));case 5:c=r.sent,console.log("Got results",c),c=c.filter((function(t){return t.feedUrl})),d=n(c),r.prev=9,h=regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=f.value,(o=e.existentPodcasts.find((function(p){return p.itunesId===r.id||p.title===r.title.toLowerCase()})))&&(r.alreadyInLibrary=!0,r.existentId=o.id);case 3:case"end":return t.stop()}}),t)})),d.s();case 12:if((f=d.n()).done){r.next=16;break}return r.delegateYield(h(),"t0",14);case 14:r.next=12;break;case 16:r.next=21;break;case 18:r.prev=18,r.t1=r.catch(9),d.e(r.t1);case 21:return r.prev=21,d.f(),r.finish(21);case 24:e.results=c,e.termSearched=t,e.processing=!1;case 27:case"end":return r.stop()}}),r,null,[[9,18,21,24]])})))()},selectPodcast:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log("Selected podcast",t),!t.existentId){r.next=4;break}return e.$router.push("/item/".concat(t.existentId)),r.abrupt("return");case 4:if(t.feedUrl){r.next=7;break}return e.$toast.error(e.$strings.MessageNoPodcastFeed),r.abrupt("return");case 7:return e.processing=!0,r.next=10,e.$axios.$post("/api/podcasts/feed",{rssFeed:t.feedUrl}).catch((function(t){return console.error("Failed to get feed",t),e.$toast.error(e.$strings.ToastPodcastGetFeedFailed),null}));case 10:if(o=r.sent,e.processing=!1,o){r.next=14;break}return r.abrupt("return");case 14:e.selectedPodcastFeed=o.podcast,e.selectedPodcast=t,e.showNewPodcastModal=!0,console.log("Got podcast feed",o.podcast);case 18:case"end":return r.stop()}}),r)})))()},fetchExistentPodcastsInYourLibrary:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.processing=!0,e.next=3,t.$axios.$get("/api/libraries/".concat(t.currentLibraryId,"/podcast-titles")).catch((function(t){return console.error("Failed to fetch podcasts",t),[]}));case 3:r=e.sent,t.existentPodcasts=r.podcasts.map((function(p){return{title:p.title.toLowerCase(),itunesId:p.itunesId,id:p.libraryItemId}})),t.processing=!1;case 6:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.fetchExistentPodcastsInYourLibrary()}},d=r(4),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"page",class:t.streamLibraryItem?"streaming":""},[e("app-book-shelf-toolbar",{attrs:{page:"podcast-search"}}),t._v(" "),e("div",{staticClass:"w-full overflow-y-auto px-2 py-6 sm:px-4 md:p-12 relative",attrs:{id:"bookshelf"}},[e("div",{staticClass:"w-full max-w-4xl mx-auto flex"},[e("form",{staticClass:"flex grow",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("ui-text-input",{staticClass:"grow mr-2 text-sm md:text-base",attrs:{type:"search",disabled:t.processing,placeholder:t.$strings.MessagePodcastSearchField},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}}),t._v(" "),e("ui-btn",{staticClass:"hidden md:block",attrs:{type:"submit",disabled:t.processing}},[t._v(t._s(t.$strings.ButtonSubmit))]),t._v(" "),e("ui-btn",{staticClass:"block md:hidden",attrs:{type:"submit",disabled:t.processing,small:""}},[t._v(t._s(t.$strings.ButtonSubmit))])],1),t._v(" "),e("ui-file-input",{ref:"fileInput",staticClass:"ml-2",attrs:{accept:".opml, .txt"},on:{change:t.opmlFileUpload}},[t._v(t._s(t.$strings.ButtonUploadOPMLFile))])],1),t._v(" "),e("div",{staticClass:"w-full max-w-3xl mx-auto py-4"},[!t.termSearched||t.results.length||t.processing?t._e():e("p",{staticClass:"text-center text-xl"},[t._v(t._s(t.$strings.MessageNoPodcastsFound))]),t._v(" "),t._l(t.results,(function(r){return[e("div",{key:r.id,staticClass:"flex p-1 hover:bg-primary/25 cursor-pointer",on:{click:function(e){return t.selectPodcast(r)}}},[e("div",{staticClass:"w-20 min-w-20 h-20 md:w-24 md:min-w-24 md:h-24 bg-primary"},[r.cover?e("img",{staticClass:"h-full w-full",attrs:{src:r.cover}}):t._e()]),t._v(" "),e("div",{staticClass:"grow pl-4 max-w-2xl"},[e("div",{staticClass:"flex items-center"},[e("a",{staticClass:"text-base md:text-lg text-gray-200 hover:underline",attrs:{href:r.pageUrl,target:"_blank"},on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(r.title))]),t._v(" "),r.explicit?e("widgets-explicit-indicator"):t._e(),t._v(" "),r.alreadyInLibrary?e("widgets-already-in-library-indicator"):t._e()],1),t._v(" "),e("p",{staticClass:"text-sm md:text-base text-gray-300 whitespace-nowrap truncate"},[t._v(t._s(t.$getString("LabelByAuthor",[r.artistName])))]),t._v(" "),e("p",{staticClass:"text-xs text-gray-400 leading-5"},[t._v(t._s(r.genres.join(", ")))]),t._v(" "),e("p",{staticClass:"text-xs text-gray-400 leading-5"},[t._v(t._s(r.trackCount)+" "+t._s(t.$strings.HeaderEpisodes))])])])]}))],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.processing,expression:"processing"}],staticClass:"absolute top-0 left-0 w-full h-full flex items-center justify-center bg-black/25 z-40"},[e("ui-loading-indicator")],1)]),t._v(" "),e("modals-podcast-new-modal",{attrs:{"podcast-data":t.selectedPodcast,"podcast-feed-data":t.selectedPodcastFeed},model:{value:t.showNewPodcastModal,callback:function(e){t.showNewPodcastModal=e},expression:"showNewPodcastModal"}}),t._v(" "),e("modals-podcast-opml-feeds-modal",{attrs:{feeds:t.opmlFeeds},model:{value:t.showOPMLFeedsModal,callback:function(e){t.showOPMLFeedsModal=e},expression:"showOPMLFeedsModal"}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AppBookShelfToolbar:r(689).default,UiTextInput:r(68).default,UiBtn:r(42).default,UiFileInput:r(685).default,WidgetsExplicitIndicator:r(354).default,WidgetsAlreadyInLibraryIndicator:r(875).default,UiLoadingIndicator:r(348).default,ModalsPodcastNewModal:r(876).default,ModalsPodcastOpmlFeedsModal:r(877).default})},685:function(t,e,r){"use strict";r.r(e);r(83),r(62);var o={props:{accept:{type:String,default:".png, .jpg, .jpeg, .webp"}},data:function(){return{}},computed:{},methods:{reset:function(){this.$refs.fileInput&&(this.$refs.fileInput.value="")},clickUpload:function(){this.$refs.fileInput&&this.$refs.fileInput.click()},inputChanged:function(t){if(t.target&&t.target.files){var e=Array.from(t.target.files);if(e&&e.length){var r=e[0];this.$emit("change",r)}}}},mounted:function(){}},n=r(4),component=Object(n.a)(o,(function(){var t=this,e=t._self._c;return e("div",[e("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file",accept:t.accept},on:{change:t.inputChanged}}),t._v(" "),e("ui-btn",{staticClass:"hidden md:block w-full",attrs:{color:"bg-primary",type:"text"},on:{click:t.clickUpload}},[t._t("default")],2),t._v(" "),e("ui-icon-btn",{staticClass:"block md:hidden",attrs:{icon:"upload"},on:{click:t.clickUpload}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiBtn:r(42).default,UiIconBtn:r(148).default})},723:function(t,e,r){var content=r(780);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("e6ee2626",content,!0,{sourceMap:!1})},779:function(t,e,r){"use strict";r(723)},780:function(t,e,r){var o=r(18)((function(i){return i[1]}));o.push([t.i,"\n#podcast-wrapper[data-v-5dc14042] {\n  min-height: 400px;\n  max-height: 80vh;\n}\n#episodes-scroll[data-v-5dc14042] {\n  max-height: calc(80vh - 200px);\n}\n",""]),o.locals={},t.exports=o},875:function(t,e,r){"use strict";r.r(e);var o={data:function(){return{}},computed:{},methods:{},mounted:function(){}},n=r(4),component=Object(n.a)(o,(function(){var t=this,e=t._self._c;return e("ui-tooltip",{staticClass:"inline-flex",attrs:{text:t.$strings.LabelAlreadyInYourLibrary,direction:"top"}},[e("span",{staticClass:"material-symbols ml-1 text-sm text-success"},[t._v("check_circle")])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiTooltip:r(76).default})},876:function(t,e,r){"use strict";r.r(e);r(22),r(43),r(17);var o=r(642),n=(r(33),r(56),r(27),r(8),r(188)),l=r.n(n),c={props:{value:Boolean,podcastData:{type:Object,default:function(){return null}},podcastFeedData:{type:Object,default:function(){return null}}},data:function(){return{processing:!1,selectedFolderId:null,fullPath:null,podcast:{title:"",author:"",description:"",releaseDate:"",genres:[],feedUrl:"",feedImageUrl:"",itunesPageUrl:"",itunesId:"",itunesArtistId:"",autoDownloadEpisodes:!1,language:"",explicit:!1,type:""}}},watch:{show:{immediate:!0,handler:function(t){t&&this.init()}}},computed:{show:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},title:function(){return this._podcastData.title},currentLibrary:function(){return this.$store.getters["libraries/getCurrentLibrary"]},folders:function(){return this.currentLibrary&&this.currentLibrary.folders||[]},folderItems:function(){return this.folders.map((function(t){return{value:t.id,text:t.fullPath}}))},_podcastData:function(){return this.podcastData||{}},feedMetadata:function(){return this.podcastFeedData&&this.podcastFeedData.metadata||{}},episodes:function(){return this.podcastFeedData&&this.podcastFeedData.episodes||[]},selectedFolder:function(){var t=this;return this.folders.find((function(e){return e.id===t.selectedFolderId}))},selectedFolderPath:function(){return this.selectedFolder?this.selectedFolder.fullPath:""},podcastTypes:function(){var t=this;return this.$store.state.globals.podcastTypes.map((function(e){return{text:t.$strings[e.descriptionKey]||e.text,value:e.value}}))}},methods:{titleUpdated:function(){this.folderUpdated()},folderUpdated:function(){this.selectedFolderPath&&this.podcast.title?this.fullPath=l.a.join(this.selectedFolderPath,this.$sanitizeFilename(this.podcast.title)):this.fullPath=""},submit:function(){var t=this,e={path:this.fullPath,folderId:this.selectedFolderId,libraryId:this.currentLibrary.id,media:{metadata:{title:this.podcast.title,author:this.podcast.author,description:this.podcast.description,releaseDate:this.podcast.releaseDate,genres:Object(o.a)(this.podcast.genres),feedUrl:this.podcast.feedUrl,imageUrl:this.podcast.imageUrl,itunesPageUrl:this.podcast.itunesPageUrl,itunesId:this.podcast.itunesId,itunesArtistId:this.podcast.itunesArtistId,language:this.podcast.language,explicit:this.podcast.explicit,type:this.podcast.type},autoDownloadEpisodes:this.podcast.autoDownloadEpisodes}};console.log("Podcast payload",e),this.processing=!0,this.$axios.$post("/api/podcasts",e).then((function(e){t.processing=!1,t.$toast.success(t.$strings.ToastPodcastCreateSuccess),t.show=!1,t.$router.push("/item/".concat(e.id))})).catch((function(e){var r=e.response&&e.response.data?e.response.data:t.$strings.ToastPodcastCreateFailed;console.error("Failed to create podcast",e),t.processing=!1,t.$toast.error(r)}))},init:function(){this.podcast.title=this._podcastData.title||this.feedMetadata.title||"",this.podcast.author=this._podcastData.artistName||this.feedMetadata.author||"",this.podcast.description=this._podcastData.description||this.feedMetadata.descriptionPlain||"",this.podcast.releaseDate=this._podcastData.releaseDate||"",this.podcast.genres=this._podcastData.genres||this.feedMetadata.categories||[],this.podcast.feedUrl=this._podcastData.feedUrl||this.feedMetadata.feedUrl||"",this.podcast.imageUrl=this._podcastData.cover||this.feedMetadata.image||"",this.podcast.itunesPageUrl=this._podcastData.pageUrl||"",this.podcast.itunesId=this._podcastData.id||"",this.podcast.itunesArtistId=this._podcastData.artistId||"",this.podcast.language=this._podcastData.language||this.feedMetadata.language||"",this.podcast.autoDownloadEpisodes=!1,this.podcast.type=this._podcastData.type||this.feedMetadata.type||"episodic",this.podcast.explicit=this._podcastData.explicit||"yes"===this.feedMetadata.explicit||"true"==this.feedMetadata.explicit,this.folderItems[0]&&(this.selectedFolderId=this.folderItems[0].value,this.folderUpdated())}},mounted:function(){}},d=(r(779),r(4)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("modals-modal",{attrs:{name:"new-podcast-modal",width:1e3,height:"unset",processing:t.processing},scopedSlots:t._u([{key:"outer",fn:function(){return[e("div",{staticClass:"absolute top-0 left-0 p-5 w-3/4 overflow-hidden"},[e("p",{staticClass:"text-xl md:text-3xl text-white truncate"},[t._v(t._s(t.title))])])]},proxy:!0}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._v(" "),e("div",{ref:"wrapper",staticClass:"p-2 md:p-8 w-full text-sm py-2 rounded-lg bg-bg shadow-lg border border-black-300 relative overflow-x-hidden overflow-y-auto",staticStyle:{"max-height":"80vh"},attrs:{id:"podcast-wrapper"}},[e("div",{staticClass:"w-full"},[e("p",{staticClass:"text-lg font-semibold mb-2 px-2"},[t._v(t._s(t.$strings.HeaderDetails))]),t._v(" "),t.podcast.imageUrl?e("div",{staticClass:"p-2 w-full"},[e("img",{staticClass:"h-16 w-16 object-contain",attrs:{src:t.podcast.imageUrl}})]):t._e(),t._v(" "),e("div",{staticClass:"flex flex-wrap"},[e("div",{staticClass:"w-full md:w-1/2 p-2"},[e("ui-text-input-with-label",{attrs:{label:t.$strings.LabelTitle},on:{input:t.titleUpdated},model:{value:t.podcast.title,callback:function(e){t.$set(t.podcast,"title",e)},expression:"podcast.title"}})],1),t._v(" "),e("div",{staticClass:"w-full md:w-1/2 p-2"},[e("ui-text-input-with-label",{attrs:{label:t.$strings.LabelAuthor},model:{value:t.podcast.author,callback:function(e){t.$set(t.podcast,"author",e)},expression:"podcast.author"}})],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap"},[e("div",{staticClass:"w-full md:w-1/2 p-2"},[e("ui-text-input-with-label",{attrs:{label:t.$strings.LabelFeedURL,readonly:""},model:{value:t.podcast.feedUrl,callback:function(e){t.$set(t.podcast,"feedUrl",e)},expression:"podcast.feedUrl"}})],1),t._v(" "),e("div",{staticClass:"w-full md:w-1/2 p-2"},[e("ui-multi-select",{attrs:{items:t.podcast.genres,label:t.$strings.LabelGenres},model:{value:t.podcast.genres,callback:function(e){t.$set(t.podcast,"genres",e)},expression:"podcast.genres"}})],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap"},[e("div",{staticClass:"md:w-1/4 p-2"},[e("ui-dropdown",{attrs:{label:t.$strings.LabelPodcastType,items:t.podcastTypes,small:""},model:{value:t.podcast.type,callback:function(e){t.$set(t.podcast,"type",e)},expression:"podcast.type"}})],1),t._v(" "),e("div",{staticClass:"md:w-1/4 p-2"},[e("ui-text-input-with-label",{attrs:{label:t.$strings.LabelLanguage},model:{value:t.podcast.language,callback:function(e){t.$set(t.podcast,"language",e)},expression:"podcast.language"}})],1),t._v(" "),e("div",{staticClass:"md:w-1/4 px-2 pt-7"},[e("ui-checkbox",{attrs:{label:t.$strings.LabelExplicit,"checkbox-bg":"primary","border-color":"gray-600","label-class":"pl-2 text-base font-semibold"},model:{value:t.podcast.explicit,callback:function(e){t.$set(t.podcast,"explicit",e)},expression:"podcast.explicit"}})],1)]),t._v(" "),e("div",{staticClass:"p-2 w-full"},[e("ui-textarea-with-label",{attrs:{label:t.$strings.LabelDescription,rows:3},model:{value:t.podcast.description,callback:function(e){t.$set(t.podcast,"description",e)},expression:"podcast.description"}})],1),t._v(" "),e("div",{staticClass:"flex flex-wrap"},[e("div",{staticClass:"w-full md:w-1/2 p-2"},[e("ui-dropdown",{attrs:{items:t.folderItems,disabled:t.processing,label:t.$strings.LabelFolder},on:{input:t.folderUpdated},model:{value:t.selectedFolderId,callback:function(e){t.selectedFolderId=e},expression:"selectedFolderId"}})],1),t._v(" "),e("div",{staticClass:"w-full md:w-1/2 p-2"},[e("ui-text-input-with-label",{attrs:{label:"".concat(t.$strings.LabelPodcast," ").concat(t.$strings.LabelPath),"input-class":"h-10",readonly:""},model:{value:t.fullPath,callback:function(e){t.fullPath=e},expression:"fullPath"}})],1)])]),t._v(" "),e("div",{staticClass:"flex items-center py-4 px-2"},[e("div",{staticClass:"grow"}),t._v(" "),e("div",{staticClass:"px-4"},[e("ui-checkbox",{attrs:{label:t.$strings.LabelAutoDownloadEpisodes,"checkbox-bg":"primary","border-color":"gray-600","label-class":"pl-2 text-sm md:text-base font-semibold"},model:{value:t.podcast.autoDownloadEpisodes,callback:function(e){t.$set(t.podcast,"autoDownloadEpisodes",e)},expression:"podcast.autoDownloadEpisodes"}})],1),t._v(" "),e("ui-btn",{attrs:{color:"bg-success"},on:{click:t.submit}},[t._v(t._s(t.$strings.ButtonSubmit))])],1)])])}),[],!1,null,"5dc14042",null);e.default=component.exports;installComponents(component,{UiTextInputWithLabel:r(121).default,UiMultiSelect:r(675).default,UiDropdown:r(236).default,UiCheckbox:r(184).default,UiTextareaWithLabel:r(186).default,UiBtn:r(42).default,ModalsModal:r(39).default})},877:function(t,e,r){"use strict";r.r(e);var o=r(7),n=(r(29),r(33),r(27),r(8),{props:{value:Boolean,feeds:{type:Array,default:function(){return[]}}},data:function(){return{processing:!1,selectedFolderId:null,autoDownloadEpisodes:!1}},watch:{show:{immediate:!0,handler:function(t){t&&this.init()}}},computed:{show:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},title:function(){return"OPML Feeds"},currentLibrary:function(){return this.$store.getters["libraries/getCurrentLibrary"]},folders:function(){return this.currentLibrary&&this.currentLibrary.folders||[]},folderItems:function(){return this.folders.map((function(t){return{value:t.id,text:t.fullPath}}))},selectedFolder:function(){var t=this;return this.folders.find((function(e){return e.id===t.selectedFolderId}))},selectedFolderPath:function(){return this.selectedFolder?this.selectedFolder.fullPath:""}},methods:{init:function(){this.folderItems[0]&&(this.selectedFolderId=this.folderItems[0].value)},submit:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.processing=!0,r={feeds:t.feeds.map((function(t){return t.feedUrl})),folderId:t.selectedFolderId,libraryId:t.currentLibrary.id,autoDownloadEpisodes:t.autoDownloadEpisodes},t.$axios.$post("/api/podcasts/opml/create",r).then((function(){t.show=!1})).catch((function(e){var o,n=(null===(o=e.response)||void 0===o?void 0:o.data)||t.$strings.ToastPodcastCreateFailed;console.error("Failed to create podcast",r,e),t.$toast.error(n)})).finally((function(){t.processing=!1}));case 3:case"end":return e.stop()}}),e)})))()}},mounted:function(){}}),l=r(4),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("modals-modal",{attrs:{name:"opml-feeds-modal",width:1e3,height:"unset",processing:t.processing},scopedSlots:t._u([{key:"outer",fn:function(){return[e("div",{staticClass:"absolute top-0 left-0 p-5 w-2/3 overflow-hidden"},[e("p",{staticClass:"text-3xl text-white truncate"},[t._v(t._s(t.title))])])]},proxy:!0}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._v(" "),e("div",{ref:"wrapper",staticClass:"p-4 w-full text-sm py-2 rounded-lg bg-bg shadow-lg border border-black-300 relative overflow-hidden"},[e("div",{staticClass:"w-full p-4"},[e("div",{staticClass:"flex items-center -mx-2 mb-2"},[e("div",{staticClass:"w-full md:w-2/3 p-2"},[e("ui-dropdown",{attrs:{items:t.folderItems,disabled:t.processing,label:t.$strings.LabelFolder},model:{value:t.selectedFolderId,callback:function(e){t.selectedFolderId=e},expression:"selectedFolderId"}})],1),t._v(" "),e("div",{staticClass:"w-full md:w-1/3 p-2 pt-6"},[e("ui-checkbox",{attrs:{label:t.$strings.LabelAutoDownloadEpisodes,"checkbox-bg":"primary","border-color":"gray-600","label-class":"text-sm font-semibold pl-2"},model:{value:t.autoDownloadEpisodes,callback:function(e){t.autoDownloadEpisodes=e},expression:"autoDownloadEpisodes"}})],1)]),t._v(" "),e("p",{staticClass:"text-lg font-semibold mb-1"},[t._v(t._s(t.$strings.HeaderPodcastsToAdd))]),t._v(" "),e("p",{staticClass:"text-sm text-gray-300 mb-4"},[t._v(t._s(t.$strings.MessageOpmlPreviewNote))]),t._v(" "),e("div",{staticClass:"w-full overflow-y-auto",staticStyle:{"max-height":"50vh"}},[t._l(t.feeds,(function(r,o){return[e("div",{key:o,staticClass:"py-1 flex items-center"},[e("p",{staticClass:"text-lg font-semibold"},[t._v(t._s(o+1)+".")]),t._v(" "),e("div",{staticClass:"pl-2"},[r.title?e("p",{staticClass:"text-sm font-semibold"},[t._v(t._s(r.title))]):t._e(),t._v(" "),e("p",{staticClass:"text-xs text-gray-400"},[t._v(t._s(r.feedUrl))])])])]}))],2)]),t._v(" "),e("div",{staticClass:"flex items-center py-4"},[e("div",{staticClass:"grow"}),t._v(" "),e("ui-btn",{attrs:{color:"bg-success"},on:{click:t.submit}},[t._v(t._s(t.$strings.ButtonAddPodcasts))])],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiDropdown:r(236).default,UiCheckbox:r(184).default,UiBtn:r(42).default,ModalsModal:r(39).default})}}]);