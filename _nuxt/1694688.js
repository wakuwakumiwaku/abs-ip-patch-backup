(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{750:function(t,e,r){"use strict";r.r(e);r(15);var o=r(7),n=(r(29),r(14),r(77),{props:{authorMount:{type:Object,default:function(){}},width:Number,height:{type:Number,default:192},nameBelow:{type:Boolean,default:!1}},data:function(){return{searching:!1,isHovering:!1,author:null}},computed:{cardWidth:function(){return this.width||.8*this.cardHeight},cardHeight:function(){return this.height*this.sizeMultiplier},coverHeight:function(){return this.cardHeight},_author:function(){return this.author||{}},authorId:function(){var t;return(null===(t=this._author)||void 0===t?void 0:t.id)||""},name:function(){var t;return(null===(t=this._author)||void 0===t?void 0:t.name)||""},asin:function(){var t;return(null===(t=this._author)||void 0===t?void 0:t.asin)||""},numBooks:function(){var t;return(null===(t=this._author)||void 0===t?void 0:t.numBooks)||0},store:function(){return this.$store||this.$nuxt.$store},userCanUpdate:function(){return this.store.getters["user/getUserCanUpdate"]},currentLibraryId:function(){return this.store.state.libraries.currentLibraryId},libraryProvider:function(){return this.store.getters["libraries/getLibraryProvider"](this.currentLibraryId)||"google"},sizeMultiplier:function(){return this.store.getters["user/getSizeMultiplier"]}},methods:{mouseover:function(){this.isHovering=!0},mouseleave:function(){this.isHovering=!1},searchAuthor:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.searching=!0,r={},t.asin?r.asin=t.asin:r.q=t.name,r.region="us",t.libraryProvider.startsWith("audible.")&&(r.region=t.libraryProvider.split(".").pop()||"us"),e.next=7,t.$axios.$post("/api/authors/".concat(t.authorId,"/match"),r).catch((function(t){return console.error("Failed",t),null}));case 7:(o=e.sent)?o.updated?o.author.imagePath?t.$toast.success(t.$strings.ToastAuthorUpdateSuccess):t.$toast.success(t.$strings.ToastAuthorUpdateSuccessNoImageFound):t.$toast.info(t.$strings.ToastNoUpdatesNecessary):t.$toast.error(t.$getString("ToastAuthorNotFound",[t.name])),t.searching=!1;case 10:case"end":return e.stop()}}),e)})))()},setSearching:function(t){this.searching=t},setEntity:function(t){this.removeListeners(),this.author=t,this.addListeners()},addListeners:function(){this.author&&this.$eventBus.$on("searching-author-".concat(this.authorId),this.setSearching)},removeListeners:function(){this.author&&this.$eventBus.$off("searching-author-".concat(this.authorId),this.setSearching)},destroy:function(){this.$destroy(),this.$el&&this.$el.parentNode?this.$el.parentNode.removeChild(this.$el):this.$el&&this.$el.remove&&this.$el.remove()},setSelectionMode:function(t){}},mounted:function(){this.authorMount&&this.setEntity(this.authorMount)},beforeDestroy:function(){this.removeListeners()}}),c=r(4),component=Object(c.a)(n,(function(){var t,e=this,r=e._self._c;return r("div",{staticClass:"pb-3e",style:{minWidth:e.cardWidth+"px",maxWidth:e.cardWidth+"px"}},[r("nuxt-link",{attrs:{to:"/author/".concat(null===(t=e.author)||void 0===t?void 0:t.id)}},[r("div",{attrs:{"cy-id":"card"},on:{mouseover:e.mouseover,mouseleave:e.mouseleave}},[r("div",{staticClass:"bg-primary box-shadow-book rounded-md relative overflow-hidden",style:{height:e.cardHeight+"px"},attrs:{"cy-id":"imageArea"}},[r("covers-author-image",{attrs:{author:e.author}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.searching&&!e.nameBelow,expression:"!searching && !nameBelow"}],staticClass:"absolute bottom-0 left-0 w-full py-1e bg-black/60 px-2e",attrs:{"cy-id":"textInline"}},[r("p",{staticClass:"text-center font-semibold truncate",style:{fontSize:"0.75em"}},[e._v(e._s(e.name))]),e._v(" "),r("p",{staticClass:"text-center text-gray-200",style:{fontSize:"0.65em"}},[e._v(e._s(e.numBooks)+" "+e._s(e.$strings.LabelBooks))])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.searching&&e.isHovering&&e.userCanUpdate,expression:"!searching && isHovering && userCanUpdate"}],staticClass:"absolute top-0 left-0 p-2e cursor-pointer hover:text-white text-gray-200 transform hover:scale-125 duration-150",attrs:{"cy-id":"match"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.searchAuthor.apply(null,arguments)}}},[r("ui-tooltip",{attrs:{text:e.$strings.ButtonQuickMatch,direction:"bottom"}},[r("span",{staticClass:"material-symbols",style:{fontSize:"1.125em"}},[e._v("search")])])],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isHovering&&!e.searching&&e.userCanUpdate,expression:"isHovering && !searching && userCanUpdate"}],staticClass:"absolute top-0 right-0 p-2e cursor-pointer hover:text-white text-gray-200 transform hover:scale-125 duration-150",attrs:{"cy-id":"edit"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("edit",e.author)}}},[r("ui-tooltip",{attrs:{text:e.$strings.LabelEdit,direction:"bottom"}},[r("span",{staticClass:"material-symbols",style:{fontSize:"1.125em"}},[e._v("edit")])])],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.searching,expression:"searching"}],staticClass:"absolute top-0 left-0 z-10 w-full h-full bg-black/50 flex items-center justify-center",attrs:{"cy-id":"spinner"}},[r("widgets-loading-spinner",{attrs:{size:""}})],1)],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.nameBelow,expression:"nameBelow"}],staticClass:"w-full py-1e px-2e",attrs:{"cy-id":"nameBelow"}},[r("p",{staticClass:"text-center font-semibold truncate text-gray-200",style:{fontSize:"0.75em"}},[e._v(e._s(e.name))])])])])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CoversAuthorImage:r(241).default,UiTooltip:r(76).default,WidgetsLoadingSpinner:r(151).default})}}]);