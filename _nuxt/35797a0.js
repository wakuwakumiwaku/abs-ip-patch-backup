(window.webpackJsonp=window.webpackJsonp||[]).push([[181,57,59,106],{1053:function(e,t,n){"use strict";n.r(t);var r=n(642),o=n(16),l=n(7);n(29),n(22),n(17),n(26),n(27),n(44),n(45),n(38),n(28),n(150),n(8);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={data:function(){return{showFeedModal:!1,selectedFeed:null,feeds:[]}},computed:{dateFormat:function(){return this.$store.getters.getServerSetting("dateFormat")},timeFormat:function(){return this.$store.getters.getServerSetting("timeFormat")}},methods:{showFeed:function(e){this.selectedFeed=e,this.showFeedModal=!0},deleteFeedClick:function(e){var t=this,n={message:this.$strings.MessageConfirmCloseFeed,callback:function(n){n&&t.deleteFeed(e)},type:"yesNo"};this.$store.commit("globals/setConfirmPrompt",n)},deleteFeed:function(e){var t=this;this.processing=!0,this.$axios.$post("/api/feeds/".concat(e.id,"/close")).then((function(){t.$toast.success(t.$strings.ToastRSSFeedCloseSuccess),t.show=!1,t.loadFeeds()})).catch((function(e){console.error("Failed to close RSS feed",e),t.$toast.error(t.$strings.ToastRSSFeedCloseFailed)})).finally((function(){t.processing=!1}))},getEntityType:function(e){return"libraryItem"===e?this.$strings.LabelItem:"series"===e?this.$strings.LabelSeries:"collection"===e?this.$strings.LabelCollection:this.$strings.LabelUnknown},coverUrl:function(e){return e.coverPath?"".concat(this.$config.routerBasePath).concat(e.feedUrl,"/cover"):"".concat(this.$config.routerBasePath,"/Logo.png")},loadFeeds:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/api/feeds").catch((function(e){return console.error("Failed to load RSS feeds",e),null}));case 2:if(data=t.sent){t.next=6;break}return e.$toast.error(e.$strings.ToastFailedToLoadData),t.abrupt("return");case 6:e.feeds=data.feeds.map((function(e){return c(c({},e),{},{episodes:Object(r.a)(e.episodes).sort((function(a,b){return a.pubDate?b.pubDate?new Date(a.pubDate)-new Date(b.pubDate):-1:1}))})}));case 7:case"end":return t.stop()}}),t)})))()},init:function(){this.loadFeeds()}},mounted:function(){this.init()}},v=(n(903),n(4)),component=Object(v.a)(f,(function(){var e=this,t=e._self._c;return t("div",[t("app-settings-content",{attrs:{"header-text":e.$strings.HeaderRSSFeeds},scopedSlots:e._u([{key:"header-items",fn:function(){return[t("ui-tooltip",{staticClass:"inline-flex ml-2",attrs:{text:e.$strings.LabelClickForMoreInfo}},[t("a",{staticClass:"inline-flex",attrs:{href:"https://www.audiobookshelf.org/guides/rss_feeds",target:"_blank"}},[t("span",{staticClass:"material-symbols text-xl w-5 text-gray-200"},[e._v("help_outline")])])])]},proxy:!0}])},[e._v(" "),e.feeds.length?t("div",{staticClass:"block max-w-full pt-2"},[t("table",{staticClass:"rssFeedsTable text-xs"},[t("tr",{staticClass:"bg-primary/40 h-12"},[t("th",{staticClass:"w-16 min-w-16"}),e._v(" "),t("th",{staticClass:"w-48 max-w-64 min-w-24 text-left truncate"},[e._v(e._s(e.$strings.LabelTitle))]),e._v(" "),t("th",{staticClass:"w-48 min-w-24 text-left hidden xl:table-cell"},[e._v(e._s(e.$strings.LabelSlug))]),e._v(" "),t("th",{staticClass:"w-24 min-w-16 text-left hidden md:table-cell"},[e._v(e._s(e.$strings.LabelType))]),e._v(" "),t("th",{staticClass:"w-16 min-w-16 text-center"},[e._v(e._s(e.$strings.HeaderEpisodes))]),e._v(" "),t("th",{staticClass:"w-16 min-w-16 text-center hidden lg:table-cell"},[e._v(e._s(e.$strings.LabelRSSFeedPreventIndexing))]),e._v(" "),t("th",{staticClass:"w-48 min-w-24 grow hidden md:table-cell"},[e._v(e._s(e.$strings.LabelLastUpdate))]),e._v(" "),t("th",{staticClass:"w-16 text-left"})]),e._v(" "),e._l(e.feeds,(function(n){return t("tr",{key:n.id,staticClass:"cursor-pointer h-12",on:{click:function(t){return e.showFeed(n)}}},[t("td",[t("img",{staticClass:"h-auto w-full",attrs:{src:e.coverUrl(n)}})]),e._v(" "),t("td",{staticClass:"w-48 max-w-64 min-w-24 text-left truncate"},[t("p",{staticClass:"truncate"},[e._v(e._s(n.meta.title))])]),e._v(" "),t("td",{staticClass:"hidden xl:table-cell max-w-48"},[t("p",{staticClass:"truncate"},[e._v(e._s(n.slug))])]),e._v(" "),t("td",{staticClass:"hidden md:table-cell"},[t("p",{},[e._v(e._s(e.getEntityType(n.entityType)))])]),e._v(" "),t("td",{staticClass:"text-center"},[t("p",{},[e._v(e._s(n.episodes.length))])]),e._v(" "),t("td",{staticClass:"text-center leading-none hidden lg:table-cell"},[n.meta.preventIndexing?t("p",{},[t("span",{staticClass:"material-symbols text-2xl"},[e._v("check")])]):e._e()]),e._v(" "),t("td",{staticClass:"text-center hidden md:table-cell"},[n.updatedAt?t("ui-tooltip",{attrs:{direction:"top",text:e.$formatDatetime(n.updatedAt,e.dateFormat,e.timeFormat)}},[t("p",{staticClass:"text-gray-200"},[e._v(e._s(e.$dateDistanceFromNow(n.updatedAt)))])]):e._e()],1),e._v(" "),t("td",{staticClass:"text-center"},[t("ui-icon-btn",{staticClass:"mx-0.5 text-white/70",attrs:{icon:"delete",borderless:"",size:7,iconFontSize:"1.25rem",outlined:""},on:{click:function(t){return t.stopPropagation(),e.deleteFeedClick(n)}}})],1)])}))],2)]):e._e()]),e._v(" "),t("modals-rssfeed-view-feed-modal",{attrs:{feed:e.selectedFeed},model:{value:e.showFeedModal,callback:function(t){e.showFeedModal=t},expression:"showFeedModal"}})],1)}),[],!1,null,"5a1ced03",null);t.default=component.exports;installComponents(component,{UiTooltip:n(76).default,UiIconBtn:n(148).default,AppSettingsContent:n(652).default,ModalsRssfeedViewFeedModal:n(844).default})},642:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(183);var o=n(237),l=n(149);function d(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(o.a)(e)||Object(l.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},646:function(e,t,n){var content=n(648);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(19).default)("6d988fa2",content,!0,{sourceMap:!1})},647:function(e,t,n){"use strict";n(646)},648:function(e,t,n){var r=n(18)((function(i){return i[1]}));r.push([e.i,"\n#settings-description a {\n  color: rgb(96 165 250);\n}\n#settings-description a:hover {\n  color: rgb(147 197 253);\n  text-decoration-line: underline;\n}\n#settings-description code {\n  font-size: 0.875rem;\n  border-radius: 6px;\n  background-color: rgb(82, 82, 82);\n  color: white;\n  padding: 2px 4px;\n}\n",""]),r.locals={},e.exports=r},652:function(e,t,n){"use strict";n.r(t);n(22),n(43);var r={props:{headerText:String,description:String,note:String},methods:{}},o=(n(647),n(4)),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-bg rounded-md shadow-lg border border-white/5 p-2 sm:p-4 mb-8"},[t("div",{staticClass:"flex items-center mb-2"},[e._t("header-prefix"),e._v(" "),t("h1",{staticClass:"text-xl"},[e._v(e._s(e.headerText))]),e._v(" "),e._t("header-items")],2),e._v(" "),e.description?t("p",{staticClass:"mb-6 text-gray-200",attrs:{id:"settings-description"},domProps:{innerHTML:e._s(e.description)}}):e._e(),e._v(" "),e._t("default")],2)}),[],!1,null,null,null);t.default=component.exports},714:function(e,t,n){var content=n(762);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(19).default)("6cf297f0",content,!0,{sourceMap:!1})},761:function(e,t,n){"use strict";n(714)},762:function(e,t,n){var r=n(18)((function(i){return i[1]}));r.push([e.i,"\n.episodesTable[data-v-927273f2] {\n  width: 100%;\n  max-width: 100%;\n  border: 1px solid #474747;\n  display: flex;\n  flex-direction: column;\n}\n.episodesTable div.header[data-v-927273f2] {\n  background-color: #272727;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  padding: 4px 8px;\n}\n.episodesTable .scroller[data-v-927273f2] {\n  display: flex;\n  flex-direction: column;\n  max-height: 250px;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.episodesTable .scroller div[data-v-927273f2] {\n  background-color: #373838;\n  padding: 4px 8px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  height: 32px;\n  flex: 0 0 32px;\n}\n.episodesTable .scroller div[data-v-927273f2]:nth-child(even) {\n  background-color: #2f2f2f;\n}\n",""]),r.locals={},e.exports=r},798:function(e,t,n){var content=n(904);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(19).default)("850ba8fc",content,!0,{sourceMap:!1})},844:function(e,t,n){"use strict";n.r(t);n(17);var r={props:{value:Boolean,feed:{type:Object,default:function(){}}},data:function(){return{processing:!1}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},_feed:function(){return this.feed||{}},feedUrl:function(){return this.feed?"".concat(window.origin).concat(this.$config.routerBasePath).concat(this.feed.feedUrl):""}}},o=(n(761),n(4)),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("modals-modal",{attrs:{name:"rss-feed-view-modal",processing:e.processing,width:700,height:"unset"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("div",{ref:"wrapper",staticClass:"px-8 py-6 w-full text-sm rounded-lg bg-bg shadow-lg border border-black-300 relative overflow-hidden"},[e.feed?t("div",{staticClass:"w-full"},[t("p",{staticClass:"text-lg font-semibold mb-4"},[e._v(e._s(e.$strings.HeaderRSSFeedGeneral))]),e._v(" "),t("div",{staticClass:"w-full relative"},[t("ui-text-input",{attrs:{value:e.feedUrl,readonly:"","show-copy":""}})],1),e._v(" "),e.feed.meta?t("div",{staticClass:"mt-5"},[t("div",{staticClass:"flex py-0.5"},[t("div",{staticClass:"w-48"},[t("span",{staticClass:"text-white/60 uppercase text-sm"},[e._v(e._s(e.$strings.LabelRSSFeedPreventIndexing))])]),e._v(" "),t("div",[e._v(e._s(e.feed.meta.preventIndexing?"Yes":"No"))])]),e._v(" "),e.feed.meta.ownerName?t("div",{staticClass:"flex py-0.5"},[t("div",{staticClass:"w-48"},[t("span",{staticClass:"text-white/60 uppercase text-sm"},[e._v(e._s(e.$strings.LabelRSSFeedCustomOwnerName))])]),e._v(" "),t("div",[e._v(e._s(e.feed.meta.ownerName))])]):e._e(),e._v(" "),e.feed.meta.ownerEmail?t("div",{staticClass:"flex py-0.5"},[t("div",{staticClass:"w-48"},[t("span",{staticClass:"text-white/60 uppercase text-sm"},[e._v(e._s(e.$strings.LabelRSSFeedCustomOwnerEmail))])]),e._v(" "),t("div",[e._v(e._s(e.feed.meta.ownerEmail))])]):e._e()]):e._e(),e._v(" "),t("div",{staticClass:"episodesTable mt-2"},[t("div",{staticClass:"bg-primary/40 h-12 header"},[e._v("\n          "+e._s(e.$strings.LabelEpisodeTitle)+"\n        ")]),e._v(" "),t("div",{staticClass:"scroller"},e._l(e.feed.episodes,(function(n){return t("div",{key:n.id,staticClass:"h-8 text-xs truncate"},[e._v("\n            "+e._s(n.title)+"\n          ")])})),0)])]):e._e()])])}),[],!1,null,"927273f2",null);t.default=component.exports;installComponents(component,{UiTextInput:n(68).default,ModalsModal:n(39).default})},903:function(e,t,n){"use strict";n(798)},904:function(e,t,n){var r=n(18)((function(i){return i[1]}));r.push([e.i,"\n.rssFeedsTable[data-v-5a1ced03] {\n  border-collapse: collapse;\n  width: 100%;\n  max-width: 100%;\n  border: 1px solid #474747;\n}\n.rssFeedsTable tr[data-v-5a1ced03]:first-child {\n  background-color: #272727;\n}\n.rssFeedsTable tr[data-v-5a1ced03]:not(:first-child) {\n  background-color: #373838;\n}\n.rssFeedsTable tr[data-v-5a1ced03]:not(:first-child):nth-child(odd) {\n  background-color: #2f2f2f;\n}\n.rssFeedsTable tr[data-v-5a1ced03]:hover:not(:first-child) {\n  background-color: #474747;\n}\n.rssFeedsTable td[data-v-5a1ced03] {\n  padding: 4px 8px;\n}\n.rssFeedsTable th[data-v-5a1ced03] {\n  padding: 4px 8px;\n  font-size: 0.75rem;\n}\n",""]),r.locals={},e.exports=r}}]);