(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{741:function(t,e,o){"use strict";o.r(e);o(41),o(27),o(15),o(14),o(8),o(28);var n={props:{items:{type:Array,default:function(){return[]}},bookshelfView:{type:Number,default:1},shelfId:{type:String,default:""},continueListeningShelf:{type:Boolean,default:!1},type:{type:String,default:"book"}},data:function(){return{isScrollable:!1,canScrollLeft:!1,canScrollRight:!1,clientWidth:0,shelfOptionsByType:{episode:{component:"cards-lazy-book-card",itemPropName:"book-mount",itemIdFunc:function(t){return t.recentEpisode.id}},series:{component:"cards-lazy-series-card",itemPropName:"series-mount",itemIdFunc:function(t){return t.id}},authors:{component:"cards-author-card",itemPropName:"author-mount",itemIdFunc:function(t){return t.id}},narrators:{component:"cards-narrator-card",itemPropName:"narrator",itemIdFunc:function(t){return t.name}},book:{component:"cards-lazy-book-card",itemPropName:"book-mount",itemIdFunc:function(t){return t.id}},podcast:{component:"cards-lazy-book-card",itemPropName:"book-mount",itemIdFunc:function(t){return t.id}}}}},computed:{isSelectionMode:function(){return this.$store.getters["globals/getIsBatchSelectingMediaItems"]},options:function(){return this.shelfOptionsByType[this.type]},itemIdFunc:function(){return this.options.itemIdFunc},itemKeyFunc:function(){var t=this;return function(e){return t.itemIdFunc(e)+t.shelfId}},itemRefFunc:function(){var t=this;return function(e){return"slider-item-".concat(t.itemIdFunc(e))}},componentName:function(){return this.options.component},itemPropName:function(){return this.options.itemPropName},editFunc:function(){switch(this.type){case"episode":return this.editEpisode;case"authors":return this.editAuthor;default:return this.editItem}}},methods:{clearSelectedEntities:function(){this.updateSelectionMode(!1)},editEpisode:function(t){var e=t.libraryItem,o=t.episode;this.$store.commit("setEpisodeTableEpisodeIds",[o.id]),this.$store.commit("setSelectedLibraryItem",e),this.$store.commit("globals/setSelectedEpisode",o),this.$store.commit("globals/setShowEditPodcastEpisodeModal",!0)},editAuthor:function(t){this.$store.commit("globals/showEditAuthorModal",t)},editItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"details",o=this.items.map((function(t){return t.id}));this.$store.commit("setBookshelfBookIds",o),this.$store.commit("showEditModalOnTab",{libraryItem:t,tab:e||"details"})},selectItem:function(t){this.$emit("selectEntity",t)},itemSelectedEvt:function(){this.updateSelectionMode(this.isSelectionMode)},updateSelectionMode:function(t){var e=this,o=this.$store.state.globals.selectedMediaItems;this.items.forEach((function(n){var component=e.$refs[e.itemRefFunc(n)];component&&component.length&&((component=component[0]).setSelectionMode(t),component.selected=o.some((function(i){return i.id===n.id})))}))},scrolled:function(){this.setScrollVars()},scrollRight:function(){if(this.canScrollRight){var t=this.$refs.slider;if(t){var e=this.clientWidth,o=t.scrollWidth-t.clientWidth,n=Math.min(o,t.scrollLeft+e);t.scrollLeft=n}}},scrollLeft:function(){if(this.canScrollLeft){var t=this.$refs.slider;if(t){var e=this.clientWidth,o=Math.max(0,t.scrollLeft-e);t.scrollLeft=o}}},setScrollVars:function(){var t=this.$refs.slider;if(t){var e=t.scrollLeft,o=t.scrollWidth,n=t.clientWidth,r=Math.abs(e+n-o);this.clientWidth=n,this.isScrollable=o>n,this.canScrollRight=r>=1,this.canScrollLeft=e>0}}},updated:function(){this.setScrollVars()},mounted:function(){this.setScrollVars(),["book","podcast","episode"].includes(this.type)&&(this.$eventBus.$on("bookshelf_clear_selection",this.clearSelectedEntities),this.$eventBus.$on("item-selected",this.itemSelectedEvt))},beforeDestroy:function(){["book","podcast","episode"].includes(this.type)&&(this.$eventBus.$off("bookshelf_clear_selection",this.clearSelectedEntities),this.$eventBus.$off("item-selected",this.itemSelectedEvt))}},r=n,c=o(4),component=Object(c.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full"},[e("div",{staticClass:"flex items-center py-3e"},[t._t("default"),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),t.isScrollable?e("button",{staticClass:"w-8e h-8e mx-1e flex items-center justify-center rounded-full",class:t.canScrollLeft?"hover:bg-white/5 text-gray-300 hover:text-white":"text-white/40 cursor-text",attrs:{"cy-id":"leftScrollButton","aria-label":t.$strings.ButtonScrollLeft},on:{click:t.scrollLeft}},[e("span",{staticClass:"material-symbols",style:{fontSize:"1.5em"}},[t._v("chevron_left")])]):t._e(),t._v(" "),t.isScrollable?e("button",{staticClass:"w-8e h-8e mx-1e flex items-center justify-center rounded-full",class:t.canScrollRight?"hover:bg-white/5 text-gray-300 hover:text-white":"text-white/40 cursor-text",attrs:{"cy-id":"rightScrollButton","aria-label":t.$strings.ButtonScrollRight},on:{click:t.scrollRight}},[e("span",{staticClass:"material-symbols",style:{fontSize:"1.5em"}},[t._v("chevron_right")])]):t._e()],2),t._v(" "),e("div",{ref:"slider",staticClass:"w-full overflow-y-hidden overflow-x-auto no-scroll",staticStyle:{"scroll-behavior":"smooth"},attrs:{"cy-id":"slider"},on:{scroll:t.scrolled}},[e("div",{staticClass:"flex space-x-4e"},[t._l(t.items,(function(o,n){return[e("div",{key:t.itemKeyFunc(o),ref:"item",refInFor:!0,attrs:{"cy-id":"item"}},[e(t.componentName,t._b({ref:t.itemRefFunc(o),refInFor:!0,tag:"component",staticClass:"relative",attrs:{index:n,"bookshelf-view":t.bookshelfView,"continue-listening-shelf":t.continueListeningShelf},on:{edit:t.editFunc,editPodcast:t.editItem,select:t.selectItem,"hook:updated":t.setScrollVars}},"component",t._d({},[t.itemPropName,o])))],1)]}))],2)])])}),[],!1,null,null,null);e.default=component.exports}}]);