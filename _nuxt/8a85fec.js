(window.webpackJsonp=window.webpackJsonp||[]).push([[85,146,151,158],{1025:function(t,e,r){"use strict";r(828)},1026:function(t,e,r){var n=r(18)((function(i){return i[1]}));n.push([t.i,"\n#formWrapper[data-v-bf62d2f6] {\n  height: calc(100% - 80px);\n  max-height: calc(100% - 80px);\n}\n",""]),n.locals={},t.exports=n},1093:function(t,e,r){"use strict";r.r(e);var n=r(7),l=(r(29),{props:{processing:Boolean,libraryItem:{type:Object,default:function(){}}},data:function(){return{resettingProgress:!1,isScrollable:!1,rescanning:!1,quickMatching:!1}},computed:{isProcessing:{get:function(){return this.processing},set:function(t){this.$emit("update:processing",t)}},isFile:function(){return!!this.libraryItem&&this.libraryItem.isFile},userIsAdminOrUp:function(){return this.$store.getters["user/getIsAdminOrUp"]},isMissing:function(){return!!this.libraryItem&&!!this.libraryItem.isMissing},libraryItemId:function(){return this.libraryItem?this.libraryItem.id:null},media:function(){return this.libraryItem&&this.libraryItem.media||{}},mediaType:function(){return this.libraryItem?this.libraryItem.mediaType:null},mediaMetadata:function(){return this.media.metadata||{}},libraryId:function(){return this.libraryItem?this.libraryItem.libraryId:null},libraryProvider:function(){return this.$store.getters["libraries/getLibraryProvider"](this.libraryId)||"google"},isLibraryScanning:function(){return this.libraryId?!!this.$store.getters["tasks/getRunningLibraryScanTask"](this.libraryId):null}},methods:{quickMatch:function(){var t=this;if(!this.quickMatching&&this.$refs.itemDetailsEdit){var e=this.$refs.itemDetailsEdit.getTitleAndAuthorName(),title=e.title,r=e.author;if(title){this.quickMatching=!0;var n={provider:this.libraryProvider,title:title||null,author:r||null};this.$axios.$post("/api/items/".concat(this.libraryItemId,"/match"),n).then((function(e){t.quickMatching=!1,e.warning?t.$toast.warning(e.warning):e.updated?t.$toast.success(t.$strings.ToastItemDetailsUpdateSuccess):t.$toast.info(t.$strings.ToastNoUpdatesNecessary)})).catch((function(e){var r=e.response&&e.response.data||"";console.error("Failed to match",e),t.$toast.error(r||"Failed to match"),t.quickMatching=!1}))}else this.$toast.error(this.$strings.ToastTitleRequired)}},rescan:function(){var t=this;this.rescanning=!0,this.$axios.$post("/api/items/".concat(this.libraryItemId,"/scan")).then((function(data){t.rescanning=!1;var e=data.result;e?"UPDATED"===e?t.$toast.success(t.$strings.ToastRescanUpdated):"UPTODATE"===e?t.$toast.success(t.$strings.ToastRescanUpToDate):"REMOVED"===e&&t.$toast.error(t.$strings.ToastRescanRemoved):t.$toast.error(t.$getString("ToastRescanFailed",[t.title]))})).catch((function(e){console.error("Failed to scan library item",e),t.$toast.error(t.$strings.ToastScanFailed),t.rescanning=!1}))},saveAndClose:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.save();case 2:null!==e.sent&&t.$emit("close");case 4:case"end":return e.stop()}}),e)})))()},save:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isProcessing){e.next=2;break}return e.abrupt("return",null);case 2:if(t.$refs.itemDetailsEdit){e.next=4;break}return e.abrupt("return",null);case 4:if((r=t.$refs.itemDetailsEdit.getDetails()).hasChanges){e.next=8;break}return t.$toast.info(t.$strings.MessageNoUpdatesWereNecessary),e.abrupt("return",!1);case 8:return e.abrupt("return",t.updateDetails(r));case 9:case"end":return e.stop()}}),e)})))()},updateDetails:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.isProcessing=!0,r.next=3,e.$axios.$patch("/api/items/".concat(e.libraryItemId,"/media"),t.updatePayload).catch((function(t){return console.error("Failed to update",t),!1}));case 3:if(n=r.sent,e.isProcessing=!1,!n){r.next=12;break}if(!n.updated){r.next=11;break}return e.$toast.success(e.$strings.ToastItemDetailsUpdateSuccess),r.abrupt("return",!0);case 11:e.$toast.info(e.$strings.MessageNoUpdatesWereNecessary);case 12:return r.abrupt("return",!1);case 13:case"end":return r.stop()}}),r)})))()},checkIsScrollable:function(){var t=this;this.$nextTick((function(){var e=document.getElementById("formWrapper");e&&(e.scrollHeight>e.clientHeight?t.isScrollable=!0:t.isScrollable=!1)}))},setResizeObserver:function(){var t=this;try{var e=document.getElementById("formWrapper");e&&this.$nextTick((function(){new ResizeObserver((function(){t.checkIsScrollable()})).observe(e)}))}catch(t){console.error("Failed to set resize observer")}}},mounted:function(){this.setResizeObserver()}}),o=(r(1025),r(4)),component=Object(o.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full h-full relative"},[e("div",{staticClass:"w-full overflow-y-auto",attrs:{id:"formWrapper"}},["book"==t.mediaType?e("widgets-book-details-edit",{ref:"itemDetailsEdit",attrs:{"library-item":t.libraryItem},on:{submit:t.saveAndClose}}):e("widgets-podcast-details-edit",{ref:"itemDetailsEdit",attrs:{"library-item":t.libraryItem},on:{submit:t.saveAndClose}})],1),t._v(" "),e("div",{staticClass:"absolute bottom-0 left-0 w-full py-2 md:py-4 bg-bg",class:t.isScrollable?"box-shadow-md-up":"border-t border-white/5"},[e("div",{staticClass:"flex items-center px-4"},[e("ui-tooltip",{staticClass:"mr-2 md:mr-4",attrs:{disabled:!!t.quickMatching,text:t.$getString("MessageQuickMatchDescription",[t.libraryProvider]),direction:"bottom"}},[t.userIsAdminOrUp?e("ui-btn",{staticClass:"h-full",attrs:{loading:t.quickMatching,color:"bg-bg",type:"button",small:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.quickMatch.apply(null,arguments)}}},[t._v(t._s(t.$strings.ButtonQuickMatch))]):t._e()],1),t._v(" "),t.userIsAdminOrUp&&!t.isFile?e("ui-btn",{staticClass:"h-full",attrs:{loading:t.rescanning,disabled:t.isLibraryScanning,color:"bg-bg",type:"button",small:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.rescan.apply(null,arguments)}}},[t._v(t._s(t.$strings.ButtonReScan))]):t._e(),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),e("ui-btn",{staticClass:"mx-2 hidden md:block",on:{click:t.save}},[t._v(t._s(t.$strings.ButtonSave))]),t._v(" "),e("ui-btn",{staticClass:"mx-2 hidden md:block",on:{click:t.saveAndClose}},[t._v(t._s(t.$strings.ButtonSaveAndClose))]),t._v(" "),e("ui-btn",{staticClass:"mx-2 md:hidden",on:{click:t.saveAndClose}},[t._v(t._s(t.$strings.ButtonSave))])],1)])])}),[],!1,null,"bf62d2f6",null);e.default=component.exports;installComponents(component,{WidgetsBookDetailsEdit:r(735).default,WidgetsPodcastDetailsEdit:r(738).default,UiBtn:r(42).default,UiTooltip:r(76).default})},679:function(t,e,r){"use strict";r.r(e);var n={props:{value:String,label:String,disabled:{type:Boolean,default:!1}},data:function(){return{}},computed:{content:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{trixFileAccept:function(t){t.preventDefault()},blur:function(){this.$refs.input&&this.$refs.input.blur&&this.$refs.input.blur()}},mounted:function(){},beforeDestroy:function(){}},l=r(4),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"default-style"},[t.label?e("p",{staticClass:"px-1 text-sm font-semibold",class:{"text-gray-400":t.disabled},staticStyle:{"margin-top":"0","margin-bottom":"0.125em"}},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e(),t._v(" "),e("ui-vue-trix",{ref:"input",attrs:{"disabled-editor":t.disabled},on:{"trix-file-accept":t.trixFileAccept},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiVueTrix:r(702).default})},735:function(t,e,r){"use strict";r.r(e);r(22),r(43);var n=r(16),l=r(642);r(84),r(17),r(26),r(33),r(41),r(56),r(83),r(27),r(57),r(15),r(38),r(44),r(45),r(8),r(35),r(59),r(656),r(52),r(62),r(147),r(658),r(659),r(660),r(662),r(663),r(664),r(665),r(666),r(667),r(668),r(669),r(670),r(671),r(672),r(673),r(674),r(28),r(58);function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,a){if(t){if("string"==typeof t)return c(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,l=function(){};return{s:l,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function c(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var f={props:{libraryItem:{type:Object,default:function(){}}},data:function(){return{details:{title:null,subtitle:null,description:null,authors:[],narrators:[],series:[],publishedYear:null,publisher:null,language:null,isbn:null,asin:null,genres:[],explicit:!1,abridged:!1},newTags:[]}},watch:{libraryItem:{immediate:!0,handler:function(t){t&&this.init()}}},computed:{media:function(){return this.libraryItem&&this.libraryItem.media||{}},mediaMetadata:function(){return this.media.metadata||{}},genres:function(){return this.filterData.genres||[]},tags:function(){return this.filterData.tags||[]},series:function(){return this.filterData.series||[]},narrators:function(){return this.filterData.narrators||[]},filterData:function(){return this.$store.state.libraries.filterData||{}}},methods:{handleInputChange:function(){this.$emit("change",{libraryItemId:this.libraryItem.id,hasChanges:this.checkForChanges().hasChanges})},getDetails:function(){return this.forceBlur(),this.checkForChanges()},getTitleAndAuthorName:function(){return this.forceBlur(),{title:this.details.title,author:(this.details.authors||[]).map((function(t){return t.name})).join(", ")}},mapBatchDetails:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"overwrite",n=function(n){"append"===r?"tags"===n?e.newTags=Object(l.a)(new Set(e.newTags.concat(t.tags))):"genres"===n||"narrators"===n?e.details[n]=Object(l.a)(new Set(e.details[n].concat(t[n]))):"authors"!==n&&"series"!==n||t[n].forEach((function(t){e.details[n].find((function(e){return e.name.toLowerCase()==t.name.toLowerCase().trim()||e.id==t.id}))||e.details[n].push(h({},t))})):"tags"===n?e.newTags=Object(l.a)(t.tags):e.details[n]="genres"===n||"narrators"===n?Object(l.a)(t[n]):"authors"===n||"series"===n?t[n].map((function(i){return h({},i)})):t[n]};for(var o in t)n(o);this.handleInputChange()},forceBlur:function(){this.$refs.titleInput&&this.$refs.titleInput.blur(),this.$refs.subtitleInput&&this.$refs.subtitleInput.blur(),this.$refs.publishYearInput&&this.$refs.publishYearInput.blur(),this.$refs.descriptionInput&&this.$refs.descriptionInput.blur(),this.$refs.isbnInput&&this.$refs.isbnInput.blur(),this.$refs.asinInput&&this.$refs.asinInput.blur(),this.$refs.publisherInput&&this.$refs.publisherInput.blur(),this.$refs.languageInput&&this.$refs.languageInput.blur(),this.$refs.authorsSelect&&this.$refs.authorsSelect.isFocused&&this.$refs.authorsSelect.forceBlur(),this.$refs.narratorsSelect&&this.$refs.narratorsSelect.isFocused&&this.$refs.narratorsSelect.forceBlur(),this.$refs.genresSelect&&this.$refs.genresSelect.isFocused&&this.$refs.genresSelect.forceBlur(),this.$refs.tagsSelect&&this.$refs.tagsSelect.isFocused&&this.$refs.tagsSelect.forceBlur()},stringArrayEqual:function(t,e){if(t.length!==e.length)return!1;var r,n=o(t);try{for(n.s();!(r=n.n()).done;){var l=r.value;if(!e.includes(l))return!1}}catch(t){n.e(t)}finally{n.f()}return!0},objectArrayEqual:function(t,e){var r=function(t){return Symbol.iterator in Object(t)};if(!r(t)||!r(e))throw console.error(t,e),new Error("Invalid arrays passed in");if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++){var n=t[i],l=e[i];if(!n||!l)return!1;for(var o in n)if(n[o]!==l[o])return!1}return!0},checkForChanges:function(){var t={};for(var e in this.details){var r=this.details[e],n=this.mediaMetadata[e];!r&&n||r&&!n?t[e]=r:"narrators"===e||"genres"===e?this.stringArrayEqual(r,n)||(t[e]=Object(l.a)(r)):"authors"===e||"series"===e?this.objectArrayEqual(r,n)||(t[e]=r.map((function(t){return h({},t)}))):r&&r!=n&&(t[e]=r)}var o={};return Object.keys(t).length&&(o.metadata=t),this.stringArrayEqual(this.newTags,this.media.tags||[])||(o.tags=Object(l.a)(this.newTags)),{updatePayload:o,hasChanges:!!Object.keys(o).length}},init:function(){this.details.title=this.mediaMetadata.title,this.details.subtitle=this.mediaMetadata.subtitle,this.details.description=this.mediaMetadata.description,this.details.authors=(this.mediaMetadata.authors||[]).map((function(t){return h({},t)})),this.details.narrators=Object(l.a)(this.mediaMetadata.narrators||[]),this.details.genres=Object(l.a)(this.mediaMetadata.genres||[]),this.details.series=(this.mediaMetadata.series||[]).map((function(t){return h({},t)})),this.details.publishedYear=this.mediaMetadata.publishedYear,this.details.publisher=this.mediaMetadata.publisher||null,this.details.language=this.mediaMetadata.language||null,this.details.isbn=this.mediaMetadata.isbn||null,this.details.asin=this.mediaMetadata.asin||null,this.details.explicit=!!this.mediaMetadata.explicit,this.details.abridged=!!this.mediaMetadata.abridged,this.newTags=Object(l.a)(this.media.tags||[])},submitForm:function(){this.$emit("submit")}},mounted:function(){}},m=f,v=r(4),component=Object(v.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full h-full relative"},[e("form",{staticClass:"w-full h-full px-2 md:px-4 py-6",on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("div",{staticClass:"flex flex-wrap -mx-1"},[e("div",{staticClass:"w-full md:w-1/2 px-1"},[e("ui-text-input-with-label",{ref:"titleInput",attrs:{label:t.$strings.LabelTitle,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.title,callback:function(e){t.$set(t.details,"title",e)},expression:"details.title"}})],1),t._v(" "),e("div",{staticClass:"grow px-1 mt-2 md:mt-0"},[e("ui-text-input-with-label",{ref:"subtitleInput",attrs:{label:t.$strings.LabelSubtitle,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.subtitle,callback:function(e){t.$set(t.details,"subtitle",e)},expression:"details.subtitle"}})],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap mt-2 -mx-1"},[e("div",{staticClass:"w-full md:w-3/4 px-1"},[e("ui-multi-select-query-input",{ref:"authorsSelect",attrs:{label:t.$strings.LabelAuthors,"filter-key":"authors"},on:{input:t.handleInputChange},model:{value:t.details.authors,callback:function(e){t.$set(t.details,"authors",e)},expression:"details.authors"}})],1),t._v(" "),e("div",{staticClass:"grow px-1 mt-2 md:mt-0"},[e("ui-text-input-with-label",{ref:"publishYearInput",attrs:{type:"number",label:t.$strings.LabelPublishYear},on:{input:t.handleInputChange},model:{value:t.details.publishedYear,callback:function(e){t.$set(t.details,"publishedYear",e)},expression:"details.publishedYear"}})],1)]),t._v(" "),e("div",{staticClass:"flex mt-2 -mx-1"},[e("div",{staticClass:"grow px-1"},[e("widgets-series-input-widget",{on:{input:t.handleInputChange},model:{value:t.details.series,callback:function(e){t.$set(t.details,"series",e)},expression:"details.series"}})],1)]),t._v(" "),e("ui-rich-text-editor",{ref:"descriptionInput",staticClass:"mt-2",attrs:{label:t.$strings.LabelDescription},on:{input:t.handleInputChange},model:{value:t.details.description,callback:function(e){t.$set(t.details,"description",e)},expression:"details.description"}}),t._v(" "),e("div",{staticClass:"flex flex-wrap mt-2 -mx-1"},[e("div",{staticClass:"w-full md:w-1/2 px-1"},[e("ui-multi-select",{ref:"genresSelect",attrs:{label:t.$strings.LabelGenres,items:t.genres},on:{input:t.handleInputChange},model:{value:t.details.genres,callback:function(e){t.$set(t.details,"genres",e)},expression:"details.genres"}})],1),t._v(" "),e("div",{staticClass:"grow px-1 mt-2 md:mt-0"},[e("ui-multi-select",{ref:"tagsSelect",attrs:{label:t.$strings.LabelTags,items:t.tags},on:{input:t.handleInputChange},model:{value:t.newTags,callback:function(e){t.newTags=e},expression:"newTags"}})],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap mt-2 -mx-1"},[e("div",{staticClass:"w-full md:w-1/2 px-1"},[e("ui-multi-select",{ref:"narratorsSelect",attrs:{label:t.$strings.LabelNarrators,items:t.narrators},on:{input:t.handleInputChange},model:{value:t.details.narrators,callback:function(e){t.$set(t.details,"narrators",e)},expression:"details.narrators"}})],1),t._v(" "),e("div",{staticClass:"w-1/2 md:w-1/4 px-1 mt-2 md:mt-0"},[e("ui-text-input-with-label",{ref:"isbnInput",attrs:{label:"ISBN","trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.isbn,callback:function(e){t.$set(t.details,"isbn",e)},expression:"details.isbn"}})],1),t._v(" "),e("div",{staticClass:"w-1/2 md:w-1/4 px-1 mt-2 md:mt-0"},[e("ui-text-input-with-label",{ref:"asinInput",attrs:{label:"ASIN","trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.asin,callback:function(e){t.$set(t.details,"asin",e)},expression:"details.asin"}})],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap mt-2 -mx-1"},[e("div",{staticClass:"w-full md:w-1/4 px-1"},[e("ui-text-input-with-label",{ref:"publisherInput",attrs:{label:t.$strings.LabelPublisher,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.publisher,callback:function(e){t.$set(t.details,"publisher",e)},expression:"details.publisher"}})],1),t._v(" "),e("div",{staticClass:"w-1/2 md:w-1/4 px-1 mt-2 md:mt-0"},[e("ui-text-input-with-label",{ref:"languageInput",attrs:{label:t.$strings.LabelLanguage,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.language,callback:function(e){t.$set(t.details,"language",e)},expression:"details.language"}})],1),t._v(" "),e("div",{staticClass:"grow px-1 pt-6 mt-2 md:mt-0"},[e("div",{staticClass:"flex justify-center"},[e("ui-checkbox",{attrs:{label:t.$strings.LabelExplicit,"checkbox-bg":"primary","border-color":"gray-600","label-class":"pl-2 text-base font-semibold"},on:{input:t.handleInputChange},model:{value:t.details.explicit,callback:function(e){t.$set(t.details,"explicit",e)},expression:"details.explicit"}})],1)]),t._v(" "),e("div",{staticClass:"grow px-1 pt-6 mt-2 md:mt-0"},[e("div",{staticClass:"flex justify-center"},[e("ui-checkbox",{attrs:{label:t.$strings.LabelAbridged,"checkbox-bg":"primary","border-color":"gray-600","label-class":"pl-2 text-base font-semibold"},on:{input:t.handleInputChange},model:{value:t.details.abridged,callback:function(e){t.$set(t.details,"abridged",e)},expression:"details.abridged"}})],1)])])],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiTextInputWithLabel:r(121).default,UiMultiSelectQueryInput:r(705).default,WidgetsSeriesInputWidget:r(736).default,UiRichTextEditor:r(679).default,UiMultiSelect:r(675).default,UiCheckbox:r(184).default})},738:function(t,e,r){"use strict";r.r(e);r(22),r(43);var n=r(642);r(84),r(17),r(33),r(41),r(27),r(38),r(83),r(57),r(15),r(8),r(35),r(59),r(656),r(52),r(62),r(658),r(659),r(660),r(662),r(663),r(664),r(665),r(666),r(667),r(668),r(669),r(670),r(671),r(672),r(673),r(674),r(58);function l(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,a){if(t){if("string"==typeof t)return o(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,l=function(){};return{s:l,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function o(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}var c={props:{libraryItem:{type:Object,default:function(){}}},data:function(){return{details:{title:null,author:null,description:null,releaseDate:null,genres:[],feedUrl:null,imageUrl:null,itunesPageUrl:null,itunesId:null,itunesArtistId:null,explicit:!1,language:null,type:null},newTags:[]}},watch:{libraryItem:{immediate:!0,handler:function(t){t&&this.init()}}},computed:{media:function(){return this.libraryItem&&this.libraryItem.media||{}},mediaMetadata:function(){return this.media.metadata||{}},genres:function(){return this.filterData.genres||[]},tags:function(){return this.filterData.tags||[]},filterData:function(){return this.$store.state.libraries.filterData||{}},podcastTypes:function(){var t=this;return this.$store.state.globals.podcastTypes.map((function(e){return{text:t.$strings[e.descriptionKey]||e.text,value:e.value}}))}},methods:{handleInputChange:function(){this.$emit("change",{libraryItemId:this.libraryItem.id,hasChanges:this.checkForChanges().hasChanges})},getDetails:function(){return this.forceBlur(),this.checkForChanges()},getTitleAndAuthorName:function(){return this.forceBlur(),{title:this.details.title,author:this.details.author}},mapBatchDetails:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"overwrite";for(var r in t)"append"===e?"tags"===r?this.newTags=Object(n.a)(new Set(this.newTags.concat(t.tags))):"genres"===r&&(this.details[r]=Object(n.a)(new Set(this.details[r].concat(t[r])))):"tags"===r?this.newTags=Object(n.a)(t.tags):this.details[r]="genres"===r?Object(n.a)(t[r]):t[r];this.handleInputChange()},forceBlur:function(){this.$refs.titleInput&&this.$refs.titleInput.blur(),this.$refs.authorInput&&this.$refs.authorInput.blur(),this.$refs.releaseDateInput&&this.$refs.releaseDateInput.blur(),this.$refs.descriptionInput&&this.$refs.descriptionInput.blur(),this.$refs.feedUrlInput&&this.$refs.feedUrlInput.blur(),this.$refs.itunesIdInput&&this.$refs.itunesIdInput.blur(),this.$refs.languageInput&&this.$refs.languageInput.blur(),this.$refs.genresSelect&&this.$refs.genresSelect.isFocused&&this.$refs.genresSelect.forceBlur(),this.$refs.tagsSelect&&this.$refs.tagsSelect.isFocused&&this.$refs.tagsSelect.forceBlur()},stringArrayEqual:function(t,e){if(t.length!==e.length)return!1;var r,n=l(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(!e.includes(o))return!1}}catch(t){n.e(t)}finally{n.f()}return!0},objectArrayEqual:function(t,e){var r=function(t){return Symbol.iterator in Object(t)};if(!r(t)||!r(e))throw console.error(t,e),new Error("Invalid arrays passed in");if(t.length!==e.length)return!1;var n,o=l(t);try{for(o.s();!(n=o.n()).done;){var c=n.value,d=e.find((function(a){return a.id===c.id}));if(!d)return!1;for(var h in c)if(c[h]!==d[h])return!1}}catch(t){o.e(t)}finally{o.f()}return!0},checkForChanges:function(){var t={};for(var e in this.details){var r=this.details[e],l=this.mediaMetadata[e];!r&&l||r&&!l?t[e]=r:"genres"===e?this.stringArrayEqual(r,l)||(t[e]=Object(n.a)(r)):r&&r!=l&&(t[e]=r)}var o={};return Object.keys(t).length&&(o.metadata=t),this.stringArrayEqual(this.newTags,this.media.tags||[])||(o.tags=Object(n.a)(this.newTags)),{updatePayload:o,hasChanges:!!Object.keys(o).length}},init:function(){this.details.title=this.mediaMetadata.title,this.details.author=this.mediaMetadata.author||"",this.details.description=this.mediaMetadata.description||"",this.details.releaseDate=this.mediaMetadata.releaseDate||"",this.details.genres=Object(n.a)(this.mediaMetadata.genres||[]),this.details.feedUrl=this.mediaMetadata.feedUrl||"",this.details.imageUrl=this.mediaMetadata.imageUrl||"",this.details.itunesPageUrl=this.mediaMetadata.itunesPageUrl||"",this.details.itunesId=this.mediaMetadata.itunesId||"",this.details.itunesArtistId=this.mediaMetadata.itunesArtistId||"",this.details.language=this.mediaMetadata.language||"",this.details.explicit=!!this.mediaMetadata.explicit,this.details.type=this.mediaMetadata.type||"episodic",this.newTags=Object(n.a)(this.media.tags||[])},submitForm:function(){this.$emit("submit")}},mounted:function(){}},d=c,h=r(4),component=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full h-full relative"},[e("form",{staticClass:"w-full h-full px-4 py-6",on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("div",{staticClass:"flex -mx-1"},[e("div",{staticClass:"w-1/2 px-1"},[e("ui-text-input-with-label",{ref:"titleInput",attrs:{label:t.$strings.LabelTitle,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.title,callback:function(e){t.$set(t.details,"title",e)},expression:"details.title"}})],1),t._v(" "),e("div",{staticClass:"grow px-1"},[e("ui-text-input-with-label",{ref:"authorInput",attrs:{label:t.$strings.LabelAuthor,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.author,callback:function(e){t.$set(t.details,"author",e)},expression:"details.author"}})],1)]),t._v(" "),e("ui-text-input-with-label",{ref:"feedUrlInput",staticClass:"mt-2",attrs:{label:t.$strings.LabelRSSFeedURL,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.feedUrl,callback:function(e){t.$set(t.details,"feedUrl",e)},expression:"details.feedUrl"}}),t._v(" "),e("ui-textarea-with-label",{ref:"descriptionInput",staticClass:"mt-2",attrs:{rows:3,label:t.$strings.LabelDescription},on:{input:t.handleInputChange},model:{value:t.details.description,callback:function(e){t.$set(t.details,"description",e)},expression:"details.description"}}),t._v(" "),e("div",{staticClass:"flex mt-2 -mx-1"},[e("div",{staticClass:"w-1/2 px-1"},[e("ui-multi-select",{ref:"genresSelect",attrs:{label:t.$strings.LabelGenres,items:t.genres},on:{input:t.handleInputChange},model:{value:t.details.genres,callback:function(e){t.$set(t.details,"genres",e)},expression:"details.genres"}})],1),t._v(" "),e("div",{staticClass:"grow px-1"},[e("ui-multi-select",{ref:"tagsSelect",attrs:{label:t.$strings.LabelTags,items:t.tags},on:{input:t.handleInputChange},model:{value:t.newTags,callback:function(e){t.newTags=e},expression:"newTags"}})],1)]),t._v(" "),e("div",{staticClass:"flex mt-2 -mx-1"},[e("div",{staticClass:"w-1/4 px-1"},[e("ui-text-input-with-label",{ref:"releaseDateInput",attrs:{label:t.$strings.LabelReleaseDate,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.releaseDate,callback:function(e){t.$set(t.details,"releaseDate",e)},expression:"details.releaseDate"}})],1),t._v(" "),e("div",{staticClass:"w-1/4 px-1"},[e("ui-text-input-with-label",{ref:"itunesIdInput",attrs:{label:"iTunes ID","trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.itunesId,callback:function(e){t.$set(t.details,"itunesId",e)},expression:"details.itunesId"}})],1),t._v(" "),e("div",{staticClass:"w-1/4 px-1"},[e("ui-text-input-with-label",{ref:"languageInput",attrs:{label:t.$strings.LabelLanguage,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.language,callback:function(e){t.$set(t.details,"language",e)},expression:"details.language"}})],1),t._v(" "),e("div",{staticClass:"grow px-1 pt-6"},[e("div",{staticClass:"flex justify-center"},[e("ui-checkbox",{attrs:{label:t.$strings.LabelExplicit,"checkbox-bg":"primary","border-color":"gray-600","label-class":"pl-2 text-base font-semibold"},on:{input:t.handleInputChange},model:{value:t.details.explicit,callback:function(e){t.$set(t.details,"explicit",e)},expression:"details.explicit"}})],1)])]),t._v(" "),e("div",{staticClass:"flex mt-2 -mx-1"},[e("div",{staticClass:"w-1/4 px-1"},[e("ui-dropdown",{staticClass:"max-w-52",attrs:{label:t.$strings.LabelPodcastType,items:t.podcastTypes,small:""},on:{input:t.handleInputChange},model:{value:t.details.type,callback:function(e){t.$set(t.details,"type",e)},expression:"details.type"}})],1)])],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiTextInputWithLabel:r(121).default,UiTextareaWithLabel:r(186).default,UiMultiSelect:r(675).default,UiCheckbox:r(184).default,UiDropdown:r(236).default})},828:function(t,e,r){var content=r(1026);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("67090fd9",content,!0,{sourceMap:!1})}}]);