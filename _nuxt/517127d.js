(window.webpackJsonp=window.webpackJsonp||[]).push([[92,57],{642:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(183);var o=r(237),l=r(149);function c(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||Object(o.a)(t)||Object(l.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},713:function(t,e,r){var content=r(760);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("006c344b",content,!0,{sourceMap:!1})},759:function(t,e,r){"use strict";r(713)},760:function(t,e,r){var n=r(18)((function(i){return i[1]}));n.push([t.i,"\n.tab[data-v-a35582f0] {\n  height: 40px;\n}\n.tab.tab-selected[data-v-a35582f0] {\n  height: 41px;\n}\n",""]),n.locals={},t.exports=n},841:function(t,e,r){"use strict";r.r(e);var n=r(642),o=r(16);r(26),r(22),r(33),r(56),r(27),r(15),r(38),r(44),r(45),r(8),r(28),r(147);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){Object(o.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var d={props:{value:Boolean,library:{type:Object,default:function(){}}},data:function(){return{processing:!1,selectedTab:"details",libraryCopy:null}},computed:{show:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},title:function(){return this.library?this.$strings.HeaderUpdateLibrary:this.$strings.HeaderNewLibrary},buttonText:function(){return this.library?this.$strings.ButtonSave:this.$strings.ButtonCreate},mediaType:function(){var t;return null===(t=this.libraryCopy)||void 0===t?void 0:t.mediaType},libraryId:function(){var t;return null===(t=this.library)||void 0===t?void 0:t.id},tabs:function(){var t=this;return[{id:"details",title:this.$strings.HeaderDetails,component:"modals-libraries-edit-library"},{id:"settings",title:this.$strings.HeaderSettings,component:"modals-libraries-library-settings"},{id:"scanner",title:this.$strings.HeaderSettingsScanner,component:"modals-libraries-library-scanner-settings"},{id:"schedule",title:this.$strings.HeaderSchedule,component:"modals-libraries-schedule-scan"},{id:"tools",title:this.$strings.HeaderTools,component:"modals-libraries-library-tools"}].filter((function(e){return!("tools"===e.id&&!t.library)&&("scanner"!==e.id||"book"===t.mediaType)}))},tabName:function(){var t=this,e=this.tabs.find((function(e){return e.id===t.selectedTab}));return e?e.component:""}},watch:{show:{handler:function(t){t&&this.init()}}},methods:{selectTab:function(t){this.selectedTab=t},updateLibrary:function(t){this.mapLibraryToCopy(t)},getNewLibraryData:function(){return{name:"",provider:"google",folders:[],icon:"database",mediaType:"book",settings:{coverAspectRatio:this.$constants.BookCoverAspectRatio.SQUARE,disableWatcher:!1,skipMatchingMediaWithAsin:!1,skipMatchingMediaWithIsbn:!1,autoScanCronExpression:null,hideSingleBookSeries:!1,onlyShowLaterBooksInContinueSeries:!1,metadataPrecedence:["folderStructure","audioMetatags","nfoFile","txtFiles","opfFile","absMetadata"],markAsFinishedPercentComplete:null,markAsFinishedTimeRemaining:10}}},init:function(){this.selectedTab="details",this.libraryCopy=this.getNewLibraryData(),this.library&&this.mapLibraryToCopy(this.library)},mapLibraryToCopy:function(t){for(var e in this.libraryCopy)if(void 0!==t[e])if("folders"===e)this.libraryCopy.folders=t.folders.map((function(t){return c({},t)})).filter((function(t){var e;return!(null===(e=t.fullPath)||void 0===e||!e.trim())}));else if("settings"===e)for(var r in t.settings)this.libraryCopy.settings[r]=t.settings[r];else this.libraryCopy[e]=t[e]},validate:function(){return this.libraryCopy.name?!!this.libraryCopy.folders.length||(this.$toast.error(this.$strings.ToastMustHaveAtLeastOnePath),!1):(this.$toast.error(this.$strings.ToastNameRequired),!1)},submit:function(){this.$refs.tabComponent&&this.$refs.tabComponent.checkBlurExpressionInput&&this.$refs.tabComponent.checkBlurExpressionInput()||this.validate()&&(this.library?this.submitUpdateLibrary():this.submitCreateLibrary())},getLibraryUpdatePayload:function(){var t={};for(var e in this.libraryCopy)if("folders"===e)this.libraryCopy.folders.map((function(t){return t.fullPath})).join(",")!==this.library.folders.map((function(t){return t.fullPath})).join(",")&&(t.folders=Object(n.a)(this.libraryCopy.folders));else if("settings"===e)for(var r in this.libraryCopy.settings)this.libraryCopy.settings[r]!==this.library.settings[r]&&(t.settings||(t.settings={}),t.settings[r]=this.libraryCopy.settings[r]);else"mediaType"!==e&&this.libraryCopy[e]!==this.library[e]&&(t[e]=this.libraryCopy[e]);return t},submitUpdateLibrary:function(){var t=this,e=this.getLibraryUpdatePayload();Object.keys(e).length?(this.processing=!0,this.$axios.$patch("/api/libraries/".concat(this.library.id),e).then((function(e){t.processing=!1,t.show=!1,t.$toast.success(t.$getString("ToastLibraryUpdateSuccess",[e.name]))})).catch((function(e){console.error(e),e.response&&e.response.data?t.$toast.error(e.response.data):t.$toast.error(t.$strings.ToastFailedToUpdate),t.processing=!1}))):this.$toast.info(this.$strings.ToastNoUpdatesNecessary)},submitCreateLibrary:function(){var t=this;this.processing=!0,this.$axios.$post("/api/libraries",this.libraryCopy).then((function(e){t.processing=!1,t.show=!1,t.$toast.success(t.$getString("ToastLibraryCreateSuccess",[e.name])),t.$store.state.libraries.currentLibraryId||t.$store.dispatch("libraries/fetch",e.id)})).catch((function(e){console.error(e),e.response&&e.response.data?t.$toast.error(e.response.data):t.$toast.error(t.$strings.ToastLibraryCreateFailed),t.processing=!1}))}},mounted:function(){},beforeDestroy:function(){}},h=(r(759),r(4)),component=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("modals-modal",{attrs:{name:"edit-library",width:800,height:"unset",processing:t.processing},scopedSlots:t._u([{key:"outer",fn:function(){return[e("div",{staticClass:"absolute top-0 left-0 p-5 w-2/3 overflow-hidden"},[e("p",{staticClass:"text-xl md:text-3xl text-white truncate"},[t._v(t._s(t.title))])])]},proxy:!0}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._v(" "),e("div",{staticClass:"absolute -top-10 left-0 z-10 w-full flex"},[t._l(t.tabs,(function(r){return[e("div",{key:r.id,staticClass:"w-28 rounded-t-lg flex items-center justify-center mr-1 cursor-pointer hover:bg-bg border-t border-l border-r border-black-300 tab text-xs sm:text-base",class:t.selectedTab===r.id?"tab-selected bg-bg pb-px":"bg-primary text-gray-400",on:{click:function(e){return t.selectTab(r.id)}}},[t._v(t._s(r.title))])]}))],2),t._v(" "),e("div",{staticClass:"px-2 md:px-4 w-full text-sm pt-2 md:pt-6 pb-20 rounded-b-lg rounded-tr-lg bg-bg shadow-lg border border-black-300 relative overflow-hidden",staticStyle:{"min-height":"400px","max-height":"80vh"}},[t.libraryCopy&&t.show?e(t.tabName,{ref:"tabComponent",tag:"component",attrs:{"is-new":!t.library,library:t.libraryCopy,"library-id":t.libraryId,processing:t.processing},on:{"update:processing":function(e){t.processing=e},update:t.updateLibrary,close:function(e){t.show=!1}}}):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"tools"!==t.selectedTab,expression:"selectedTab !== 'tools'"}],staticClass:"absolute bottom-0 left-0 w-full px-4 py-4 border-t border-white/10"},[e("div",{staticClass:"flex justify-end"},[e("ui-btn",{on:{click:t.submit}},[t._v(t._s(t.buttonText))])],1)])],1)])}),[],!1,null,"a35582f0",null);e.default=component.exports;installComponents(component,{UiBtn:r(42).default,ModalsModal:r(39).default})}}]);