(window.webpackJsonp=window.webpackJsonp||[]).push([[66,57],{642:function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));var o=r(183);var n=r(237),l=r(149);function d(t){return function(t){if(Array.isArray(t))return Object(o.a)(t)}(t)||Object(n.a)(t)||Object(l.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},749:function(t,e,r){"use strict";r.r(e);var o=r(642),n=(r(17),r(26),r(27),r(15),r(14),r(8),r(28),{props:{index:Number,width:Number,height:{type:Number,default:192},bookshelfView:{type:Number,default:0},seriesMount:{type:Object,default:function(){return null}},sortingIgnorePrefix:Boolean,orderBy:String},data:function(){return{series:null,isSelectionMode:!1,selected:!1,isHovering:!1,imageReady:!1}},computed:{bookCoverAspectRatio:function(){return this.store.getters["libraries/getBookCoverAspectRatio"]},cardWidth:function(){return this.width||this.coverHeight/this.bookCoverAspectRatio*2},coverHeight:function(){return this.height*this.sizeMultiplier},dateFormat:function(){return this.store.getters.getServerSetting("dateFormat")},labelFontSize:function(){return this.width<160?.75:.9},sizeMultiplier:function(){return this.store.getters["user/getSizeMultiplier"]},seriesId:function(){var t;return(null===(t=this.series)||void 0===t?void 0:t.id)||""},title:function(){var t;return(null===(t=this.series)||void 0===t?void 0:t.name)||""},nameIgnorePrefix:function(){var t;return(null===(t=this.series)||void 0===t?void 0:t.nameIgnorePrefix)||""},displayTitle:function(){return this.sortingIgnorePrefix?this.nameIgnorePrefix||this.title||" ":this.title||" "},displaySortLine:function(){switch(this.orderBy){case"addedAt":return this.$getString("LabelAddedDate",[this.$formatDate(this.addedAt,this.dateFormat)]);case"totalDuration":return"".concat(this.$strings.LabelDuration," ").concat(this.$elapsedPrettyExtended(this.totalDuration,!1));case"lastBookUpdated":var t=Math.max.apply(Math,Object(o.a)(this.books.map((function(t){return t.updatedAt}))).concat([0]));return"".concat(this.$strings.LabelLastBookUpdated," ").concat(this.$formatDate(t,this.dateFormat));case"lastBookAdded":var e=Math.max.apply(Math,Object(o.a)(this.books.map((function(t){return t.addedAt}))).concat([0]));return"".concat(this.$strings.LabelLastBookAdded," ").concat(this.$formatDate(e,this.dateFormat));default:return null}},books:function(){var t;return(null===(t=this.series)||void 0===t?void 0:t.books)||[]},addedAt:function(){var t;return(null===(t=this.series)||void 0===t?void 0:t.addedAt)||0},totalDuration:function(){var t;return(null===(t=this.series)||void 0===t?void 0:t.totalDuration)||0},seriesBookProgress:function(){var t=this;return this.books.map((function(e){return t.store.getters["user/getUserMediaProgress"](e.id)})).filter((function(p){return!!p}))},seriesBooksFinished:function(){return this.seriesBookProgress.filter((function(p){return p.isFinished}))},hasSeriesBookInProgress:function(){return this.seriesBookProgress.some((function(p){return!p.isFinished&&p.progress>0}))},seriesPercentInProgress:function(){if(!this.books.length)return 0;var t=0;return this.seriesBookProgress.forEach((function(progress){t+=progress.isFinished?1:progress.progress||0})),t/=this.books.length,Math.min(1,Math.max(0,t))},isSeriesFinished:function(){return this.books.length===this.seriesBooksFinished.length},store:function(){return this.$store||this.$nuxt.$store},currentLibraryId:function(){return this.store.state.libraries.currentLibraryId},seriesBooksRoute:function(){return"/library/".concat(this.currentLibraryId,"/series/").concat(this.seriesId)},hasValidCovers:function(){return!!this.books.map((function(t){return t.media.coverPath})).length},isAlternativeBookshelfView:function(){var t=this.$constants||this.$nuxt.$constants;return this.bookshelfView==t.BookshelfView.DETAIL},rssFeed:function(){var t;return null===(t=this.series)||void 0===t?void 0:t.rssFeed}},methods:{setEntity:function(t){this.series=t},setSelectionMode:function(t){this.isSelectionMode=t},mouseover:function(){this.isHovering=!0},mouseleave:function(){this.isHovering=!1},clickCard:function(){this.series&&(this.$router||this.$nuxt.$router).push("/library/".concat(this.currentLibraryId,"/series/").concat(this.seriesId))},imageLoaded:function(){this.imageReady=!0},destroy:function(){this.$destroy(),this.$el&&this.$el.parentNode?this.$el.parentNode.removeChild(this.$el):this.$el&&this.$el.remove&&this.$el.remove()}},mounted:function(){this.seriesMount&&this.setEntity(this.seriesMount)},beforeDestroy:function(){}}),l=r(4),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("div",{ref:"card",staticClass:"absolute rounded-xs z-30 cursor-pointer",style:{width:t.cardWidth+"px"},attrs:{"cy-id":"card",id:"series-card-".concat(t.index),tabindex:"0"},on:{mousedown:function(t){t.preventDefault()},mouseup:function(t){t.preventDefault()},mousemove:function(t){t.preventDefault()},mouseover:t.mouseover,mouseleave:t.mouseleave,click:t.clickCard}},[e("div",{staticClass:"relative",style:{height:t.coverHeight+"px"},attrs:{"cy-id":"covers-area"}},[e("div",{staticClass:"absolute top-0 left-0 w-full box-shadow-book shadow-height"}),t._v(" "),e("div",{staticClass:"w-full h-full bg-primary relative rounded-sm overflow-hidden z-0"},[t.series?e("covers-group-cover",{ref:"cover",attrs:{id:t.seriesId,name:t.displayTitle,"book-items":t.books,width:t.cardWidth,height:t.coverHeight,"book-cover-aspect-ratio":t.bookCoverAspectRatio}}):t._e()],1),t._v(" "),e("div",{staticClass:"absolute rounded-lg bg-black/90 box-shadow-md z-20",staticStyle:{"background-color":"#cd9d49dd"},style:{top:"0.375em",right:"0.375em",padding:"0.1em 0.25em"},attrs:{"cy-id":"seriesLengthMarker"}},[e("p",{style:{fontSize:"0.8em"},attrs:{role:"status","aria-label":t.$strings.LabelNumberOfBooks}},[t._v(t._s(t.books.length))])]),t._v(" "),t.seriesPercentInProgress>0?e("div",{staticClass:"absolute bottom-0 left-0 h-1e shadow-xs max-w-full z-10 rounded-b w-full box-shadow-progressbar",class:t.isSeriesFinished?"bg-success":"bg-yellow-400",style:{width:100*t.seriesPercentInProgress+"%"},attrs:{"cy-id":"seriesProgressBar"}}):t._e(),t._v(" "),t.hasValidCovers?e("div",{staticClass:"bg-black/60 absolute top-0 left-0 w-full h-full flex items-center justify-center text-center transition-opacity",class:t.isHovering?"":"opacity-0",style:{padding:"1em"},attrs:{"cy-id":"hoveringDisplayTitle","aria-hidden":"true"}},[e("p",{style:{fontSize:"1.2em"}},[t._v(t._s(t.displayTitle))])]):t._e(),t._v(" "),!t.isHovering&&t.rssFeed?e("span",{staticClass:"absolute z-10 material-symbols text-success",style:{top:"0.5em",left:"0.5em",fontSize:"1.5em"},attrs:{"cy-id":"rssFeedMarker"}},[t._v("rss_feed")]):t._e()]),t._v(" "),t.isAlternativeBookshelfView?e("div",{staticClass:"relative z-30 left-0 right-0 mx-auto py-1e rounded-md text-center",attrs:{"cy-id":"detailBottomText"}},[e("p",{staticClass:"truncate",style:{fontSize:t.labelFontSize+"em"},attrs:{"cy-id":"detailBottomDisplayTitle"}},[t._v(t._s(t.displayTitle))]),t._v(" "),t.displaySortLine?e("p",{staticClass:"truncate text-gray-400",style:{fontSize:"0.8em"},attrs:{"cy-id":"detailBottomSortLine"}},[t._v(t._s(t.displaySortLine))]):t._e()]):e("div",{staticClass:"categoryPlacard absolute z-10 left-0 right-0 mx-auto -bottom-6e h-6e rounded-md text-center",style:{width:Math.min(200,t.cardWidth)+"px"},attrs:{"cy-id":"standardBottomText"}},[e("div",{staticClass:"w-full h-full shinyBlack flex items-center justify-center rounded-xs border",style:{padding:"0em 0.5em"}},[e("p",{staticClass:"truncate",style:{fontSize:t.labelFontSize+"em"},attrs:{"cy-id":"standardBottomDisplayTitle"}},[t._v(t._s(t.displayTitle))])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CoversGroupCover:r(359).default})}}]);