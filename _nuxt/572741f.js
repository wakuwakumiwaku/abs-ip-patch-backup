(window.webpackJsonp=window.webpackJsonp||[]).push([[136,78,120],{688:function(t,e,l){"use strict";l.r(e);l(35),l(63),l(17),l(8),l(40);var n={props:{value:Boolean,audioFile:{type:Object,default:function(){}},libraryItemId:String},data:function(){return{probingFile:!1,ffprobeData:null,hasCopied:null}},watch:{show:function(t){t&&(this.ffprobeData=null,this.probingFile=!1)}},computed:{show:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},metadata:function(){var t;return(null===(t=this.audioFile)||void 0===t?void 0:t.metadata)||{}},metaTags:function(){var t;return(null===(t=this.audioFile)||void 0===t?void 0:t.metaTags)||{}},userIsAdminOrUp:function(){return this.$store.getters["user/getIsAdminOrUp"]},prettyFfprobeData:function(){return this.ffprobeData?JSON.stringify(this.ffprobeData,null,2):""}},methods:{getFFProbeData:function(){var t=this;this.probingFile=!0,this.$axios.$get("/api/items/".concat(this.libraryItemId,"/ffprobe/").concat(this.audioFile.ino)).then((function(data){console.log("Got ffprobe data",data),t.ffprobeData=data})).catch((function(e){console.error("Failed to get ffprobe data",e),t.$toast.error(t.$strings.ToastFailedToLoadData)})).finally((function(){t.probingFile=!1}))},copyToClipboard:function(){var t=this;clearTimeout(this.hasCopied),this.$copyToClipboard(this.prettyFfprobeData).then((function(e){t.hasCopied=setTimeout((function(){t.hasCopied=null}),2e3)}))}},mounted:function(){}},o=l(4),component=Object(o.a)(n,(function(){var t,e=this,l=e._self._c;return l("modals-modal",{attrs:{name:"audiofile-data-modal",width:700,height:"unset"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e.audioFile?l("div",{ref:"container",staticClass:"w-full rounded-lg bg-bg box-shadow-md overflow-y-auto overflow-x-hidden p-6",staticStyle:{"max-height":"80vh"}},[l("div",{staticClass:"flex items-center justify-between"},[l("p",{staticClass:"text-base text-gray-200 truncate"},[e._v(e._s(e.metadata.filename))]),e._v(" "),e.ffprobeData?l("ui-btn",{staticClass:"ml-2",attrs:{small:""},on:{click:function(t){e.ffprobeData=null}}},[e._v(e._s(e.$strings.ButtonReset))]):e.userIsAdminOrUp?l("ui-btn",{staticClass:"ml-2",attrs:{small:"",loading:e.probingFile},on:{click:e.getFFProbeData}},[e._v(e._s(e.$strings.ButtonProbeAudioFile))]):e._e()],1),e._v(" "),l("div",{staticClass:"w-full h-px bg-white/10 my-4"}),e._v(" "),e.ffprobeData?l("div",{staticClass:"w-full"},[l("div",{staticClass:"relative"},[l("ui-textarea-with-label",{staticClass:"text-xs",attrs:{value:e.prettyFfprobeData,readonly:"",rows:30}}),e._v(" "),l("button",{staticClass:"absolute top-4 right-4",class:e.hasCopied?"text-success":"text-gray-400 hover:text-white",on:{click:function(t){return t.stopPropagation(),e.copyToClipboard.apply(null,arguments)}}},[l("span",{staticClass:"material-symbols"},[e._v(e._s(e.hasCopied?"done":"content_copy"))])])],1)]):[l("ui-text-input-with-label",{staticClass:"mb-4 text-sm",attrs:{value:e.metadata.path,readonly:"",label:e.$strings.LabelPath}}),e._v(" "),l("div",{staticClass:"flex flex-col sm:flex-row text-sm"},[l("div",{staticClass:"w-full sm:w-1/2"},[l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelSize)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.$bytesPretty(e.metadata.size)))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelDuration)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.$secondsToTimestamp(e.audioFile.duration)))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v(e._s(e.$strings.LabelFormat))]),e._v(" "),l("p",[e._v(e._s(e.audioFile.format))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelChapters)+"\n            ")]),e._v(" "),l("p",[e._v(e._s((null===(t=e.audioFile.chapters)||void 0===t?void 0:t.length)||0))])]),e._v(" "),e.audioFile.embeddedCoverArt?l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelEmbeddedCover)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.audioFile.embeddedCoverArt||""))])]):e._e()]),e._v(" "),l("div",{staticClass:"w-full sm:w-1/2"},[l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelCodec)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.audioFile.codec))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelChannels)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.audioFile.channels)+" ("+e._s(e.audioFile.channelLayout)+")")])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelBitrate)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.$bytesPretty(e.audioFile.bitRate||0,0)))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v(e._s(e.$strings.LabelTimeBase))]),e._v(" "),l("p",[e._v(e._s(e.audioFile.timeBase))])]),e._v(" "),e.audioFile.language?l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelLanguage)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.audioFile.language||""))])]):e._e()])]),e._v(" "),l("div",{staticClass:"w-full h-px bg-white/10 my-4"}),e._v(" "),l("p",{staticClass:"font-bold mb-2"},[e._v(e._s(e.$strings.LabelMetaTags))]),e._v(" "),e._l(e.metaTags,(function(t,n){return l("div",{key:n,staticClass:"flex mb-1 text-sm"},[l("p",{staticClass:"w-32 min-w-32 text-black-50 mb-1"},[e._v("\n          "+e._s(n.replace("tag",""))+"\n        ")]),e._v(" "),l("p",[e._v(e._s(t))])])}))]],2):e._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiBtn:l(42).default,UiTextInputWithLabel:l(121).default,UiTextareaWithLabel:l(186).default,ModalsModal:l(39).default})},744:function(t,e,l){"use strict";l.r(e);l(17);var n={props:{libraryItemId:String,showFullPath:Boolean,track:{type:Object,default:function(){}}},data:function(){return{}},computed:{userToken:function(){return this.$store.getters["user/getToken"]},userCanDownload:function(){return this.$store.getters["user/getUserCanDownload"]},userCanDelete:function(){return this.$store.getters["user/getUserCanDelete"]},userIsAdmin:function(){return this.$store.getters["user/getIsAdminOrUp"]},contextMenuItems:function(){var t=[];return this.userCanDownload&&t.push({text:this.$strings.LabelDownload,action:"download"}),this.userCanDelete&&t.push({text:this.$strings.ButtonDelete,action:"delete"}),this.userIsAdmin&&t.push({text:this.$strings.LabelMoreInfo,action:"more"}),t},downloadUrl:function(){return"".concat("/audiobookshelf","/api/items/").concat(this.libraryItemId,"/file/").concat(this.track.audioFile.ino,"/download?token=").concat(this.userToken)}},methods:{contextMenuAction:function(t){var e=t.action;"delete"===e?this.deleteLibraryFile():"download"===e?this.downloadLibraryFile():"more"===e&&this.$emit("showMore",this.track.audioFile)},deleteLibraryFile:function(){var t=this,e={message:this.$strings.MessageConfirmDeleteFile,callback:function(e){e&&t.$axios.$delete("/api/items/".concat(t.libraryItemId,"/file/").concat(t.track.audioFile.ino)).then((function(){t.$toast.success(t.$strings.ToastDeleteFileSuccess)})).catch((function(e){console.error("Failed to delete file",e),t.$toast.error(t.$strings.ToastDeleteFileFailed)}))},type:"yesNo"};this.$store.commit("globals/setConfirmPrompt",e)},downloadLibraryFile:function(){this.$downloadFile(this.downloadUrl,this.track.metadata.filename)}},mounted:function(){}},o=l(4),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"text-center"},[e("p",[t._v(t._s(t.track.index))])]),t._v(" "),e("td",{staticClass:"font-sans"},[t._v(t._s(t.showFullPath?t.track.metadata.path:t.track.metadata.filename))]),t._v(" "),t.showFullPath?t._e():e("td",{staticClass:"hidden lg:table-cell"},[t._v("\n    "+t._s(t.track.audioFile.codec||"")+"\n  ")]),t._v(" "),t.showFullPath?t._e():e("td",{staticClass:"hidden xl:table-cell"},[t._v("\n    "+t._s(t.$bytesPretty(t.track.audioFile.bitRate||0,0))+"\n  ")]),t._v(" "),e("td",{staticClass:"hidden md:table-cell"},[t._v("\n    "+t._s(t.$bytesPretty(t.track.metadata.size))+"\n  ")]),t._v(" "),e("td",{staticClass:"hidden sm:table-cell"},[t._v("\n    "+t._s(t.$secondsToTimestamp(t.track.duration))+"\n  ")]),t._v(" "),t.contextMenuItems.length?e("td",{staticClass:"text-center"},[e("ui-context-menu-dropdown",{attrs:{items:t.contextMenuItems,"menu-width":110},on:{action:t.contextMenuAction}})],1):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiContextMenuDropdown:l(349).default})},857:function(t,e,l){"use strict";l.r(e);l(14);var n={props:{title:{type:String,default:"Audio Tracks"},tracks:{type:Array,default:function(){return[]}},libraryItemId:String,isFile:Boolean},data:function(){return{showTracks:!1,showFullPath:!1,selectedAudioFile:null,showAudioFileDataModal:!1}},computed:{userCanDownload:function(){return this.$store.getters["user/getUserCanDownload"]},userCanUpdate:function(){return this.$store.getters["user/getUserCanUpdate"]},userCanDelete:function(){return this.$store.getters["user/getUserCanDelete"]},userIsAdmin:function(){return this.$store.getters["user/getIsAdminOrUp"]}},methods:{toggleFullPath:function(){this.showFullPath=!this.showFullPath,localStorage.setItem("showFullPath",this.showFullPath?1:0)},clickBar:function(){this.showTracks=!this.showTracks},showMore:function(t){this.selectedAudioFile=t,this.showAudioFileDataModal=!0}},mounted:function(){this.userIsAdmin&&(this.showFullPath=!!Number(localStorage.getItem("showFullPath")||0))}},o=l(4),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full my-2"},[e("div",{staticClass:"w-full bg-primary px-4 md:px-6 py-2 flex items-center cursor-pointer",on:{click:function(e){return e.stopPropagation(),t.clickBar.apply(null,arguments)}}},[e("p",{staticClass:"pr-2 md:pr-4"},[t._v(t._s(t.title))]),t._v(" "),e("div",{staticClass:"h-5 md:h-7 w-5 md:w-7 rounded-full bg-white/10 flex items-center justify-center"},[e("span",{staticClass:"text-sm font-mono"},[t._v(t._s(t.tracks.length))])]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),t.userIsAdmin?e("ui-btn",{staticClass:"mr-2 hidden md:block",attrs:{small:"",color:t.showFullPath?"bg-gray-600":"bg-primary"},on:{click:function(e){return e.stopPropagation(),t.toggleFullPath.apply(null,arguments)}}},[t._v(t._s(t.$strings.ButtonFullPath))]):t._e(),t._v(" "),t.userCanUpdate&&!t.isFile?e("nuxt-link",{staticClass:"mr-2 md:mr-4",attrs:{to:"/audiobook/".concat(t.libraryItemId,"/edit")},on:{mousedown:function(t){t.preventDefault()}}},[e("ui-btn",{attrs:{small:"",color:"bg-primary"}},[t._v(t._s(t.$strings.ButtonManageTracks))])],1):t._e(),t._v(" "),e("div",{staticClass:"cursor-pointer h-10 w-10 rounded-full hover:bg-black-400 flex justify-center items-center duration-500",class:t.showTracks?"transform rotate-180":""},[e("span",{staticClass:"material-symbols text-4xl"},[t._v("îŒ“")])])],1),t._v(" "),e("transition",{attrs:{name:"slide"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showTracks,expression:"showTracks"}],staticClass:"w-full"},[e("table",{staticClass:"text-sm tracksTable"},[e("tr",[e("th",{staticClass:"w-10"},[t._v("#")]),t._v(" "),e("th",{staticClass:"text-left"},[t._v(t._s(t.$strings.LabelFilename))]),t._v(" "),t.showFullPath?t._e():e("th",{staticClass:"text-left w-20 hidden lg:table-cell"},[t._v(t._s(t.$strings.LabelCodec))]),t._v(" "),t.showFullPath?t._e():e("th",{staticClass:"text-left w-20 hidden xl:table-cell"},[t._v(t._s(t.$strings.LabelBitrate))]),t._v(" "),e("th",{staticClass:"text-left w-20 hidden md:table-cell"},[t._v(t._s(t.$strings.LabelSize))]),t._v(" "),e("th",{staticClass:"text-left w-20 hidden sm:table-cell"},[t._v(t._s(t.$strings.LabelDuration))]),t._v(" "),e("th",{staticClass:"text-center w-16"})]),t._v(" "),t._l(t.tracks,(function(track){return[e("tables-audio-tracks-table-row",{key:track.index,attrs:{track:track,"library-item-id":t.libraryItemId,showFullPath:t.showFullPath},on:{showMore:t.showMore}})]}))],2)])]),t._v(" "),e("modals-audio-file-data-modal",{attrs:{"library-item-id":t.libraryItemId,"audio-file":t.selectedAudioFile},model:{value:t.showAudioFileDataModal,callback:function(e){t.showAudioFileDataModal=e},expression:"showAudioFileDataModal"}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiBtn:l(42).default,TablesAudioTracksTableRow:l(744).default,ModalsAudioFileDataModal:l(688).default})}}]);