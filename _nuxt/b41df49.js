(window.webpackJsonp=window.webpackJsonp||[]).push([[197,57,115],{1075:function(t,e,r){"use strict";r.r(e);r(17),r(15),r(189);var n=r(7),o=(r(57),r(29),{asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.redirect,n=t.store,o=t.params,n.getters["user/getIsAdminOrUp"]){e.next=4;break}return r("/"),e.abrupt("return");case 4:return l=o.library,e.next=7,n.dispatch("libraries/fetch",l);case 7:if(e.sent){e.next=10;break}return e.abrupt("return",r('/oops?message=Library "'.concat(l,'" not found')));case 10:return e.abrupt("return",{});case 11:case"end":return e.stop()}}),e)})))()},data:function(){return{libraryStats:null}},watch:{currentLibraryId:function(t,e){t&&this.init()}},computed:{streamLibraryItem:function(){return this.$store.state.streamLibraryItem},user:function(){return this.$store.state.user.user},totalItems:function(){var t;return(null===(t=this.libraryStats)||void 0===t?void 0:t.totalItems)||0},genresWithCount:function(){var t;return(null===(t=this.libraryStats)||void 0===t?void 0:t.genresWithCount)||[]},top5Genres:function(){var t;return(null===(t=this.genresWithCount)||void 0===t?void 0:t.slice(0,5))||[]},top10LongestItems:function(){var t;return(null===(t=this.libraryStats)||void 0===t?void 0:t.longestItems)||[]},longestItemDuration:function(){return this.top10LongestItems.length?this.top10LongestItems[0].duration:0},top10LargestItems:function(){var t;return(null===(t=this.libraryStats)||void 0===t?void 0:t.largestItems)||[]},largestItemSize:function(){return this.top10LargestItems.length?this.top10LargestItems[0].size:0},authorsWithCount:function(){var t;return(null===(t=this.libraryStats)||void 0===t?void 0:t.authorsWithCount)||[]},mostUsedAuthorCount:function(){return this.authorsWithCount.length?this.authorsWithCount[0].count:0},top10Authors:function(){var t;return(null===(t=this.authorsWithCount)||void 0===t?void 0:t.slice(0,10))||[]},currentLibraryId:function(){return this.$store.state.libraries.currentLibraryId},currentLibraryName:function(){return this.$store.getters["libraries/getCurrentLibraryName"]},currentLibraryMediaType:function(){return this.$store.getters["libraries/getCurrentLibraryMediaType"]},isBookLibrary:function(){return"book"===this.currentLibraryMediaType}},methods:{init:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/api/libraries/".concat(t.currentLibraryId,"/stats")).catch((function(e){console.error("Failed to get library stats",e);var r=e.response&&e.response.data||"Unknown Error";t.$toast.error("Failed to get library stats: ".concat(r))}));case 2:t.libraryStats=e.sent;case 3:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.init()}}),l=r(4),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"page relative",class:t.streamLibraryItem?"streaming":""},[e("app-book-shelf-toolbar",{attrs:{page:"library-stats","is-home":""}}),t._v(" "),e("div",{staticClass:"w-full h-full px-1 py-4 md:p-8 relative overflow-y-auto",attrs:{id:"bookshelf"}},[e("div",{staticClass:"w-full max-w-4xl mx-auto"},[t.totalItems?e("stats-preview-icons",{attrs:{"library-stats":t.libraryStats}}):t._e(),t._v(" "),e("div",{staticClass:"flex lg:flex-row flex-wrap justify-between flex-col mt-8"},[e("div",{staticClass:"w-80 my-6 mx-auto"},[e("h1",{staticClass:"text-2xl mb-4"},[t._v(t._s(t.$strings.HeaderStatsTop5Genres))]),t._v(" "),t.top5Genres.length?t._e():e("p",[t._v(t._s(t.$strings.MessageNoGenres))]),t._v(" "),t._l(t.top5Genres,(function(r){return[e("div",{key:r.genre,staticClass:"w-full py-2"},[e("div",{staticClass:"flex items-end mb-1"},[e("p",{staticClass:"text-2xl font-bold"},[t._v(t._s(Math.round(100*r.count/t.totalItems))+" %")]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),e("nuxt-link",{staticClass:"text-base text-white/70 hover:underline",attrs:{to:"/library/".concat(t.currentLibraryId,"/bookshelf?filter=genres.").concat(t.$encode(r.genre))}},[t._v("\n                  "+t._s(r.genre)+"\n                ")])],1),t._v(" "),e("div",{staticClass:"w-full rounded-full h-3 bg-primary/50 overflow-hidden"},[e("div",{staticClass:"bg-yellow-400 h-full rounded-full",style:{width:Math.round(100*r.count/t.totalItems)+"%"}})])])]}))],2),t._v(" "),t.isBookLibrary?e("div",{staticClass:"w-80 my-6 mx-auto"},[e("h1",{staticClass:"text-2xl mb-4"},[t._v(t._s(t.$strings.HeaderStatsTop10Authors))]),t._v(" "),t.top10Authors.length?t._e():e("p",[t._v(t._s(t.$strings.MessageNoAuthors))]),t._v(" "),t._l(t.top10Authors,(function(r,n){return[e("div",{key:r.id,staticClass:"w-full py-2"},[e("div",{staticClass:"flex items-center mb-1"},[e("p",{staticClass:"text-sm text-white/70 w-36 pr-2 truncate"},[t._v("\n                  "+t._s(n+1)+".    "),e("nuxt-link",{staticClass:"hover:underline",attrs:{to:"/author/".concat(r.id)}},[t._v(t._s(r.name))])],1),t._v(" "),e("div",{staticClass:"grow rounded-full h-2.5 bg-primary/0 overflow-hidden"},[e("div",{staticClass:"bg-yellow-400 h-full rounded-full",style:{width:Math.round(100*r.count/t.mostUsedAuthorCount)+"%"}})]),t._v(" "),e("div",{staticClass:"w-4 ml-3"},[e("p",{staticClass:"text-sm font-bold"},[t._v(t._s(r.count))])])])])]}))],2):t._e(),t._v(" "),e("div",{staticClass:"w-80 my-6 mx-auto"},[e("h1",{staticClass:"text-2xl mb-4"},[t._v(t._s(t.$strings.HeaderStatsLongestItems))]),t._v(" "),t.top10LongestItems.length?t._e():e("p",[t._v(t._s(t.$strings.MessageNoItems))]),t._v(" "),t._l(t.top10LongestItems,(function(r,n){return[e("div",{key:n,staticClass:"w-full py-2"},[e("div",{staticClass:"flex items-center mb-1"},[e("p",{staticClass:"text-sm text-white/70 w-44 pr-2 truncate"},[t._v("\n                  "+t._s(n+1)+".    "),e("nuxt-link",{staticClass:"hover:underline",attrs:{to:"/item/".concat(r.id)}},[t._v(t._s(r.title))])],1),t._v(" "),e("div",{staticClass:"grow rounded-full h-2.5 bg-primary/0 overflow-hidden"},[e("div",{staticClass:"bg-yellow-400 h-full rounded-full",style:{width:Math.round(100*r.duration/t.longestItemDuration)+"%"}})]),t._v(" "),e("div",{staticClass:"w-4 ml-3"},[e("p",{staticClass:"text-sm font-bold"},[t._v(t._s((r.duration/3600).toFixed(1)))])])])])]}))],2),t._v(" "),e("div",{staticClass:"w-80 my-6 mx-auto"},[e("h1",{staticClass:"text-2xl mb-4"},[t._v(t._s(t.$strings.HeaderStatsLargestItems))]),t._v(" "),t.top10LargestItems.length?t._e():e("p",[t._v(t._s(t.$strings.MessageNoItems))]),t._v(" "),t._l(t.top10LargestItems,(function(r,n){return[e("div",{key:n,staticClass:"w-full py-2"},[e("div",{staticClass:"flex items-center mb-1"},[e("p",{staticClass:"text-sm text-white/70 w-44 pr-2 truncate"},[t._v("\n                  "+t._s(n+1)+".    "),e("nuxt-link",{staticClass:"hover:underline",attrs:{to:"/item/".concat(r.id)}},[t._v(t._s(r.title))])],1),t._v(" "),e("div",{staticClass:"grow rounded-full h-2.5 bg-primary/0 overflow-hidden"},[e("div",{staticClass:"bg-yellow-400 h-full rounded-full",style:{width:Math.round(100*r.size/t.largestItemSize)+"%"}})]),t._v(" "),e("div",{staticClass:"w-4 ml-3"},[e("p",{staticClass:"text-sm font-bold whitespace-nowrap"},[t._v(t._s(t.$bytesPretty(r.size)))])])])])]}))],2)])],1)])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AppBookShelfToolbar:r(689).default,StatsPreviewIcons:r(873).default})},642:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(183);var o=r(237),l=r(149);function c(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||Object(o.a)(t)||Object(l.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},873:function(t,e,r){"use strict";r.r(e);var n={props:{libraryStats:{type:Object,default:function(){}}},data:function(){return{}},computed:{currentLibraryMediaType:function(){return this.$store.getters["libraries/getCurrentLibraryMediaType"]},isBookLibrary:function(){return"book"===this.currentLibraryMediaType},user:function(){return this.$store.state.user.user},totalItems:function(){var t;return(null===(t=this.libraryStats)||void 0===t?void 0:t.totalItems)||0},totalAuthors:function(){var t;return(null===(t=this.libraryStats)||void 0===t?void 0:t.totalAuthors)||0},numAudioTracks:function(){var t;return(null===(t=this.libraryStats)||void 0===t?void 0:t.numAudioTracks)||0},totalDuration:function(){var t;return(null===(t=this.libraryStats)||void 0===t?void 0:t.totalDuration)||0},totalHours:function(){return Math.round(this.totalDuration/3600)},totalSizePretty:function(){var t,e=(null===(t=this.libraryStats)||void 0===t?void 0:t.totalSize)||0;return this.$bytesPretty(e,1)},totalSizeNum:function(){return this.totalSizePretty.split(" ")[0]},totalSizeMod:function(){return this.totalSizePretty.split(" ")[1]},useOverallHours:function(){return this.totalHours<1e4},totalTime:function(){return this.useOverallHours?this.totalHours:Math.round(this.totalHours/24)}},methods:{},mounted:function(){}},o=r(4),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-wrap justify-center mt-6"},[e("div",{staticClass:"flex p-2"},[e("span",{staticClass:"material-symbols text-5xl py-1"},[t._v("newsstand")]),t._v(" "),e("div",{staticClass:"px-1"},[e("p",{staticClass:"text-4.5xl leading-none font-bold"},[t._v(t._s(t.$formatNumber(t.totalItems)))]),t._v(" "),e("p",{staticClass:"text-xs md:text-sm text-white/80"},[t._v(t._s(t.$strings.LabelStatsItemsInLibrary))])])]),t._v(" "),e("div",{staticClass:"flex p-2"},[e("span",{staticClass:"material-symbols text-5xl py-1"},[t._v("show_chart")]),t._v(" "),e("div",{staticClass:"px-1"},[e("p",{staticClass:"text-4.5xl leading-none font-bold"},[t._v(t._s(t.$formatNumber(t.totalTime)))]),t._v(" "),e("p",{staticClass:"text-xs md:text-sm text-white/80"},[t._v(t._s(t.useOverallHours?t.$strings.LabelStatsOverallHours:t.$strings.LabelStatsOverallDays))])])]),t._v(" "),t.isBookLibrary?e("div",{staticClass:"flex p-2"},[e("span",{staticClass:"material-symbols text-5xl py-1"},[t._v("person")]),t._v(" "),e("div",{staticClass:"px-1"},[e("p",{staticClass:"text-4.5xl leading-none font-bold"},[t._v(t._s(t.$formatNumber(t.totalAuthors)))]),t._v(" "),e("p",{staticClass:"text-xs md:text-sm text-white/80"},[t._v(t._s(t.$strings.LabelStatsAuthors))])])]):t._e(),t._v(" "),e("div",{staticClass:"flex p-2"},[e("span",{staticClass:"material-symbols text-5xl pt-1"},[t._v("insert_drive_file")]),t._v(" "),e("div",{staticClass:"px-1"},[e("p",{staticClass:"text-4.5xl leading-none font-bold"},[t._v(t._s(t.$formatNumber(t.totalSizeNum)))]),t._v(" "),e("p",{staticClass:"text-xs md:text-sm text-white/80"},[t._v(t._s(t.$strings.LabelSize)+" ("+t._s(t.totalSizeMod)+")")])])]),t._v(" "),e("div",{staticClass:"flex p-2"},[e("span",{staticClass:"material-symbols text-5xl pt-1"},[t._v("audio_file")]),t._v(" "),e("div",{staticClass:"px-1"},[e("p",{staticClass:"text-4.5xl leading-none font-bold"},[t._v(t._s(t.$formatNumber(t.numAudioTracks)))]),t._v(" "),e("p",{staticClass:"text-xs md:text-sm text-white/80"},[t._v(t._s(t.$strings.LabelStatsAudioTracks))])])])])}),[],!1,null,null,null);e.default=component.exports}}]);