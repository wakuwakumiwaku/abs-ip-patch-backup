(window.webpackJsonp=window.webpackJsonp||[]).push([[151,146],{679:function(t,e,n){"use strict";n.r(e);var r={props:{value:String,label:String,disabled:{type:Boolean,default:!1}},data:function(){return{}},computed:{content:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{trixFileAccept:function(t){t.preventDefault()},blur:function(){this.$refs.input&&this.$refs.input.blur&&this.$refs.input.blur()}},mounted:function(){},beforeDestroy:function(){}},l=n(4),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"default-style"},[t.label?e("p",{staticClass:"px-1 text-sm font-semibold",class:{"text-gray-400":t.disabled},staticStyle:{"margin-top":"0","margin-bottom":"0.125em"}},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e(),t._v(" "),e("ui-vue-trix",{ref:"input",attrs:{"disabled-editor":t.disabled},on:{"trix-file-accept":t.trixFileAccept},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiVueTrix:n(702).default})},735:function(t,e,n){"use strict";n.r(e);n(22),n(43);var r=n(16),l=n(642);n(84),n(17),n(26),n(33),n(41),n(56),n(83),n(27),n(57),n(15),n(38),n(44),n(45),n(8),n(35),n(59),n(656),n(52),n(62),n(147),n(658),n(659),n(660),n(662),n(663),n(664),n(665),n(666),n(667),n(668),n(669),n(670),n(671),n(672),n(673),n(674),n(28),n(58);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(t){if("string"==typeof t)return c(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,l=function(){};return{s:l,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function c(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=Array(a);e<a;e++)n[e]=t[e];return n}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={props:{libraryItem:{type:Object,default:function(){}}},data:function(){return{details:{title:null,subtitle:null,description:null,authors:[],narrators:[],series:[],publishedYear:null,publisher:null,language:null,isbn:null,asin:null,genres:[],explicit:!1,abridged:!1},newTags:[]}},watch:{libraryItem:{immediate:!0,handler:function(t){t&&this.init()}}},computed:{media:function(){return this.libraryItem&&this.libraryItem.media||{}},mediaMetadata:function(){return this.media.metadata||{}},genres:function(){return this.filterData.genres||[]},tags:function(){return this.filterData.tags||[]},series:function(){return this.filterData.series||[]},narrators:function(){return this.filterData.narrators||[]},filterData:function(){return this.$store.state.libraries.filterData||{}}},methods:{handleInputChange:function(){this.$emit("change",{libraryItemId:this.libraryItem.id,hasChanges:this.checkForChanges().hasChanges})},getDetails:function(){return this.forceBlur(),this.checkForChanges()},getTitleAndAuthorName:function(){return this.forceBlur(),{title:this.details.title,author:(this.details.authors||[]).map((function(t){return t.name})).join(", ")}},mapBatchDetails:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"overwrite",r=function(r){"append"===n?"tags"===r?e.newTags=Object(l.a)(new Set(e.newTags.concat(t.tags))):"genres"===r||"narrators"===r?e.details[r]=Object(l.a)(new Set(e.details[r].concat(t[r]))):"authors"!==r&&"series"!==r||t[r].forEach((function(t){e.details[r].find((function(e){return e.name.toLowerCase()==t.name.toLowerCase().trim()||e.id==t.id}))||e.details[r].push(h({},t))})):"tags"===r?e.newTags=Object(l.a)(t.tags):e.details[r]="genres"===r||"narrators"===r?Object(l.a)(t[r]):"authors"===r||"series"===r?t[r].map((function(i){return h({},i)})):t[r]};for(var o in t)r(o);this.handleInputChange()},forceBlur:function(){this.$refs.titleInput&&this.$refs.titleInput.blur(),this.$refs.subtitleInput&&this.$refs.subtitleInput.blur(),this.$refs.publishYearInput&&this.$refs.publishYearInput.blur(),this.$refs.descriptionInput&&this.$refs.descriptionInput.blur(),this.$refs.isbnInput&&this.$refs.isbnInput.blur(),this.$refs.asinInput&&this.$refs.asinInput.blur(),this.$refs.publisherInput&&this.$refs.publisherInput.blur(),this.$refs.languageInput&&this.$refs.languageInput.blur(),this.$refs.authorsSelect&&this.$refs.authorsSelect.isFocused&&this.$refs.authorsSelect.forceBlur(),this.$refs.narratorsSelect&&this.$refs.narratorsSelect.isFocused&&this.$refs.narratorsSelect.forceBlur(),this.$refs.genresSelect&&this.$refs.genresSelect.isFocused&&this.$refs.genresSelect.forceBlur(),this.$refs.tagsSelect&&this.$refs.tagsSelect.isFocused&&this.$refs.tagsSelect.forceBlur()},stringArrayEqual:function(t,e){if(t.length!==e.length)return!1;var n,r=o(t);try{for(r.s();!(n=r.n()).done;){var l=n.value;if(!e.includes(l))return!1}}catch(t){r.e(t)}finally{r.f()}return!0},objectArrayEqual:function(t,e){var n=function(t){return Symbol.iterator in Object(t)};if(!n(t)||!n(e))throw console.error(t,e),new Error("Invalid arrays passed in");if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++){var r=t[i],l=e[i];if(!r||!l)return!1;for(var o in r)if(r[o]!==l[o])return!1}return!0},checkForChanges:function(){var t={};for(var e in this.details){var n=this.details[e],r=this.mediaMetadata[e];!n&&r||n&&!r?t[e]=n:"narrators"===e||"genres"===e?this.stringArrayEqual(n,r)||(t[e]=Object(l.a)(n)):"authors"===e||"series"===e?this.objectArrayEqual(n,r)||(t[e]=n.map((function(t){return h({},t)}))):n&&n!=r&&(t[e]=n)}var o={};return Object.keys(t).length&&(o.metadata=t),this.stringArrayEqual(this.newTags,this.media.tags||[])||(o.tags=Object(l.a)(this.newTags)),{updatePayload:o,hasChanges:!!Object.keys(o).length}},init:function(){this.details.title=this.mediaMetadata.title,this.details.subtitle=this.mediaMetadata.subtitle,this.details.description=this.mediaMetadata.description,this.details.authors=(this.mediaMetadata.authors||[]).map((function(t){return h({},t)})),this.details.narrators=Object(l.a)(this.mediaMetadata.narrators||[]),this.details.genres=Object(l.a)(this.mediaMetadata.genres||[]),this.details.series=(this.mediaMetadata.series||[]).map((function(t){return h({},t)})),this.details.publishedYear=this.mediaMetadata.publishedYear,this.details.publisher=this.mediaMetadata.publisher||null,this.details.language=this.mediaMetadata.language||null,this.details.isbn=this.mediaMetadata.isbn||null,this.details.asin=this.mediaMetadata.asin||null,this.details.explicit=!!this.mediaMetadata.explicit,this.details.abridged=!!this.mediaMetadata.abridged,this.newTags=Object(l.a)(this.media.tags||[])},submitForm:function(){this.$emit("submit")}},mounted:function(){}},m=f,v=n(4),component=Object(v.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full h-full relative"},[e("form",{staticClass:"w-full h-full px-2 md:px-4 py-6",on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("div",{staticClass:"flex flex-wrap -mx-1"},[e("div",{staticClass:"w-full md:w-1/2 px-1"},[e("ui-text-input-with-label",{ref:"titleInput",attrs:{label:t.$strings.LabelTitle,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.title,callback:function(e){t.$set(t.details,"title",e)},expression:"details.title"}})],1),t._v(" "),e("div",{staticClass:"grow px-1 mt-2 md:mt-0"},[e("ui-text-input-with-label",{ref:"subtitleInput",attrs:{label:t.$strings.LabelSubtitle,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.subtitle,callback:function(e){t.$set(t.details,"subtitle",e)},expression:"details.subtitle"}})],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap mt-2 -mx-1"},[e("div",{staticClass:"w-full md:w-3/4 px-1"},[e("ui-multi-select-query-input",{ref:"authorsSelect",attrs:{label:t.$strings.LabelAuthors,"filter-key":"authors"},on:{input:t.handleInputChange},model:{value:t.details.authors,callback:function(e){t.$set(t.details,"authors",e)},expression:"details.authors"}})],1),t._v(" "),e("div",{staticClass:"grow px-1 mt-2 md:mt-0"},[e("ui-text-input-with-label",{ref:"publishYearInput",attrs:{type:"number",label:t.$strings.LabelPublishYear},on:{input:t.handleInputChange},model:{value:t.details.publishedYear,callback:function(e){t.$set(t.details,"publishedYear",e)},expression:"details.publishedYear"}})],1)]),t._v(" "),e("div",{staticClass:"flex mt-2 -mx-1"},[e("div",{staticClass:"grow px-1"},[e("widgets-series-input-widget",{on:{input:t.handleInputChange},model:{value:t.details.series,callback:function(e){t.$set(t.details,"series",e)},expression:"details.series"}})],1)]),t._v(" "),e("ui-rich-text-editor",{ref:"descriptionInput",staticClass:"mt-2",attrs:{label:t.$strings.LabelDescription},on:{input:t.handleInputChange},model:{value:t.details.description,callback:function(e){t.$set(t.details,"description",e)},expression:"details.description"}}),t._v(" "),e("div",{staticClass:"flex flex-wrap mt-2 -mx-1"},[e("div",{staticClass:"w-full md:w-1/2 px-1"},[e("ui-multi-select",{ref:"genresSelect",attrs:{label:t.$strings.LabelGenres,items:t.genres},on:{input:t.handleInputChange},model:{value:t.details.genres,callback:function(e){t.$set(t.details,"genres",e)},expression:"details.genres"}})],1),t._v(" "),e("div",{staticClass:"grow px-1 mt-2 md:mt-0"},[e("ui-multi-select",{ref:"tagsSelect",attrs:{label:t.$strings.LabelTags,items:t.tags},on:{input:t.handleInputChange},model:{value:t.newTags,callback:function(e){t.newTags=e},expression:"newTags"}})],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap mt-2 -mx-1"},[e("div",{staticClass:"w-full md:w-1/2 px-1"},[e("ui-multi-select",{ref:"narratorsSelect",attrs:{label:t.$strings.LabelNarrators,items:t.narrators},on:{input:t.handleInputChange},model:{value:t.details.narrators,callback:function(e){t.$set(t.details,"narrators",e)},expression:"details.narrators"}})],1),t._v(" "),e("div",{staticClass:"w-1/2 md:w-1/4 px-1 mt-2 md:mt-0"},[e("ui-text-input-with-label",{ref:"isbnInput",attrs:{label:"ISBN","trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.isbn,callback:function(e){t.$set(t.details,"isbn",e)},expression:"details.isbn"}})],1),t._v(" "),e("div",{staticClass:"w-1/2 md:w-1/4 px-1 mt-2 md:mt-0"},[e("ui-text-input-with-label",{ref:"asinInput",attrs:{label:"ASIN","trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.asin,callback:function(e){t.$set(t.details,"asin",e)},expression:"details.asin"}})],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap mt-2 -mx-1"},[e("div",{staticClass:"w-full md:w-1/4 px-1"},[e("ui-text-input-with-label",{ref:"publisherInput",attrs:{label:t.$strings.LabelPublisher,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.publisher,callback:function(e){t.$set(t.details,"publisher",e)},expression:"details.publisher"}})],1),t._v(" "),e("div",{staticClass:"w-1/2 md:w-1/4 px-1 mt-2 md:mt-0"},[e("ui-text-input-with-label",{ref:"languageInput",attrs:{label:t.$strings.LabelLanguage,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.language,callback:function(e){t.$set(t.details,"language",e)},expression:"details.language"}})],1),t._v(" "),e("div",{staticClass:"grow px-1 pt-6 mt-2 md:mt-0"},[e("div",{staticClass:"flex justify-center"},[e("ui-checkbox",{attrs:{label:t.$strings.LabelExplicit,"checkbox-bg":"primary","border-color":"gray-600","label-class":"pl-2 text-base font-semibold"},on:{input:t.handleInputChange},model:{value:t.details.explicit,callback:function(e){t.$set(t.details,"explicit",e)},expression:"details.explicit"}})],1)]),t._v(" "),e("div",{staticClass:"grow px-1 pt-6 mt-2 md:mt-0"},[e("div",{staticClass:"flex justify-center"},[e("ui-checkbox",{attrs:{label:t.$strings.LabelAbridged,"checkbox-bg":"primary","border-color":"gray-600","label-class":"pl-2 text-base font-semibold"},on:{input:t.handleInputChange},model:{value:t.details.abridged,callback:function(e){t.$set(t.details,"abridged",e)},expression:"details.abridged"}})],1)])])],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiTextInputWithLabel:n(121).default,UiMultiSelectQueryInput:n(705).default,WidgetsSeriesInputWidget:n(736).default,UiRichTextEditor:n(679).default,UiMultiSelect:n(675).default,UiCheckbox:n(184).default})}}]);