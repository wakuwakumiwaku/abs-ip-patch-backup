(window.webpackJsonp=window.webpackJsonp||[]).push([[162,147,149],{1070:function(t,e,r){"use strict";r.r(e);r(147);var n=r(16),o=r(7),l=(r(17),r(22),r(43),r(84),r(26),r(33),r(27),r(108),r(14),r(83),r(57),r(15),r(44),r(45),r(38),r(8),r(35),r(59),r(656),r(62),r(159),r(357),r(63),r(77),r(658),r(659),r(660),r(662),r(663),r(664),r(665),r(666),r(667),r(668),r(669),r(670),r(671),r(672),r(673),r(674),r(28),r(58),r(40),r(29),r(188)),c=r.n(l);function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,a){if(t){if("string"==typeof t)return m(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?m(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,l=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw l}}}}function m(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}var v={asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,o,l,c,h,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.store,n=t.params,o=t.app,l=t.redirect,c=t.from,r.getters["user/getUserCanUpdate"]){e.next=3;break}return e.abrupt("return",l("/?error=unauthorized"));case 3:return e.next=5,o.$axios.$get("/api/items/".concat(n.id,"?expanded=1")).catch((function(t){return console.error("Failed",t),!1}));case 5:if(h=e.sent){e.next=9;break}return console.error("Not found...",n.id),e.abrupt("return",l("/"));case 9:if("book"==h.mediaType){e.next=12;break}return console.error("Invalid media type"),e.abrupt("return",l("/"));case 12:if(r.state.libraries.currentLibraryId===h.libraryId&&r.state.libraries.filterData){e.next=15;break}return e.next=15,r.dispatch("libraries/fetch",h.libraryId);case 15:return d=c?c.fullPath:null,c&&"/login"===c.path&&(d=null),e.abrupt("return",{libraryItem:h,previousRoute:d});case 18:case"end":return e.stop()}}),e)})))()},data:function(){return{newChapters:[],selectedChapter:null,showShiftTimes:!1,shiftAmount:0,audioEl:null,isPlayingChapter:!1,isLoadingChapter:!1,currentTrackIndex:0,saving:!1,asinInput:null,regionInput:"US",findingChapters:!1,showFindChaptersModal:!1,chapterData:null,asinError:null,removeBranding:!1,showSecondInputs:!1,audibleRegions:["US","CA","UK","AU","FR","DE","JP","IT","IN","ES"],hasChanges:!1,timeIncrementAmount:1,elapsedTime:0,playStartTime:null,elapsedTimeInterval:null,lockedChapters:new Set,lastSelectedLockIndex:null,bulkChapterInput:"",showBulkChapterModal:!1,bulkChapterCount:1,detectedPattern:null}},computed:{streamLibraryItem:function(){return this.$store.state.streamLibraryItem},userToken:function(){return this.$store.getters["user/getToken"]},media:function(){return this.libraryItem.media||{}},mediaMetadata:function(){return this.media.metadata||{}},title:function(){return this.mediaMetadata.title},mediaDuration:function(){return this.media.duration},mediaDurationRounded:function(){return Math.round(this.mediaDuration)},chapters:function(){return this.media.chapters||[]},tracks:function(){return this.media.tracks||[]},audioFiles:function(){return this.media.audioFiles||[]},audioTracks:function(){return this.audioFiles.filter((function(t){return!t.exclude}))},selectedChapterId:function(){return this.selectedChapter?this.selectedChapter.id:null},allChaptersLocked:function(){var t=this;return this.newChapters.length>0&&this.newChapters.every((function(e){return t.lockedChapters.has(e.id)}))}},methods:{formatNumberWithPadding:function(t,pattern){return pattern&&pattern.hasLeadingZeros&&pattern.originalPadding?t.toString().padStart(pattern.originalPadding,"0"):t.toString()},setChaptersFromTracks:function(){var t,e=0,r=0,n=[],o=f(this.audioTracks);try{for(o.s();!(t=o.n()).done;){var track=t.value;n.push({id:r++,title:c.a.basename(track.metadata.filename,c.a.extname(track.metadata.filename)),start:e,end:e+track.duration}),e+=track.duration}}catch(t){o.e(t)}finally{o.f()}this.newChapters=n,this.lockedChapters=new Set,this.checkChapters()},toggleRemoveBranding:function(){this.removeBranding=!this.removeBranding},shiftChapterTimes:function(){var t=this;if(!(!this.shiftAmount||isNaN(this.shiftAmount)||this.newChapters.length<=1)){var e=Number(this.shiftAmount),r=this.newChapters.filter((function(e){return!t.lockedChapters.has(e.id)}));if(0!==r.length){for(var i=0;i<this.newChapters.length;i++){var n=this.newChapters[i];this.lockedChapters.has(n.id)||(n.end=Math.min(n.end+e,this.mediaDuration),i>0&&(n.start=Math.max(0,n.start+e)))}this.checkChapters()}else this.$toast.warning(this.$strings.ToastChaptersAllLocked)}},incrementChapterTime:function(t,e){0===t.id&&t.start+e<0||t.start+e>=this.mediaDuration||(t.start=Math.max(0,t.start+e),this.checkChapters())},adjustChapterStartTime:function(t){var e=t.start+this.elapsedTime;t.start=e,this.checkChapters(),this.$toast.success(this.$strings.ToastChapterStartTimeAdjusted.replace("{0}",this.elapsedTime)),this.destroyAudioEl()},startElapsedTimeTracking:function(){var t=this;this.elapsedTime=0,this.playStartTime=Date.now(),this.elapsedTimeInterval=setInterval((function(){t.elapsedTime=Math.floor((Date.now()-t.playStartTime)/1e3)}),100)},stopElapsedTimeTracking:function(){this.elapsedTimeInterval&&(clearInterval(this.elapsedTimeInterval),this.elapsedTimeInterval=null),this.elapsedTime=0,this.playStartTime=null},toggleChapterLock:function(t,e){var r=t.id;if(e.shiftKey&&null!==this.lastSelectedLockIndex)for(var n=Math.min(this.lastSelectedLockIndex,r),o=Math.max(this.lastSelectedLockIndex,r),l=!this.lockedChapters.has(r),i=n;i<=o;i++)l?this.lockedChapters.add(i):this.lockedChapters.delete(i);else this.lockedChapters.has(r)?this.lockedChapters.delete(r):this.lockedChapters.add(r);this.lastSelectedLockIndex=r,this.lockedChapters=new Set(this.lockedChapters)},lockAllChapters:function(){var t=this;this.newChapters.forEach((function(e){t.lockedChapters.add(e.id)})),this.lockedChapters=new Set(this.lockedChapters)},unlockAllChapters:function(){this.lockedChapters.clear(),this.lockedChapters=new Set(this.lockedChapters)},toggleAllChaptersLock:function(){this.allChaptersLocked?this.unlockAllChapters():this.lockAllChapters()},editItem:function(){this.$store.commit("showEditModal",this.libraryItem)},addChapter:function(t){var e={id:t.id+1,start:t.start,end:t.end,title:""};this.newChapters.splice(t.id+1,0,e),this.checkChapters()},removeChapter:function(t){this.lockedChapters.has(t.id)?this.$toast.warning(this.$strings.ToastChapterLocked):(this.newChapters=this.newChapters.filter((function(e){return e.id!==t.id})),this.checkChapters())},checkChapters:function(){for(var t=0,e=this.newChapters.length!==this.chapters.length,i=0;i<this.newChapters.length;i++)if(this.newChapters[i].id=i,this.newChapters[i].start=Number(this.newChapters[i].start),this.newChapters[i].title=(this.newChapters[i].title||"").trim(),0===i&&0!==this.newChapters[i].start?this.newChapters[i].error=this.$strings.MessageChapterErrorFirstNotZero:this.newChapters[i].start<=t&&i>0?this.newChapters[i].error=this.$strings.MessageChapterErrorStartLtPrev:this.newChapters[i].start>=this.mediaDuration?this.newChapters[i].error=this.$strings.MessageChapterErrorStartGteDuration:this.newChapters[i].error=null,t=this.newChapters[i].start,!e){var r=this.chapters[i];if(r){var n=this.newChapters[i],o=n.start,l=n.end,title=n.title;o===r.start&&l===r.end&&title===r.title||(e=!0)}else e=!0}this.hasChanges=e},getAudioTrackForTime:function(time){return"number"!=typeof time?null:this.tracks.find((function(t){return time>=t.startOffset&&time<t.startOffset+t.duration}))},playChapter:function(t){if(console.log("Play Chapter",t.id),this.selectedChapterId===t.id){if(console.log("Chapter already playing",this.isLoadingChapter,this.isPlayingChapter),this.isLoadingChapter)return;if(this.isPlayingChapter)return void this.destroyAudioEl()}this.selectedChapterId&&this.destroyAudioEl();var e=this.getAudioTrackForTime(t.start);if(e){this.selectedChapter=t,this.isLoadingChapter=!0;var r=t.start-e.startOffset;this.playTrackAtTime(e,r)}else console.error("No audio track found for chapter",t)},playTrackAtTime:function(t,e){var r=this;this.currentTrackIndex=t.index;var n=this.audioEl||document.createElement("audio"),o=t.contentUrl+"?token=".concat(this.userToken);n.src="".concat("/audiobookshelf").concat(o),n.id="chapter-audio",document.body.appendChild(n),n.addEventListener("loadeddata",(function(){console.log("Audio loaded data",n.duration),n.currentTime=e,n.play(),console.log("Playing audio at current time",e)})),n.addEventListener("play",(function(){console.log("Audio playing"),r.isLoadingChapter=!1,r.isPlayingChapter=!0,r.startElapsedTimeTracking()})),n.addEventListener("ended",(function(){console.log("Audio ended");var t=r.tracks.find((function(t){return t.index===r.currentTrackIndex+1}));t?(console.log("Playing next track",t.index),r.currentTrackIndex=t.index,r.playTrackAtTime(t,0)):(console.log("No next track"),r.destroyAudioEl())})),this.audioEl=n},destroyAudioEl:function(){this.audioEl&&(this.audioEl.remove(),this.audioEl=null,this.selectedChapter=null,this.isPlayingChapter=!1,this.isLoadingChapter=!1,this.stopElapsedTimeTracking())},resetChapterLookupData:function(){this.chapterData=null},saveChapters:function(){var t=this;this.checkChapters();for(var i=0;i<this.newChapters.length;i++){if(this.newChapters[i].error)return void this.$toast.error(this.$strings.ToastChaptersHaveErrors);if(!this.newChapters[i].title)return void this.$toast.error(this.$strings.ToastChaptersMustHaveTitles);var e=this.newChapters[i+1];this.newChapters[i].end=e?e.start:this.mediaDuration}this.saving=!0;var r={chapters:this.newChapters};this.$axios.$post("/api/items/".concat(this.libraryItem.id,"/chapters"),r).then((function(data){t.saving=!1,data.updated?(t.$toast.success(t.$strings.ToastChaptersUpdated),t.reloadLibraryItem()):t.$toast.info(t.$strings.MessageNoUpdatesWereNecessary)})).catch((function(e){t.saving=!1,console.error("Failed to update chapters",e),t.$toast.error(t.$strings.ToastFailedToUpdate)}))},applyChapterNamesOnly:function(){var t=this;this.newChapters.forEach((function(e,r){t.chapterData.chapters[r]&&!t.lockedChapters.has(e.id)&&(e.title=t.chapterData.chapters[r].title)})),this.showFindChaptersModal=!1,this.chapterData=null,this.checkChapters()},applyChapterData:function(){for(var t=this,e=0,r=this.chapterData.chapters.filter((function(e){return e.startOffsetSec<t.mediaDuration})).map((function(r){return{id:e++,start:r.startOffsetMs/1e3,end:Math.min(t.mediaDuration,(r.startOffsetMs+r.lengthMs)/1e3),title:r.title}})),n=[],o=0,i=0;i<Math.max(this.newChapters.length,r.length);i++){this.lockedChapters.has(i)&&this.newChapters[i]?n.push(d(d({},this.newChapters[i]),{},{id:i})):r[o]?(n.push(d(d({},r[o]),{},{id:i})),o++):this.newChapters[i]&&n.push(d(d({},this.newChapters[i]),{},{id:i}))}this.newChapters=n,this.showFindChaptersModal=!1,this.chapterData=null,this.checkChapters()},findChapters:function(){var t=this;this.asinInput?(this.regionInput!==localStorage.getItem("audibleRegion")&&localStorage.setItem("audibleRegion",this.regionInput),this.findingChapters=!0,this.chapterData=null,this.asinError=null,this.$axios.$get("/api/search/chapters?asin=".concat(this.asinInput,"&region=").concat(this.regionInput)).then((function(data){t.findingChapters=!1,data.error?t.asinError=t.$getString(data.stringKey):(console.log("Chapter data",d({},data)),t.chapterData=t.removeBranding?t.removeBrandingFromData(data):data)})).catch((function(e){t.findingChapters=!1,console.error("Failed to get chapter data",e),t.$toast.error(t.$strings.ToastFailedToLoadData),t.showFindChaptersModal=!1}))):this.$toast.error(this.$strings.ToastAsinRequired)},removeBrandingFromData:function(data){if(!data)return data;try{for(var t=data.brandIntroDurationMs,e=data.brandOutroDurationMs,i=0;i<data.chapters.length;i++){var r=data.chapters[i];r.startOffsetMs<t?(r.startOffsetMs=1e3*i,r.startOffsetSec=i):(r.startOffsetMs-=t,r.startOffsetSec=Math.floor(r.startOffsetMs/1e3))}var n=data.chapters[data.chapters.length-1];return n&&n.lengthMs<=e&&data.chapters.pop(),data.runtimeLengthMs-=t+e,data.runtimeLengthSec=Math.floor(data.runtimeLengthMs/1e3),console.log("Brandless Chapter data",data),data}catch(t){return data}},resetChapters:function(){var t=this,e={message:this.$strings.MessageResetChaptersConfirm,callback:function(e){e&&t.initChapters()},type:"yesNo"};this.$store.commit("globals/setConfirmPrompt",e)},initChapters:function(){this.newChapters=this.chapters.map((function(t){return d({},t)})),this.newChapters.length||(this.newChapters=[{id:0,start:0,end:this.mediaDuration,title:""}]),this.lockedChapters=new Set,this.checkChapters()},removeAllChaptersClick:function(){var t=this,e={message:this.$strings.MessageConfirmRemoveAllChapters,callback:function(e){e&&t.removeAllChapters()},type:"yesNo"};this.$store.commit("globals/setConfirmPrompt",e)},removeAllChapters:function(){var t=this;this.saving=!0;this.$axios.$post("/api/items/".concat(this.libraryItem.id,"/chapters"),{chapters:[]}).then((function(data){data.updated?(t.$toast.success(t.$strings.ToastChaptersRemoved),t.reloadLibraryItem()):t.$toast.info(t.$strings.MessageNoUpdatesWereNecessary)})).catch((function(e){console.error("Failed to remove chapters",e),t.$toast.error(t.$strings.ToastRemoveFailed)})).finally((function(){t.saving=!1}))},handleBulkChapterAdd:function(){var input=this.bulkChapterInput.trim();if(input){var t=input.match(/(\d+)/);if(t){var e=t[1],r=parseInt(e),n=t.index,o=input.substring(0,n),l=input.substring(n+e.length);this.detectedPattern={before:o,after:l,startingNumber:r,originalPadding:e.length,hasLeadingZeros:e.length>1&&e.startsWith("0")},this.bulkChapterCount=1,this.showBulkChapterModal=!0}else this.addSingleChapterFromInput(input)}},addSingleChapterFromInput:function(title){var t=this.newChapters[this.newChapters.length-1],e=t?t.end:0,r=Math.min(e+300,this.mediaDuration),n={id:this.newChapters.length,start:e,end:r,title:title};this.newChapters.push(n),this.bulkChapterInput="",this.checkChapters()},addBulkChapters:function(){var t=parseInt(this.bulkChapterCount);if(!t||t<1||t>150)this.$toast.error(this.$strings.ToastBulkChapterInvalidCount);else{for(var e=this.detectedPattern,r=e.before,n=e.after,o=e.startingNumber,l=e.originalPadding,c=e.hasLeadingZeros,h=this.newChapters[this.newChapters.length-1],d=h?h.start+1:0,i=0;i<t;i++){var f=o+i,m=f.toString();c&&l>1&&(m=f.toString().padStart(l,"0"));var v=d+i,C=Math.min(v+i+i,this.mediaDuration),x={id:this.newChapters.length,start:v,end:C,title:"".concat(r).concat(m).concat(n)};this.newChapters.push(x)}this.bulkChapterInput="",this.showBulkChapterModal=!1,this.detectedPattern=null,this.checkChapters()}},libraryItemUpdated:function(t){t.id===this.libraryItem.id&&(t.media.metadata.asin&&this.mediaMetadata.asin!==t.media.metadata.asin&&(this.asinInput=t.media.metadata.asin),this.libraryItem=t)},reloadLibraryItem:function(){var t=this;this.$axios.$get("/api/items/".concat(this.libraryItem.id,"?expanded=1")).then((function(data){t.libraryItem=data,t.initChapters()})).catch((function(e){console.error("Failed to reload library item",e),t.$toast.error(t.$strings.ToastFailedToLoadData)}))}},mounted:function(){this.regionInput=localStorage.getItem("audibleRegion")||"US",this.asinInput=this.mediaMetadata.asin||null,this.initChapters(),this.$eventBus.$on("".concat(this.libraryItem.id,"_updated"),this.libraryItemUpdated)},beforeDestroy:function(){this.destroyAudioEl(),this.$eventBus.$off("".concat(this.libraryItem.id,"_updated"),this.libraryItemUpdated)}},C=r(4),component=Object(C.a)(v,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-bg page overflow-y-auto relative",class:t.streamLibraryItem?"streaming":"",attrs:{id:"page-wrapper"}},[e("div",{staticClass:"flex items-center py-4 px-4 max-w-7xl mx-auto"},[e("nuxt-link",{staticClass:"hover:underline",attrs:{to:"/item/".concat(t.libraryItem.id)}},[e("h1",{staticClass:"text-lg lg:text-xl"},[t._v(t._s(t.title))])]),t._v(" "),e("button",{staticClass:"w-7 h-7 flex items-center justify-center mx-4 hover:scale-110 duration-100 transform text-gray-200 hover:text-white",on:{click:t.editItem}},[e("span",{staticClass:"material-symbols text-base"},[t._v("edit")])]),t._v(" "),e("div",{staticClass:"grow hidden md:block"}),t._v(" "),e("p",{staticClass:"text-base hidden md:block"},[t._v(t._s(t.$strings.LabelDuration)+":")]),t._v(" "),e("p",{staticClass:"text-base font-mono ml-4 hidden md:block"},[t._v(t._s(t.$secondsToTimestamp(t.mediaDurationRounded)))])],1),t._v(" "),e("div",{staticClass:"flex flex-wrap-reverse min-[1120px]:flex-nowrap justify-center py-4 px-4"},[e("div",{staticClass:"w-full max-w-3xl py-4"},[e("div",{staticClass:"flex items-center"},[e("div",{staticClass:"w-12 hidden min-w-[1120px]:block"}),t._v(" "),e("p",{staticClass:"text-lg mb-4 font-semibold"},[t._v(t._s(t.$strings.HeaderChapters))]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),e("ui-checkbox",{staticClass:"mx-2",attrs:{"checkbox-bg":"primary",small:"","label-class":"text-sm text-gray-200 pl-1",label:t.$strings.LabelShowSeconds},model:{value:t.showSecondInputs,callback:function(e){t.showSecondInputs=e},expression:"showSecondInputs"}}),t._v(" "),e("div",{staticClass:"w-32 hidden min-[1120px]:block"})],1),t._v(" "),e("div",{staticClass:"flex items-center mb-3 py-1 -mx-1"},[e("div",{staticClass:"w-12 hidden min-[1120px]:block"}),t._v(" "),t.chapters.length?e("ui-btn",{staticClass:"mx-1 whitespace-nowrap",attrs:{color:"bg-primary",small:""},on:{click:function(e){return e.stopPropagation(),t.removeAllChaptersClick.apply(null,arguments)}}},[t._v(t._s(t.$strings.ButtonRemoveAll))]):t._e(),t._v(" "),t.newChapters.length>1?e("ui-btn",{staticClass:"mx-1 whitespace-nowrap",attrs:{color:t.showShiftTimes?"bg-bg":"bg-primary",small:""},on:{click:function(e){t.showShiftTimes=!t.showShiftTimes}}},[t._v(t._s(t.$strings.ButtonShiftTimes))]):t._e(),t._v(" "),e("ui-btn",{class:{"mx-1":t.newChapters.length>1},attrs:{color:"bg-primary",small:""},on:{click:function(e){t.showFindChaptersModal=!0}}},[t._v(t._s(t.$strings.ButtonLookup))]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),t.hasChanges?e("ui-btn",{staticClass:"mx-1",attrs:{small:""},on:{click:function(e){return e.stopPropagation(),t.resetChapters.apply(null,arguments)}}},[t._v(t._s(t.$strings.ButtonReset))]):t._e(),t._v(" "),t.hasChanges?e("ui-btn",{staticClass:"mx-1",attrs:{color:"bg-success",disabled:!t.hasChanges,small:""},on:{click:t.saveChapters}},[t._v(t._s(t.$strings.ButtonSave))]):t._e(),t._v(" "),e("div",{staticClass:"w-32 hidden min-[1120px]:block"})],1),t._v(" "),e("div",{staticClass:"overflow-hidden"},[e("transition",{attrs:{name:"slide"}},[t.showShiftTimes?e("div",{staticClass:"flex mb-4"},[e("div",{staticClass:"w-12 hidden lg:block"}),t._v(" "),e("div",{staticClass:"grow"},[e("div",{staticClass:"flex items-center"},[e("p",{staticClass:"text-sm mb-1 font-semibold pr-2"},[t._v(t._s(t.$strings.LabelTimeToShift))]),t._v(" "),e("ui-text-input",{staticClass:"max-w-20",staticStyle:{height:"30px"},attrs:{type:"number"},model:{value:t.shiftAmount,callback:function(e){t.shiftAmount=e},expression:"shiftAmount"}}),t._v(" "),e("ui-btn",{staticClass:"mx-1",attrs:{color:"bg-primary",small:""},on:{click:t.shiftChapterTimes}},[t._v(t._s(t.$strings.ButtonAdd))]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),e("span",{staticClass:"material-symbols text-gray-200 hover:text-white cursor-pointer",on:{click:function(e){t.showShiftTimes=!1}}},[t._v("expand_less")])],1),t._v(" "),e("p",{staticClass:"text-xs py-1.5 text-gray-300 max-w-md"},[t._v(t._s(t.$strings.NoteChapterEditorTimes))])]),t._v(" "),e("div",{staticClass:"w-32 hidden lg:block"})]):t._e()])],1),t._v(" "),e("div",{staticClass:"flex text-xs uppercase text-gray-300 font-semibold mb-2"},[e("div",{staticClass:"w-8 min-w-8 md:w-12 md:min-w-12"}),t._v(" "),e("div",{staticClass:"w-38 min-w-38 md:w-40 md:min-w-40 px-1 pl-8"},[t._v(t._s(t.$strings.LabelStart))]),t._v(" "),e("div",{staticClass:"grow px-1 min-w-54"},[t._v(t._s(t.$strings.LabelTitle))]),t._v(" "),e("div",{staticClass:"w-7 min-w-7 px-1 flex items-center justify-center"},[e("ui-tooltip",{attrs:{text:t.allChaptersLocked?t.$strings.TooltipUnlockAllChapters:t.$strings.TooltipLockAllChapters,direction:"bottom"}},[e("button",{staticClass:"w-7 h-7 rounded-full flex items-center justify-center cursor-pointer transition-colors duration-150",class:t.allChaptersLocked?"text-orange-400 hover:text-orange-300":"text-gray-300 hover:text-white",on:{click:t.toggleAllChaptersLock}},[e("span",{staticClass:"material-symbols text-xl"},[t._v(t._s(t.allChaptersLocked?"lock":"lock_open"))])])])],1),t._v(" "),e("div",{staticClass:"w-32"})]),t._v(" "),t._l(t.newChapters,(function(r){return e("div",{key:r.id,staticClass:"flex py-1"},[e("div",{staticClass:"w-8 min-w-8 md:w-12 md:min-w-12"},[t._v("#"+t._s(r.id+1))]),t._v(" "),e("div",{staticClass:"w-38 min-w-38 md:w-40 md:min-w-40 px-1"},[e("div",{staticClass:"flex items-center gap-1"},[e("ui-tooltip",{attrs:{text:t.$strings.TooltipSubtractOneSecond,direction:"bottom"}},[e("button",{staticClass:"w-6 h-6 rounded-full flex items-center justify-center text-gray-300 hover:text-white transform hover:scale-110 duration-150 flex-shrink-0",class:{"opacity-50 cursor-not-allowed":0===r.id&&r.start-t.timeIncrementAmount<0},attrs:{disabled:0===r.id&&r.start-t.timeIncrementAmount<0},on:{click:function(e){return t.incrementChapterTime(r,-t.timeIncrementAmount)}}},[e("span",{staticClass:"material-symbols text-sm"},[t._v("remove")])])]),t._v(" "),e("div",{staticClass:"flex-1 min-w-0"},[t.showSecondInputs?e("ui-text-input",{staticClass:"text-xs",attrs:{type:"number"},on:{change:t.checkChapters},model:{value:r.start,callback:function(e){t.$set(r,"start",e)},expression:"chapter.start"}}):e("ui-time-picker",{staticClass:"text-xs",attrs:{"show-three-digit-hour":t.mediaDuration>=36e4},on:{change:t.checkChapters},model:{value:r.start,callback:function(e){t.$set(r,"start",e)},expression:"chapter.start"}})],1),t._v(" "),e("ui-tooltip",{attrs:{text:t.$strings.TooltipAddOneSecond,direction:"bottom"}},[e("button",{staticClass:"w-6 h-6 rounded-full flex items-center justify-center text-gray-300 hover:text-white transform hover:scale-110 duration-150 flex-shrink-0",class:{"opacity-50 cursor-not-allowed":r.start+t.timeIncrementAmount>=t.mediaDuration},attrs:{disabled:r.start+t.timeIncrementAmount>=t.mediaDuration},on:{click:function(e){return t.incrementChapterTime(r,t.timeIncrementAmount)}}},[e("span",{staticClass:"material-symbols text-sm"},[t._v("add")])])])],1)]),t._v(" "),e("div",{staticClass:"grow px-1"},[e("ui-text-input",{staticClass:"text-xs min-w-52",on:{change:t.checkChapters},model:{value:r.title,callback:function(e){t.$set(r,"title",e)},expression:"chapter.title"}})],1),t._v(" "),e("div",{staticClass:"w-7 min-w-7 px-1 py-1"},[e("div",{staticClass:"flex items-center justify-center"},[e("ui-tooltip",{attrs:{text:t.lockedChapters.has(r.id)?t.$strings.TooltipUnlockChapter:t.$strings.TooltipLockChapter,direction:"bottom"}},[e("button",{staticClass:"w-7 h-7 rounded-full flex items-center justify-center transform hover:scale-110 duration-150 flex-shrink-0",class:t.lockedChapters.has(r.id)?"text-orange-400 hover:text-orange-300":"text-gray-300 hover:text-white",on:{click:function(e){return t.toggleChapterLock(r,e)}}},[e("span",{staticClass:"material-symbols text-base"},[t._v(t._s(t.lockedChapters.has(r.id)?"lock":"lock_open"))])])])],1)]),t._v(" "),e("div",{staticClass:"w-32 min-w-32 px-2 py-1"},[e("div",{staticClass:"flex items-center"},[e("ui-tooltip",{attrs:{text:t.$strings.MessageRemoveChapter,direction:"bottom"}},[t.newChapters.length>1?e("button",{staticClass:"w-7 h-7 rounded-full flex items-center justify-center text-gray-300 hover:text-error transform hover:scale-110 duration-150",on:{click:function(e){return t.removeChapter(r)}}},[e("span",{staticClass:"material-symbols text-base"},[t._v("delete")])]):t._e()]),t._v(" "),e("ui-tooltip",{attrs:{text:t.$strings.MessageInsertChapterBelow,direction:"bottom"}},[e("button",{staticClass:"w-7 h-7 rounded-full flex items-center justify-center text-gray-300 hover:text-success transform hover:scale-110 duration-150",on:{click:function(e){return t.addChapter(r)}}},[e("span",{staticClass:"material-symbols text-lg"},[t._v("add_row_below")])])]),t._v(" "),e("ui-tooltip",{attrs:{text:t.selectedChapterId===r.id&&t.isPlayingChapter?t.$strings.MessagePauseChapter:t.$strings.MessagePlayChapter,direction:"bottom"}},[e("button",{staticClass:"w-7 h-7 rounded-full flex items-center justify-center text-gray-300 hover:text-white transform hover:scale-110 duration-150 disabled:opacity-50 disabled:cursor-not-allowed",attrs:{disabled:!t.getAudioTrackForTime(r.start)},on:{click:function(e){return t.playChapter(r)}}},[t.selectedChapterId===r.id&&t.isLoadingChapter?e("widgets-loading-spinner"):t.selectedChapterId===r.id&&t.isPlayingChapter?e("span",{staticClass:"material-symbols text-base"},[t._v("pause")]):e("span",{staticClass:"material-symbols text-xl"},[t._v("play_arrow")])],1)]),t._v(" "),t.selectedChapterId===r.id&&(t.isPlayingChapter||t.isLoadingChapter)?e("ui-tooltip",{attrs:{text:t.$strings.TooltipAdjustChapterStart,direction:"bottom"}},[e("div",{staticClass:"ml-2 text-xs text-gray-300 font-mono min-w-10 cursor-pointer hover:text-white transition-colors duration-150",on:{click:function(e){return t.adjustChapterStartTime(r)}}},[t._v(t._s(t.elapsedTime)+"s")])]):t._e(),t._v(" "),r.error?e("ui-tooltip",{attrs:{text:r.error,plaintext:"",direction:"left"}},[e("button",{staticClass:"w-7 h-7 rounded-full flex items-center justify-center text-error"},[e("span",{staticClass:"material-symbols text-lg"},[t._v("error_outline")])])]):t._e()],1)])])})),t._v(" "),e("div",{staticClass:"flex items-center mt-4 mb-2"},[e("div",{staticClass:"w-8 min-w-8 md:w-12 md:min-w-12"}),t._v(" "),e("div",{staticClass:"w-38 min-w-38 md:w-40 md:min-w-40 px-1"}),t._v(" "),e("div",{staticClass:"flex items-center gap-2 grow px-1"},[e("ui-text-input",{staticClass:"text-xs grow min-w-52",attrs:{placeholder:t.$strings.PlaceholderBulkChapterInput},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleBulkChapterAdd.apply(null,arguments)}},model:{value:t.bulkChapterInput,callback:function(e){t.bulkChapterInput=e},expression:"bulkChapterInput"}})],1),t._v(" "),e("div",{staticClass:"w-39 min-w-39 px-1 py-1"},[e("ui-tooltip",{staticClass:"inline-block align-middle",attrs:{text:t.$strings.TooltipAddChapters,direction:"bottom"}},[e("button",{staticClass:"w-5 h-5 rounded-full flex items-center justify-center text-gray-300 hover:text-success transform hover:scale-110 duration-150 flex-shrink-0",class:{"opacity-50 cursor-not-allowed":!t.bulkChapterInput.trim()},attrs:{"aria-label":t.$strings.TooltipAddChapters,disabled:!t.bulkChapterInput.trim()},on:{click:t.handleBulkChapterAdd}},[e("span",{staticClass:"material-symbols text-lg"},[t._v("add")])])])],1)])],2),t._v(" "),e("div",{staticClass:"w-full max-w-3xl min-[1120px]:max-w-xl py-4 px-2"},[e("div",{staticClass:"flex items-center mb-4 py-1"},[e("p",{staticClass:"text-lg font-semibold"},[t._v(t._s(t.$strings.HeaderAudioTracks))]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),e("ui-btn",{attrs:{small:""},on:{click:t.setChaptersFromTracks}},[t._v(t._s(t.$strings.ButtonSetChaptersFromTracks))]),t._v(" "),e("ui-tooltip",{staticClass:"flex items-center mx-1 cursor-default",attrs:{text:t.$strings.MessageSetChaptersFromTracksDescription,direction:"top"}},[e("span",{staticClass:"material-symbols text-xl text-gray-200"},[t._v("info")])])],1),t._v(" "),e("div",{staticClass:"flex text-xs uppercase text-gray-300 font-semibold mb-2"},[e("div",{staticClass:"grow min-[1120px]:max-w-64 xl:max-w-sm"},[t._v(t._s(t.$strings.LabelFilename))]),t._v(" "),e("div",{staticClass:"w-20"},[t._v(t._s(t.$strings.LabelDuration))]),t._v(" "),e("div",{staticClass:"w-20 hidden md:block text-center"},[t._v(t._s(t.$strings.HeaderChapters))])]),t._v(" "),t._l(t.audioTracks,(function(track){return e("div",{key:track.ino,staticClass:"flex items-center py-2",class:t.currentTrackIndex===track.index&&t.isPlayingChapter?"bg-success/10":""},[e("div",{staticClass:"pr-2 grow min-[1120px]:max-w-64 xl:max-w-sm"},[e("p",{staticClass:"text-xs truncate"},[t._v(t._s(track.metadata.filename))])]),t._v(" "),e("div",{staticClass:"w-20",staticStyle:{"min-width":"80px"}},[e("p",{staticClass:"text-xs font-mono text-gray-200"},[t._v(t._s(t.$secondsToTimestamp(Math.round(track.duration),!1,!0)))])]),t._v(" "),e("div",{staticClass:"w-20 hidden md:flex justify-center",staticStyle:{"min-width":"80px"}},[(track.chapters||[]).length?e("span",{staticClass:"material-symbols text-success text-sm"},[t._v("check")]):t._e()])])}))],2)]),t._v(" "),t.saving?e("div",{staticClass:"w-full h-full absolute top-0 left-0 bottom-0 right-0 z-30 bg-black/25 flex items-center justify-center"},[e("ui-loading-indicator")],1):t._e(),t._v(" "),e("modals-modal",{attrs:{name:"edit-book",width:500,processing:t.findingChapters},scopedSlots:t._u([{key:"outer",fn:function(){return[e("div",{staticClass:"absolute top-0 left-0 p-5 w-2/3 overflow-hidden pointer-events-none"},[e("p",{staticClass:"text-3xl text-white truncate pointer-events-none"},[t._v(t._s(t.$strings.HeaderFindChapters))])])]},proxy:!0}]),model:{value:t.showFindChaptersModal,callback:function(e){t.showFindChaptersModal=e},expression:"showFindChaptersModal"}},[t._v(" "),e("div",{staticClass:"w-full h-full max-h-full text-sm rounded-lg bg-bg shadow-lg border border-black-300 relative"},[t.chapterData?e("div",{staticClass:"w-full p-4"},[e("div",{staticClass:"flex mb-4"},[e("button",{staticClass:"w-7 h-7 rounded-full flex items-center justify-center text-gray-300 hover:text-white flex-shrink-0",attrs:{"aria-label":t.$strings.ButtonBack},on:{click:t.resetChapterLookupData}},[e("span",{staticClass:"material-symbols text-lg"},[t._v("arrow_back")])]),t._v(" "),e("p",[t._v("\n            "+t._s(t.$strings.LabelDurationFound)+" "),e("span",{staticClass:"font-semibold"},[t._v(t._s(t.$secondsToTimestamp(t.chapterData.runtimeLengthSec)))]),t._v(" "),e("br"),t._v(" "),e("span",{staticClass:"font-semibold",class:{"text-warning":t.chapters.length!==t.chapterData.chapters.length}},[t._v(t._s(t.chapterData.chapters.length))]),t._v(" "+t._s(t.$strings.LabelChaptersFound)+"\n          ")]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),e("p",[t._v("\n            "+t._s(t.$strings.LabelYourAudiobookDuration)+": "),e("span",{staticClass:"font-semibold"},[t._v(t._s(t.$secondsToTimestamp(t.mediaDurationRounded)))]),e("br"),t._v("\n            Your audiobook has "),e("span",{staticClass:"font-semibold",class:{"text-warning":t.chapters.length!==t.chapterData.chapters.length}},[t._v(t._s(t.chapters.length))]),t._v(" chapters\n          ")])]),t._v(" "),t.chapterData.runtimeLengthSec>t.mediaDurationRounded?e("widgets-alert",{staticClass:"mb-2",attrs:{type:"warning"}},[t._v(" "+t._s(t.$strings.MessageYourAudiobookDurationIsShorter)+" ")]):t.chapterData.runtimeLengthSec<t.mediaDurationRounded?e("widgets-alert",{staticClass:"mb-2",attrs:{type:"warning"}},[t._v(" "+t._s(t.$strings.MessageYourAudiobookDurationIsLonger)+" ")]):t._e(),t._v(" "),e("div",{staticClass:"flex py-0.5 text-xs font-semibold uppercase text-gray-300 mb-1"},[e("div",{staticClass:"w-24 px-2"},[t._v(t._s(t.$strings.LabelStart))]),t._v(" "),e("div",{staticClass:"grow px-2"},[t._v(t._s(t.$strings.LabelTitle))])]),t._v(" "),e("div",{staticClass:"w-full max-h-80 overflow-y-auto my-2"},t._l(t.chapterData.chapters,(function(r,n){return e("div",{key:n,staticClass:"flex py-0.5 text-xs",class:r.startOffsetSec>t.mediaDuration?"bg-error/20":r.startOffsetSec+r.lengthMs/1e3>t.mediaDuration?"bg-warning/20":n%2==0?"bg-primary/30":""},[e("div",{staticClass:"w-24 min-w-24 px-2"},[e("p",{staticClass:"font-mono"},[t._v(t._s(t.$secondsToTimestamp(r.startOffsetSec)))])]),t._v(" "),e("div",{staticClass:"grow px-2"},[e("p",{staticClass:"truncate max-w-sm"},[t._v(t._s(r.title))])])])})),0),t._v(" "),t.chapterData.runtimeLengthSec>t.mediaDurationRounded?e("div",{staticClass:"w-full pt-2"},[e("div",{staticClass:"flex items-center"},[e("div",{staticClass:"w-2 h-2 bg-warning/50"}),t._v(" "),e("p",{staticClass:"pl-2"},[t._v(t._s(t.$strings.MessageChapterEndIsAfter))])]),t._v(" "),e("div",{staticClass:"flex items-center"},[e("div",{staticClass:"w-2 h-2 bg-error/50"}),t._v(" "),e("p",{staticClass:"pl-2"},[t._v(t._s(t.$strings.MessageChapterStartIsAfter))])])]):t._e(),t._v(" "),e("div",{staticClass:"flex items-center pt-2 justify-between"},[e("div",{staticClass:"flex items-center gap-2"},[e("ui-btn",{attrs:{small:"",color:"bg-primary"},on:{click:t.applyChapterNamesOnly}},[t._v(t._s(t.$strings.ButtonMapChapterTitles))]),t._v(" "),e("ui-tooltip",{staticClass:"flex items-center",attrs:{text:t.$strings.MessageMapChapterTitles,direction:"top"}},[e("span",{staticClass:"material-symbols text-xl text-gray-200"},[t._v("info")])])],1),t._v(" "),e("ui-btn",{attrs:{small:"",color:"bg-success"},on:{click:t.applyChapterData}},[t._v(t._s(t.$strings.ButtonApplyChapters))])],1)],1):e("div",{staticClass:"flex flex-col items-center justify-center p-20"},[e("div",{staticClass:"relative"},[e("div",{staticClass:"flex items-end space-x-2"},[e("ui-text-input-with-label",{staticClass:"flex-grow",attrs:{label:"ASIN"},model:{value:t.asinInput,callback:function(e){t.asinInput="string"==typeof e?e.trim():e},expression:"asinInput"}}),t._v(" "),e("ui-dropdown",{staticClass:"w-20 max-w-20",attrs:{label:t.$strings.LabelRegion,small:"",items:t.audibleRegions},model:{value:t.regionInput,callback:function(e){t.regionInput=e},expression:"regionInput"}}),t._v(" "),e("ui-btn",{attrs:{color:"bg-primary"},on:{click:t.findChapters}},[t._v(t._s(t.$strings.ButtonSearch))])],1),t._v(" "),e("div",{staticClass:"mt-4"},[e("ui-checkbox",{attrs:{label:t.$strings.LabelRemoveAudibleBranding,small:"","checkbox-bg":"bg","label-class":"pl-2 text-base text-sm"},on:{click:t.toggleRemoveBranding},model:{value:t.removeBranding,callback:function(e){t.removeBranding=e},expression:"removeBranding"}})],1),t._v(" "),e("div",{staticClass:"absolute left-0 mt-1.5 text-error text-s h-5"},[t.asinError?e("p",[t._v(t._s(t.asinError))]):t._e(),t._v(" "),t.asinError?e("p",[t._v(t._s(t.$strings.MessageAsinCheck))]):t._e()]),t._v(" "),e("div",{staticClass:"invisible mt-1 text-xs"})])])])]),t._v(" "),e("modals-modal",{attrs:{name:"bulk-chapters",width:400},scopedSlots:t._u([{key:"outer",fn:function(){return[e("div",{staticClass:"absolute top-0 left-0 p-5 w-2/3 overflow-hidden pointer-events-none"},[e("p",{staticClass:"text-3xl text-white truncate pointer-events-none"},[t._v(t._s(t.$strings.HeaderBulkChapterModal))])])]},proxy:!0}]),model:{value:t.showBulkChapterModal,callback:function(e){t.showBulkChapterModal=e},expression:"showBulkChapterModal"}},[t._v(" "),e("div",{staticClass:"w-full h-full max-h-full text-sm rounded-lg bg-bg shadow-lg border border-black-300 relative p-6"},[e("div",{staticClass:"flex flex-col space-y-8"},[e("p",{staticClass:"text-base"},[t._v(t._s(t.$strings.MessageBulkChapterPattern))]),t._v(" "),t.detectedPattern?e("div",{staticClass:"text-sm text-gray-400 bg-gray-800 p-2 rounded"},[e("strong",[t._v(t._s(t.$strings.LabelDetectedPattern))]),t._v(' "'+t._s(t.detectedPattern.before)+t._s(t.formatNumberWithPadding(t.detectedPattern.startingNumber,t.detectedPattern))+t._s(t.detectedPattern.after)+'"\n          '),e("br"),t._v(" "),e("strong",[t._v(t._s(t.$strings.LabelNextChapters))]),t._v('\n          "'+t._s(t.detectedPattern.before)+t._s(t.formatNumberWithPadding(t.detectedPattern.startingNumber+1,t.detectedPattern))+t._s(t.detectedPattern.after)+'", "'+t._s(t.detectedPattern.before)+t._s(t.formatNumberWithPadding(t.detectedPattern.startingNumber+2,t.detectedPattern))+t._s(t.detectedPattern.after)+'", etc.\n        ')]):t._e(),t._v(" "),e("div",{staticClass:"flex px-1 items-center"},[e("label",{staticClass:"text-base font-medium"},[t._v(t._s(t.$strings.LabelNumberOfChapters))]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),e("ui-text-input",{staticClass:"w-14",style:{height:"2em"},attrs:{type:"number",min:"1",max:"50"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addBulkChapters.apply(null,arguments)}},model:{value:t.bulkChapterCount,callback:function(e){t.bulkChapterCount=e},expression:"bulkChapterCount"}})],1),t._v(" "),e("div",{staticClass:"flex px-1 items-center"},[e("ui-btn",{attrs:{small:""},on:{click:function(e){t.showBulkChapterModal=!1}}},[t._v(t._s(t.$strings.ButtonCancel))]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),e("ui-btn",{attrs:{small:"",color:"bg-success"},on:{click:t.addBulkChapters}},[t._v(t._s(t.$strings.ButtonAddChapters))])],1)])])])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiCheckbox:r(184).default,UiBtn:r(42).default,UiTextInput:r(68).default,UiTooltip:r(76).default,UiTimePicker:r(871).default,WidgetsLoadingSpinner:r(151).default,UiLoadingIndicator:r(348).default,UiTextInputWithLabel:r(121).default,UiDropdown:r(236).default,WidgetsAlert:r(657).default,ModalsModal:r(39).default})},643:function(t,e,r){"use strict";var n=r(644).has;t.exports=function(t){return n(t),t}},644:function(t,e,r){"use strict";var n=r(13),o=Set.prototype;t.exports={Set:Set,add:n(o.add),has:n(o.has),remove:n(o.delete),proto:o}},645:function(t,e,r){"use strict";var n=r(13),o=r(650),l=r(644),c=l.Set,h=l.proto,d=n(h.forEach),f=n(h.keys),m=f(new c).next;t.exports=function(t,e,r){return r?o({iterator:f(t),next:m},e):d(t,e)}},649:function(t,e,r){"use strict";var n=r(64),o=r(24),l=r(692),c=r(32),h=n("Set");t.exports=function(t){return function(t){return c(t)&&"number"==typeof t.size&&o(t.has)&&o(t.keys)}(t)?t:l(t)?new h(t):t}},650:function(t,e,r){"use strict";var n=r(30);t.exports=function(t,e,r){for(var o,l,c=r?t:t.iterator,h=t.next;!(o=n(h,c)).done;)if(void 0!==(l=e(o.value)))return l}},651:function(t,e,r){"use strict";var n=r(78),o=r(37),l=r(30),c=r(99),h=r(694),d="Invalid size",f=RangeError,m=TypeError,v=Math.max,C=function(t,e){this.set=t,this.size=v(e,0),this.has=n(t.has),this.keys=n(t.keys)};C.prototype={getIterator:function(){return h(o(l(this.keys,this.set)))},includes:function(t){return l(this.has,this.set,t)}},t.exports=function(t){o(t);var e=+t.size;if(e!=e)throw new m(d);var r=c(e);if(r<0)throw new f(d);return new C(t,r)}},655:function(t,e,r){"use strict";var n=r(360),o=r(644);t.exports=n(o.proto,"size","get")||function(t){return t.size}},656:function(t,e,r){"use strict";r(686)},657:function(t,e,r){"use strict";r.r(e);var n={props:{type:{type:String,default:"error"}},data:function(){return{}},computed:{icon:function(){return"error"===this.type||"warning"===this.type?"report":"info"},wrapperClass:function(){switch(this.type){case"error":return"bg-error/5 border-error/60 text-error";case"warning":return"bg-warning/5 border-warning/60 text-warning";case"success":return"bg-success/5 border-success/60 text-success";case"info":return"bg-info/5 border-info/60 text-info";default:return"bg-primary/5 border-primary/60 text-primary"}}},methods:{},mounted:function(){}},o=r(4),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full border rounded-lg flex items-center relative py-4 pl-16",class:t.wrapperClass},[e("div",{staticClass:"absolute top-0 left-4 h-full flex items-center"},[e("span",{staticClass:"material-symbols text-2xl"},[t._v(t._s(t.icon))])]),t._v(" "),t._t("default")],2)}),[],!1,null,null,null);e.default=component.exports},658:function(t,e,r){"use strict";var n=r(9),o=r(643),l=r(644).add;n({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=o(this),e=0,r=arguments.length;e<r;e++)l(t,arguments[e]);return t}})},659:function(t,e,r){"use strict";var n=r(9),o=r(643),l=r(644).remove;n({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t,e=o(this),r=!0,n=0,c=arguments.length;n<c;n++)t=l(e,arguments[n]),r=r&&t;return!!r}})},660:function(t,e,r){"use strict";var n=r(9),o=r(30),l=r(649),c=r(693);n({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return o(c,this,l(t))}})},661:function(t,e,r){"use strict";var n=r(644),o=r(645),l=n.Set,c=n.add;t.exports=function(t){var e=new l;return o(t,(function(t){c(e,t)})),e}},662:function(t,e,r){"use strict";var n=r(9),o=r(105),l=r(643),c=r(645);n({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var e=l(this),r=o(t,arguments.length>1?arguments[1]:void 0);return!1!==c(e,(function(t){if(!r(t,t,e))return!1}),!0)}})},663:function(t,e,r){"use strict";var n=r(9),o=r(105),l=r(643),c=r(644),h=r(645),d=c.Set,f=c.add;n({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var e=l(this),r=o(t,arguments.length>1?arguments[1]:void 0),n=new d;return h(e,(function(t){r(t,t,e)&&f(n,t)})),n}})},664:function(t,e,r){"use strict";var n=r(9),o=r(105),l=r(643),c=r(645);n({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var e=l(this),r=o(t,arguments.length>1?arguments[1]:void 0),n=c(e,(function(t){if(r(t,t,e))return{value:t}}),!0);return n&&n.value}})},665:function(t,e,r){"use strict";var n=r(9),o=r(30),l=r(649),c=r(695);n({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return o(c,this,l(t))}})},666:function(t,e,r){"use strict";var n=r(9),o=r(30),l=r(649),c=r(696);n({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return o(c,this,l(t))}})},667:function(t,e,r){"use strict";var n=r(9),o=r(30),l=r(649),c=r(697);n({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return o(c,this,l(t))}})},668:function(t,e,r){"use strict";var n=r(9),o=r(30),l=r(649),c=r(698);n({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return o(c,this,l(t))}})},669:function(t,e,r){"use strict";var n=r(9),o=r(13),l=r(643),c=r(645),h=r(34),d=o([].join),f=o([].push);n({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var e=l(this),r=void 0===t?",":h(t),n=[];return c(e,(function(t){f(n,t)})),d(n,r)}})},670:function(t,e,r){"use strict";var n=r(9),o=r(105),l=r(643),c=r(644),h=r(645),d=c.Set,f=c.add;n({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var e=l(this),r=o(t,arguments.length>1?arguments[1]:void 0),n=new d;return h(e,(function(t){f(n,r(t,t,e))})),n}})},671:function(t,e,r){"use strict";var n=r(9),o=r(78),l=r(643),c=r(645),h=TypeError;n({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var e=l(this),r=arguments.length<2,n=r?void 0:arguments[1];if(o(t),c(e,(function(o){r?(r=!1,n=o):n=t(n,o,o,e)})),r)throw new h("Reduce of empty set with no initial value");return n}})},672:function(t,e,r){"use strict";var n=r(9),o=r(105),l=r(643),c=r(645);n({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var e=l(this),r=o(t,arguments.length>1?arguments[1]:void 0);return!0===c(e,(function(t){if(r(t,t,e))return!0}),!0)}})},673:function(t,e,r){"use strict";var n=r(9),o=r(30),l=r(649),c=r(699);n({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return o(c,this,l(t))}})},674:function(t,e,r){"use strict";var n=r(9),o=r(30),l=r(649),c=r(700);n({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return o(c,this,l(t))}})},681:function(t,e,r){"use strict";var n=r(93),o=r(106),l=r(187),c=r(105),h=r(153),d=r(73),f=r(155),m=r(240),v=r(154),C=r(239),x=r(31),w=r(156).fastKey,y=r(74),k=y.set,_=y.getterFor;t.exports={getConstructor:function(t,e,r,m){var v=t((function(t,o){h(t,C),k(t,{type:e,index:n(null),first:null,last:null,size:0}),x||(t.size=0),d(o)||f(o,t[m],{that:t,AS_ENTRIES:r})})),C=v.prototype,y=_(e),S=function(t,e,r){var n,o,l=y(t),c=D(t,e);return c?c.value=r:(l.last=c={index:o=w(e,!0),key:e,value:r,previous:n=l.last,next:null,removed:!1},l.first||(l.first=c),n&&(n.next=c),x?l.size++:t.size++,"F"!==o&&(l.index[o]=c)),t},D=function(t,e){var r,n=y(t),o=w(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key===e)return r};return l(C,{clear:function(){for(var t=y(this),e=t.first;e;)e.removed=!0,e.previous&&(e.previous=e.previous.next=null),e=e.next;t.first=t.last=null,t.index=n(null),x?t.size=0:this.size=0},delete:function(t){var e=this,r=y(e),n=D(e,t);if(n){var o=n.next,l=n.previous;delete r.index[n.index],n.removed=!0,l&&(l.next=o),o&&(o.previous=l),r.first===n&&(r.first=o),r.last===n&&(r.last=l),x?r.size--:e.size--}return!!n},forEach:function(t){for(var e,r=y(this),n=c(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!D(this,t)}}),l(C,r?{get:function(t){var e=D(this,t);return e&&e.value},set:function(t,e){return S(this,0===t?0:t,e)}}:{add:function(t){return S(this,t=0===t?0:t,t)}}),x&&o(C,"size",{configurable:!0,get:function(){return y(this).size}}),v},setStrong:function(t,e,r){var n=e+" Iterator",o=_(e),l=_(n);m(t,e,(function(t,e){k(this,{type:n,target:t,state:o(t),kind:e,last:null})}),(function(){for(var t=l(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?v("keys"===e?r.key:"values"===e?r.value:[r.key,r.value],!1):(t.target=null,v(void 0,!0))}),r?"entries":"values",!r,!0),C(e)}}},686:function(t,e,r){"use strict";r(355)("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r(681))},692:function(t,e,r){"use strict";var n=r(123),o=r(36),l=r(73),c=r(23),h=r(125),d=c("iterator"),f=Object;t.exports=function(t){if(l(t))return!1;var e=f(t);return void 0!==e[d]||"@@iterator"in e||o(h,n(e))}},693:function(t,e,r){"use strict";var n=r(643),o=r(644),l=r(661),c=r(655),h=r(651),d=r(645),f=r(650),m=o.has,v=o.remove;t.exports=function(t){var e=n(this),r=h(t),o=l(e);return c(e)<=r.size?d(e,(function(t){r.includes(t)&&v(o,t)})):f(r.getIterator(),(function(t){m(e,t)&&v(o,t)})),o}},694:function(t,e,r){"use strict";t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},695:function(t,e,r){"use strict";var n=r(643),o=r(644),l=r(655),c=r(651),h=r(645),d=r(650),f=o.Set,m=o.add,v=o.has;t.exports=function(t){var e=n(this),r=c(t),o=new f;return l(e)>r.size?d(r.getIterator(),(function(t){v(e,t)&&m(o,t)})):h(e,(function(t){r.includes(t)&&m(o,t)})),o}},696:function(t,e,r){"use strict";var n=r(643),o=r(644).has,l=r(655),c=r(651),h=r(645),d=r(650),f=r(238);t.exports=function(t){var e=n(this),r=c(t);if(l(e)<=r.size)return!1!==h(e,(function(t){if(r.includes(t))return!1}),!0);var m=r.getIterator();return!1!==d(m,(function(t){if(o(e,t))return f(m,"normal",!1)}))}},697:function(t,e,r){"use strict";var n=r(643),o=r(655),l=r(645),c=r(651);t.exports=function(t){var e=n(this),r=c(t);return!(o(e)>r.size)&&!1!==l(e,(function(t){if(!r.includes(t))return!1}),!0)}},698:function(t,e,r){"use strict";var n=r(643),o=r(644).has,l=r(655),c=r(651),h=r(650),d=r(238);t.exports=function(t){var e=n(this),r=c(t);if(l(e)<r.size)return!1;var f=r.getIterator();return!1!==h(f,(function(t){if(!o(e,t))return d(f,"normal",!1)}))}},699:function(t,e,r){"use strict";var n=r(643),o=r(644),l=r(661),c=r(651),h=r(650),d=o.add,f=o.has,m=o.remove;t.exports=function(t){var e=n(this),r=c(t).getIterator(),o=l(e);return h(r,(function(t){f(e,t)?m(o,t):d(o,t)})),o}},700:function(t,e,r){"use strict";var n=r(643),o=r(644).add,l=r(661),c=r(651),h=r(650);t.exports=function(t){var e=n(this),r=c(t).getIterator(),d=l(e);return h(r,(function(t){o(d,t)})),d}},722:function(t,e,r){var content=r(778);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("21f22db2",content,!0,{sourceMap:!1})},777:function(t,e,r){"use strict";r(722)},778:function(t,e,r){var n=r(18)((function(i){return i[1]}));n.push([t.i,"\n.digit-focused[data-v-0c2344e6] {\n  background-color: #555;\n}\n",""]),n.locals={},t.exports=n},871:function(t,e,r){"use strict";r.r(e);r(14),r(35),r(352),r(63),r(77);var n={props:{value:[String,Number],showThreeDigitHour:Boolean},data:function(){return{clickOutsideObj:{handler:this.clickOutside,events:["mousedown"],isActive:!0},digitDisplay:["hour1","hour0",":","minute1","minute0",":","second1","second0"],focusedDigit:null,digits:{hour2:0,hour1:0,hour0:0,minute1:0,minute0:0,second1:0,second0:0},isOver99Hours:!1}},watch:{value:{immediate:!0,handler:function(){this.initDigits()}}},computed:{},methods:{initDigits:function(){var t=!this.value||isNaN(this.value)?0:Number(this.value);t=Math.round(t);var e=Math.floor(t/60),r=t-60*e,n=Math.floor(e/60);e-=60*n,this.digits.second1=r<=9?0:Number(String(r)[0]),this.digits.second0=r<=9?r:Number(String(r)[1]),this.digits.minute1=e<=9?0:Number(String(e)[0]),this.digits.minute0=e<=9?e:Number(String(e)[1]),n>99?(this.digits.hour2=Number(String(n)[0]),this.digits.hour1=Number(String(n)[1]),this.digits.hour0=Number(String(n)[2]),this.isOver99Hours=!0):(this.digits.hour1=n<=9?0:Number(String(n)[0]),this.digits.hour0=n<=9?n:Number(String(n)[1]),this.isOver99Hours=this.showThreeDigitHour),this.isOver99Hours?this.digitDisplay=["hour2","hour1","hour0",":","minute1","minute0",":","second1","second0"]:this.digitDisplay=["hour1","hour0",":","minute1","minute0",":","second1","second0"]},updateSeconds:function(){var t=this.digits.second0+10*this.digits.second1;t+=60*this.digits.minute0+600*this.digits.minute1,t+=3600*this.digits.hour0+36e3*this.digits.hour1,this.isOver99Hours&&(t+=36e4*this.digits.hour2),Number(this.value)!==t&&(this.$emit("input",t),this.$emit("change",t))},clickMedian:function(t){this.focusedDigit=t>=5?"second1":"minute1"},clickOutside:function(){this.removeFocus()},removeFocus:function(){this.focusedDigit=null,this.removeListeners()},focusDigit:function(t){(null==this.focusedDigit||isNaN(this.focusedDigit))&&this.initListeners(),this.focusedDigit=t},clickInput:function(){this.focusedDigit||this.focusDigit("second0")},shiftFocusLeft:function(){if(this.focusedDigit&&!this.focusedDigit.endsWith("2"))if(this.focusedDigit.endsWith("1"))this.focusedDigit.startsWith("second")?this.focusedDigit="minute0":this.focusedDigit.startsWith("minute")?this.focusedDigit="hour0":this.isOver99Hours&&this.focusedDigit.startsWith("hour")&&(this.focusedDigit="hour2");else{var t=this.focusedDigit.replace("0","1");this.focusedDigit=t}},shiftFocusRight:function(){if(this.focusedDigit)if(this.focusedDigit.endsWith("2"))this.focusedDigit="hour1";else if(this.focusedDigit.endsWith("1")){var t=this.focusedDigit.replace("1","0");this.focusedDigit=t}else this.focusedDigit.startsWith("hour")?this.focusedDigit="minute1":this.focusedDigit.startsWith("minute")&&(this.focusedDigit="second1")},increaseFocused:function(){if(this.focusedDigit){var t=this.focusedDigit.endsWith("1"),e=Number(this.digits[this.focusedDigit]);t&&!this.focusedDigit.startsWith("hour")?this.digits[this.focusedDigit]=(e+1)%6:this.digits[this.focusedDigit]=(e+1)%10,this.updateSeconds()}},decreaseFocused:function(){if(this.focusedDigit){var t=this.focusedDigit.endsWith("1"),e=Number(this.digits[this.focusedDigit]);t&&!this.focusedDigit.startsWith("hour")?this.digits[this.focusedDigit]=e-1<0?5:e-1:this.digits[this.focusedDigit]=e-1<0?9:e-1,this.updateSeconds()}},keydown:function(t){if(this.focusedDigit&&t.key){if("ArrowLeft"===t.key)return this.shiftFocusLeft();if("ArrowRight"===t.key)return this.shiftFocusRight();if("ArrowUp"===t.key)return this.increaseFocused();if("ArrowDown"===t.key)return this.decreaseFocused();if("Enter"===t.key||"Escape"===t.key||"Tab"===t.key)return this.removeFocus();if(!isNaN(t.key)){var e=Number(t.key);this.focusedDigit.endsWith("1")&&!this.focusedDigit.startsWith("hour")&&e>=6&&(e=5),this.digits[this.focusedDigit]=e,this.updateSeconds(),this.shiftFocusRight()}}},initListeners:function(){window.addEventListener("keydown",this.keydown)},removeListeners:function(){window.removeEventListener("keydown",this.keydown)}},mounted:function(){},beforeDestroy:function(){this.removeListeners()}},o=(r(777),r(4)),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative",attrs:{tabindex:"0"},on:{focus:function(e){return t.focusDigit("second0")}}},[e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.clickOutsideObj,expression:"clickOutsideObj"}],staticClass:"rounded-sm text-gray-200 border w-full px-3 py-2",class:t.focusedDigit?"bg-primary/50 border-gray-300":"bg-primary border-gray-600",on:{click:t.clickInput}},[e("div",{staticClass:"flex items-center"},[t._l(t.digitDisplay,(function(r,n){return[":"==r?e("div",{key:n,staticClass:"px-px",on:{click:function(e){return e.stopPropagation(),t.clickMedian(n)}}},[t._v(":")]):e("div",{key:n,staticClass:"px-px",class:{"digit-focused":t.focusedDigit==r},on:{click:function(e){return e.stopPropagation(),t.focusDigit(r)}}},[t._v(t._s(t.digits[r]))])]}))],2)])])}),[],!1,null,"0c2344e6",null);e.default=component.exports}}]);