(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{1087:function(t,e,r){"use strict";r.r(e);r(15);var n=r(16),o=(r(26),r(85),r(41),r(22),r(27),r(44),r(45),r(38),r(28),r(8),r(52),r(690));function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l={components:{draggable:r.n(o).a},props:{library:{type:Object,default:function(){return null}},processing:Boolean},data:function(){return{drag:!1,dragOptions:{animation:200,group:"description",ghostClass:"ghost"},metadataSourceData:{folderStructure:{id:"folderStructure",name:"Folder structure",include:!0},audioMetatags:{id:"audioMetatags",name:"Audio file meta tags OR ebook metadata",include:!0},nfoFile:{id:"nfoFile",name:"NFO file",include:!0},txtFiles:{id:"txtFiles",name:"desc.txt & reader.txt files",include:!0},opfFile:{id:"opfFile",name:"OPF file",include:!0},absMetadata:{id:"absMetadata",name:"Audiobookshelf metadata file",include:!0}},metadataSourceMapped:[]}},computed:{librarySettings:function(){return this.library.settings||{}},mediaType:function(){return this.library.mediaType},isBookLibrary:function(){return"book"===this.mediaType},firstActiveSourceIndex:function(){return this.metadataSourceMapped.findIndex((function(source){return source.include}))},lastActiveSourceIndex:function(){return this.metadataSourceMapped.findLastIndex((function(source){return source.include}))}},methods:{getSourceIndex:function(source){return(this.librarySettings.metadataPrecedence||[]).map((function(s){return s})).reverse().findIndex((function(s){return s===source}))+1},resetToDefault:function(){for(var t in this.metadataSourceMapped=[],this.metadataSourceData)this.metadataSourceMapped.push(c({},this.metadataSourceData[t]));this.metadataSourceMapped.reverse(),this.$emit("update",this.getLibraryData())},getLibraryData:function(){var t=this.metadataSourceMapped.map((function(source){return source.include?source.id:null})).filter((function(s){return s}));return t.reverse(),{settings:{metadataPrecedence:t}}},includeToggled:function(source){this.updated()},draggableUpdate:function(){this.updated()},updated:function(){this.$emit("update",this.getLibraryData())},init:function(){var t=this,e=this.librarySettings.metadataPrecedence||[];for(var r in this.metadataSourceMapped=e.map((function(source){return t.metadataSourceData[source]})).filter((function(s){return s})),this.metadataSourceData)if(!e.includes(r)){var n=c(c({},this.metadataSourceData[r]),{},{include:!1});this.metadataSourceMapped.unshift(n)}this.metadataSourceMapped.reverse()}},mounted:function(){this.init()}},f=r(4),component=Object(f.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full h-full px-1 md:px-4 py-1 mb-4"},[e("div",{staticClass:"flex items-center justify-between mb-2"},[e("h2",{staticClass:"text-base md:text-lg text-gray-200"},[t._v(t._s(t.$strings.HeaderMetadataOrderOfPrecedence))]),t._v(" "),e("ui-btn",{attrs:{small:""},on:{click:t.resetToDefault}},[t._v(t._s(t.$strings.ButtonResetToDefault))])],1),t._v(" "),e("div",{staticClass:"flex items-center justify-between md:justify-start mb-4"},[e("p",{staticClass:"text-sm text-gray-300 pr-2"},[t._v(t._s(t.$strings.LabelMetadataOrderOfPrecedenceDescription))]),t._v(" "),e("ui-tooltip",{staticClass:"inline-flex",attrs:{text:t.$strings.LabelClickForMoreInfo}},[e("a",{staticClass:"inline-flex",attrs:{href:"https://www.audiobookshelf.org/guides/book-scanner",target:"_blank"}},[e("span",{staticClass:"material-symbols text-xl w-5"},[t._v("help_outline")])])])],1),t._v(" "),e("draggable",t._b({staticClass:"list-group",attrs:{draggable:".item",handle:".drag-handle",tag:"ul"},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1},update:t.draggableUpdate},model:{value:t.metadataSourceMapped,callback:function(e){t.metadataSourceMapped=e},expression:"metadataSourceMapped"}},"draggable",t.dragOptions,!1),[e("transition-group",{attrs:{type:"transition",name:t.drag?null:"flip-list"}},t._l(t.metadataSourceMapped,(function(source,r){return e("li",{key:source.id,staticClass:"w-full px-2 flex items-center relative border border-white/10",class:source.include?"item":"opacity-50"},[e("span",{staticClass:"material-symbols drag-handle text-xl text-gray-400 hover:text-gray-50 mr-2 md:mr-4"},[t._v("reorder")]),t._v(" "),e("div",{staticClass:"text-center py-1 w-8 min-w-8"},[t._v("\n          "+t._s(source.include?t.getSourceIndex(source.id):"")+"\n        ")]),t._v(" "),e("div",{staticClass:"grow inline-flex justify-between px-4 py-3"},[t._v("\n          "+t._s(source.name)+" "),!source.include||r!==t.firstActiveSourceIndex&&r!==t.lastActiveSourceIndex?t._e():e("span",{staticClass:"px-2 italic font-semibold text-xs text-gray-400"},[t._v(t._s(r===t.firstActiveSourceIndex?t.$strings.LabelHighestPriority:t.$strings.LabelLowestPriority))])]),t._v(" "),e("div",{staticClass:"px-2 opacity-100"},[e("ui-toggle-switch",{attrs:{"off-color":"error"},on:{input:function(e){return t.includeToggled(source)}},model:{value:source.include,callback:function(e){t.$set(source,"include",e)},expression:"source.include"}})],1)])})),0)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiBtn:r(42).default,UiTooltip:r(76).default,UiToggleSwitch:r(185).default})}}]);