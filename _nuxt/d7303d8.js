(window.webpackJsonp=window.webpackJsonp||[]).push([[126,127],{746:function(t,e,o){"use strict";o.r(e);o(17),o(8);var n={props:{libraryItemId:String,showFullPath:Boolean,file:{type:Object,default:function(){}}},data:function(){return{processing:!1}},computed:{userToken:function(){return this.$store.getters["user/getToken"]},userCanDownload:function(){return this.$store.getters["user/getUserCanDownload"]},userCanDelete:function(){return this.$store.getters["user/getUserCanDelete"]},userCanUpdate:function(){return this.$store.getters["user/getUserCanUpdate"]},userIsAdmin:function(){return this.$store.getters["user/getIsAdminOrUp"]},downloadUrl:function(){return"".concat("/audiobookshelf","/api/items/").concat(this.libraryItemId,"/file/").concat(this.file.ino,"/download?token=").concat(this.userToken)},isPrimary:function(){return!this.file.isSupplementary},libraryIsAudiobooksOnly:function(){return this.$store.getters["libraries/getLibraryIsAudiobooksOnly"]},contextMenuItems:function(){var t=[];return this.userCanUpdate&&!this.libraryIsAudiobooksOnly&&t.push({text:this.isPrimary?this.$strings.LabelSetEbookAsSupplementary:this.$strings.LabelSetEbookAsPrimary,action:"updateStatus"}),this.userCanDownload&&t.push({text:this.$strings.LabelDownload,action:"download"}),this.userCanDelete&&t.push({text:this.$strings.ButtonDelete,action:"delete"}),t}},methods:{readEbook:function(){this.$emit("read",this.file.ino)},contextMenuAction:function(t){var e=t.action;"delete"===e?this.deleteLibraryFile():"download"===e?this.downloadLibraryFile():"updateStatus"===e&&this.updateEbookStatus()},updateEbookStatus:function(){var t=this;this.processing=!0,this.$axios.$patch("/api/items/".concat(this.libraryItemId,"/ebook/").concat(this.file.ino,"/status")).then((function(){t.$toast.success("Ebook updated")})).catch((function(e){console.error("Failed to update ebook",e),t.$toast.error("Failed to update ebook")})).finally((function(){t.processing=!1}))},deleteLibraryFile:function(){var t=this,e={message:this.$strings.MessageConfirmDeleteFile,callback:function(e){e&&(t.processing=!0,t.$axios.$delete("/api/items/".concat(t.libraryItemId,"/file/").concat(t.file.ino)).then((function(){t.$toast.success(t.$strings.ToastDeleteFileSuccess)})).catch((function(e){console.error("Failed to delete file",e),t.$toast.error(t.$strings.ToastDeleteFileFailed)})).finally((function(){t.processing=!1})))},type:"yesNo"};this.$store.commit("globals/setConfirmPrompt",e)},downloadLibraryFile:function(){this.$downloadFile(this.downloadUrl,this.file.metadata.filename)}},mounted:function(){}},r=o(4),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"px-4"},[t._v("\n    "+t._s(t.showFullPath?t.file.metadata.path:t.file.metadata.relPath)+" "),e("ui-tooltip",{staticClass:"inline-block",attrs:{text:t.$strings.LabelPrimaryEbook}},[t.isPrimary?e("span",{staticClass:"material-symbols text-success align-text-bottom"},[t._v("check_circle")]):t._e()])],1),t._v(" "),e("td",[t._v("\n    "+t._s(t.$bytesPretty(t.file.metadata.size))+"\n  ")]),t._v(" "),e("td",{staticClass:"text-xs"},[e("ui-icon-btn",{attrs:{icon:"auto_stories",outlined:"",borderless:"","icon-font-size":"1.125rem",size:8},on:{click:t.readEbook}})],1),t._v(" "),t.contextMenuItems.length?e("td",{staticClass:"text-center"},[e("ui-context-menu-dropdown",{attrs:{items:t.contextMenuItems,"menu-width":130,processing:t.processing},on:{action:t.contextMenuAction}})],1):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiTooltip:o(76).default,UiIconBtn:o(148).default,UiContextMenuDropdown:o(349).default})},861:function(t,e,o){"use strict";o.r(e);o(26),o(14),o(8);var n={props:{libraryItem:{type:Object,default:function(){}}},data:function(){return{showFiles:!1,showFullPath:!1}},computed:{libraryItemId:function(){return this.libraryItem.id},userCanDownload:function(){return this.$store.getters["user/getUserCanDownload"]},userCanDelete:function(){return this.$store.getters["user/getUserCanDelete"]},userCanUpdate:function(){return this.$store.getters["user/getUserCanUpdate"]},userIsAdmin:function(){return this.$store.getters["user/getIsAdminOrUp"]},libraryIsAudiobooksOnly:function(){return this.$store.getters["libraries/getLibraryIsAudiobooksOnly"]},showMoreColumn:function(){return this.userCanDelete||this.userCanDownload||this.userCanUpdate&&!this.libraryIsAudiobooksOnly},ebookFiles:function(){return(this.libraryItem.libraryFiles||[]).filter((function(t){return"ebook"===t.fileType}))}},methods:{toggleFullPath:function(){this.showFullPath=!this.showFullPath,localStorage.setItem("showFullPath",this.showFullPath?1:0)},readEbook:function(t){this.$store.commit("showEReader",{libraryItem:this.libraryItem,keepProgress:!1,fileId:t})},clickBar:function(){this.showFiles=!this.showFiles}},mounted:function(){this.userIsAdmin&&(this.showFullPath=!!Number(localStorage.getItem("showFullPath")||0))}},r=o(4),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full my-2"},[e("div",{staticClass:"w-full bg-primary px-4 md:px-6 py-2 flex items-center cursor-pointer",on:{click:function(e){return e.stopPropagation(),t.clickBar.apply(null,arguments)}}},[e("p",{staticClass:"pr-2 md:pr-4"},[t._v(t._s(t.$strings.HeaderEbookFiles))]),t._v(" "),e("div",{staticClass:"h-5 md:h-7 w-5 md:w-7 rounded-full bg-white/10 flex items-center justify-center"},[e("span",{staticClass:"text-sm font-mono"},[t._v(t._s(t.ebookFiles.length))])]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),t.userIsAdmin?e("ui-btn",{staticClass:"mr-2 hidden md:block",attrs:{small:"",color:t.showFullPath?"bg-gray-600":"bg-primary"},on:{click:function(e){return e.stopPropagation(),t.toggleFullPath.apply(null,arguments)}}},[t._v(t._s(t.$strings.ButtonFullPath))]):t._e(),t._v(" "),e("div",{staticClass:"cursor-pointer h-10 w-10 rounded-full hover:bg-black-400 flex justify-center items-center duration-500",class:t.showFiles?"transform rotate-180":""},[e("span",{staticClass:"material-symbols text-4xl"},[t._v("îŒ“")])])],1),t._v(" "),e("transition",{attrs:{name:"slide"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFiles,expression:"showFiles"}],staticClass:"w-full"},[e("table",{staticClass:"text-sm tracksTable"},[e("tr",[e("th",{staticClass:"text-left px-4"},[t._v(t._s(t.$strings.LabelPath))]),t._v(" "),e("th",{staticClass:"text-left w-24 min-w-24"},[t._v(t._s(t.$strings.LabelSize))]),t._v(" "),e("th",{staticClass:"text-left px-4 w-24"},[t._v("\n            "+t._s(t.$strings.LabelRead)+" "),e("ui-tooltip",{staticClass:"inline-block",attrs:{text:t.$strings.LabelReadEbookWithoutProgress,direction:"top"}},[e("span",{staticClass:"material-symbols text-sm align-middle"},[t._v("info")])])],1),t._v(" "),t.showMoreColumn?e("th",{staticClass:"text-center w-16"}):t._e()]),t._v(" "),t._l(t.ebookFiles,(function(o){return[e("tables-ebook-files-table-row",{key:o.path,attrs:{libraryItemId:t.libraryItemId,showFullPath:t.showFullPath,file:o},on:{read:t.readEbook}})]}))],2)])])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiBtn:o(42).default,UiTooltip:o(76).default,TablesEbookFilesTableRow:o(746).default})}}]);