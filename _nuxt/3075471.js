(window.webpackJsonp=window.webpackJsonp||[]).push([[158],{738:function(t,e,n){"use strict";n.r(e);n(22),n(43);var l=n(642);n(84),n(17),n(33),n(41),n(27),n(38),n(83),n(57),n(15),n(8),n(35),n(59),n(656),n(52),n(62),n(658),n(659),n(660),n(662),n(663),n(664),n(665),n(666),n(667),n(668),n(669),n(670),n(671),n(672),n(673),n(674),n(58);function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(t){if("string"==typeof t)return d(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var l=0,r=function(){};return{s:r,n:function(){return l>=t.length?{done:!0}:{done:!1,value:t[l++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function d(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=Array(a);e<a;e++)n[e]=t[e];return n}var o={props:{libraryItem:{type:Object,default:function(){}}},data:function(){return{details:{title:null,author:null,description:null,releaseDate:null,genres:[],feedUrl:null,imageUrl:null,itunesPageUrl:null,itunesId:null,itunesArtistId:null,explicit:!1,language:null,type:null},newTags:[]}},watch:{libraryItem:{immediate:!0,handler:function(t){t&&this.init()}}},computed:{media:function(){return this.libraryItem&&this.libraryItem.media||{}},mediaMetadata:function(){return this.media.metadata||{}},genres:function(){return this.filterData.genres||[]},tags:function(){return this.filterData.tags||[]},filterData:function(){return this.$store.state.libraries.filterData||{}},podcastTypes:function(){var t=this;return this.$store.state.globals.podcastTypes.map((function(e){return{text:t.$strings[e.descriptionKey]||e.text,value:e.value}}))}},methods:{handleInputChange:function(){this.$emit("change",{libraryItemId:this.libraryItem.id,hasChanges:this.checkForChanges().hasChanges})},getDetails:function(){return this.forceBlur(),this.checkForChanges()},getTitleAndAuthorName:function(){return this.forceBlur(),{title:this.details.title,author:this.details.author}},mapBatchDetails:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"overwrite";for(var n in t)"append"===e?"tags"===n?this.newTags=Object(l.a)(new Set(this.newTags.concat(t.tags))):"genres"===n&&(this.details[n]=Object(l.a)(new Set(this.details[n].concat(t[n])))):"tags"===n?this.newTags=Object(l.a)(t.tags):this.details[n]="genres"===n?Object(l.a)(t[n]):t[n];this.handleInputChange()},forceBlur:function(){this.$refs.titleInput&&this.$refs.titleInput.blur(),this.$refs.authorInput&&this.$refs.authorInput.blur(),this.$refs.releaseDateInput&&this.$refs.releaseDateInput.blur(),this.$refs.descriptionInput&&this.$refs.descriptionInput.blur(),this.$refs.feedUrlInput&&this.$refs.feedUrlInput.blur(),this.$refs.itunesIdInput&&this.$refs.itunesIdInput.blur(),this.$refs.languageInput&&this.$refs.languageInput.blur(),this.$refs.genresSelect&&this.$refs.genresSelect.isFocused&&this.$refs.genresSelect.forceBlur(),this.$refs.tagsSelect&&this.$refs.tagsSelect.isFocused&&this.$refs.tagsSelect.forceBlur()},stringArrayEqual:function(t,e){if(t.length!==e.length)return!1;var n,l=r(t);try{for(l.s();!(n=l.n()).done;){var d=n.value;if(!e.includes(d))return!1}}catch(t){l.e(t)}finally{l.f()}return!0},objectArrayEqual:function(t,e){var n=function(t){return Symbol.iterator in Object(t)};if(!n(t)||!n(e))throw console.error(t,e),new Error("Invalid arrays passed in");if(t.length!==e.length)return!1;var l,d=r(t);try{for(d.s();!(l=d.n()).done;){var o=l.value,c=e.find((function(a){return a.id===o.id}));if(!c)return!1;for(var h in o)if(o[h]!==c[h])return!1}}catch(t){d.e(t)}finally{d.f()}return!0},checkForChanges:function(){var t={};for(var e in this.details){var n=this.details[e],r=this.mediaMetadata[e];!n&&r||n&&!r?t[e]=n:"genres"===e?this.stringArrayEqual(n,r)||(t[e]=Object(l.a)(n)):n&&n!=r&&(t[e]=n)}var d={};return Object.keys(t).length&&(d.metadata=t),this.stringArrayEqual(this.newTags,this.media.tags||[])||(d.tags=Object(l.a)(this.newTags)),{updatePayload:d,hasChanges:!!Object.keys(d).length}},init:function(){this.details.title=this.mediaMetadata.title,this.details.author=this.mediaMetadata.author||"",this.details.description=this.mediaMetadata.description||"",this.details.releaseDate=this.mediaMetadata.releaseDate||"",this.details.genres=Object(l.a)(this.mediaMetadata.genres||[]),this.details.feedUrl=this.mediaMetadata.feedUrl||"",this.details.imageUrl=this.mediaMetadata.imageUrl||"",this.details.itunesPageUrl=this.mediaMetadata.itunesPageUrl||"",this.details.itunesId=this.mediaMetadata.itunesId||"",this.details.itunesArtistId=this.mediaMetadata.itunesArtistId||"",this.details.language=this.mediaMetadata.language||"",this.details.explicit=!!this.mediaMetadata.explicit,this.details.type=this.mediaMetadata.type||"episodic",this.newTags=Object(l.a)(this.media.tags||[])},submitForm:function(){this.$emit("submit")}},mounted:function(){}},c=o,h=n(4),component=Object(h.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full h-full relative"},[e("form",{staticClass:"w-full h-full px-4 py-6",on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("div",{staticClass:"flex -mx-1"},[e("div",{staticClass:"w-1/2 px-1"},[e("ui-text-input-with-label",{ref:"titleInput",attrs:{label:t.$strings.LabelTitle,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.title,callback:function(e){t.$set(t.details,"title",e)},expression:"details.title"}})],1),t._v(" "),e("div",{staticClass:"grow px-1"},[e("ui-text-input-with-label",{ref:"authorInput",attrs:{label:t.$strings.LabelAuthor,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.author,callback:function(e){t.$set(t.details,"author",e)},expression:"details.author"}})],1)]),t._v(" "),e("ui-text-input-with-label",{ref:"feedUrlInput",staticClass:"mt-2",attrs:{label:t.$strings.LabelRSSFeedURL,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.feedUrl,callback:function(e){t.$set(t.details,"feedUrl",e)},expression:"details.feedUrl"}}),t._v(" "),e("ui-textarea-with-label",{ref:"descriptionInput",staticClass:"mt-2",attrs:{rows:3,label:t.$strings.LabelDescription},on:{input:t.handleInputChange},model:{value:t.details.description,callback:function(e){t.$set(t.details,"description",e)},expression:"details.description"}}),t._v(" "),e("div",{staticClass:"flex mt-2 -mx-1"},[e("div",{staticClass:"w-1/2 px-1"},[e("ui-multi-select",{ref:"genresSelect",attrs:{label:t.$strings.LabelGenres,items:t.genres},on:{input:t.handleInputChange},model:{value:t.details.genres,callback:function(e){t.$set(t.details,"genres",e)},expression:"details.genres"}})],1),t._v(" "),e("div",{staticClass:"grow px-1"},[e("ui-multi-select",{ref:"tagsSelect",attrs:{label:t.$strings.LabelTags,items:t.tags},on:{input:t.handleInputChange},model:{value:t.newTags,callback:function(e){t.newTags=e},expression:"newTags"}})],1)]),t._v(" "),e("div",{staticClass:"flex mt-2 -mx-1"},[e("div",{staticClass:"w-1/4 px-1"},[e("ui-text-input-with-label",{ref:"releaseDateInput",attrs:{label:t.$strings.LabelReleaseDate,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.releaseDate,callback:function(e){t.$set(t.details,"releaseDate",e)},expression:"details.releaseDate"}})],1),t._v(" "),e("div",{staticClass:"w-1/4 px-1"},[e("ui-text-input-with-label",{ref:"itunesIdInput",attrs:{label:"iTunes ID","trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.itunesId,callback:function(e){t.$set(t.details,"itunesId",e)},expression:"details.itunesId"}})],1),t._v(" "),e("div",{staticClass:"w-1/4 px-1"},[e("ui-text-input-with-label",{ref:"languageInput",attrs:{label:t.$strings.LabelLanguage,"trim-whitespace":""},on:{input:t.handleInputChange},model:{value:t.details.language,callback:function(e){t.$set(t.details,"language",e)},expression:"details.language"}})],1),t._v(" "),e("div",{staticClass:"grow px-1 pt-6"},[e("div",{staticClass:"flex justify-center"},[e("ui-checkbox",{attrs:{label:t.$strings.LabelExplicit,"checkbox-bg":"primary","border-color":"gray-600","label-class":"pl-2 text-base font-semibold"},on:{input:t.handleInputChange},model:{value:t.details.explicit,callback:function(e){t.$set(t.details,"explicit",e)},expression:"details.explicit"}})],1)])]),t._v(" "),e("div",{staticClass:"flex mt-2 -mx-1"},[e("div",{staticClass:"w-1/4 px-1"},[e("ui-dropdown",{staticClass:"max-w-52",attrs:{label:t.$strings.LabelPodcastType,items:t.podcastTypes,small:""},on:{input:t.handleInputChange},model:{value:t.details.type,callback:function(e){t.$set(t.details,"type",e)},expression:"details.type"}})],1)])],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiTextInputWithLabel:n(121).default,UiTextareaWithLabel:n(186).default,UiMultiSelect:n(675).default,UiCheckbox:n(184).default,UiDropdown:n(236).default})}}]);