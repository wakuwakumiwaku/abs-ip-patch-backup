(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{688:function(t,e,l){"use strict";l.r(e);l(35),l(63),l(17),l(8),l(40);var o={props:{value:Boolean,audioFile:{type:Object,default:function(){}},libraryItemId:String},data:function(){return{probingFile:!1,ffprobeData:null,hasCopied:null}},watch:{show:function(t){t&&(this.ffprobeData=null,this.probingFile=!1)}},computed:{show:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},metadata:function(){var t;return(null===(t=this.audioFile)||void 0===t?void 0:t.metadata)||{}},metaTags:function(){var t;return(null===(t=this.audioFile)||void 0===t?void 0:t.metaTags)||{}},userIsAdminOrUp:function(){return this.$store.getters["user/getIsAdminOrUp"]},prettyFfprobeData:function(){return this.ffprobeData?JSON.stringify(this.ffprobeData,null,2):""}},methods:{getFFProbeData:function(){var t=this;this.probingFile=!0,this.$axios.$get("/api/items/".concat(this.libraryItemId,"/ffprobe/").concat(this.audioFile.ino)).then((function(data){console.log("Got ffprobe data",data),t.ffprobeData=data})).catch((function(e){console.error("Failed to get ffprobe data",e),t.$toast.error(t.$strings.ToastFailedToLoadData)})).finally((function(){t.probingFile=!1}))},copyToClipboard:function(){var t=this;clearTimeout(this.hasCopied),this.$copyToClipboard(this.prettyFfprobeData).then((function(e){t.hasCopied=setTimeout((function(){t.hasCopied=null}),2e3)}))}},mounted:function(){}},n=l(4),component=Object(n.a)(o,(function(){var t,e=this,l=e._self._c;return l("modals-modal",{attrs:{name:"audiofile-data-modal",width:700,height:"unset"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e.audioFile?l("div",{ref:"container",staticClass:"w-full rounded-lg bg-bg box-shadow-md overflow-y-auto overflow-x-hidden p-6",staticStyle:{"max-height":"80vh"}},[l("div",{staticClass:"flex items-center justify-between"},[l("p",{staticClass:"text-base text-gray-200 truncate"},[e._v(e._s(e.metadata.filename))]),e._v(" "),e.ffprobeData?l("ui-btn",{staticClass:"ml-2",attrs:{small:""},on:{click:function(t){e.ffprobeData=null}}},[e._v(e._s(e.$strings.ButtonReset))]):e.userIsAdminOrUp?l("ui-btn",{staticClass:"ml-2",attrs:{small:"",loading:e.probingFile},on:{click:e.getFFProbeData}},[e._v(e._s(e.$strings.ButtonProbeAudioFile))]):e._e()],1),e._v(" "),l("div",{staticClass:"w-full h-px bg-white/10 my-4"}),e._v(" "),e.ffprobeData?l("div",{staticClass:"w-full"},[l("div",{staticClass:"relative"},[l("ui-textarea-with-label",{staticClass:"text-xs",attrs:{value:e.prettyFfprobeData,readonly:"",rows:30}}),e._v(" "),l("button",{staticClass:"absolute top-4 right-4",class:e.hasCopied?"text-success":"text-gray-400 hover:text-white",on:{click:function(t){return t.stopPropagation(),e.copyToClipboard.apply(null,arguments)}}},[l("span",{staticClass:"material-symbols"},[e._v(e._s(e.hasCopied?"done":"content_copy"))])])],1)]):[l("ui-text-input-with-label",{staticClass:"mb-4 text-sm",attrs:{value:e.metadata.path,readonly:"",label:e.$strings.LabelPath}}),e._v(" "),l("div",{staticClass:"flex flex-col sm:flex-row text-sm"},[l("div",{staticClass:"w-full sm:w-1/2"},[l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelSize)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.$bytesPretty(e.metadata.size)))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelDuration)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.$secondsToTimestamp(e.audioFile.duration)))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v(e._s(e.$strings.LabelFormat))]),e._v(" "),l("p",[e._v(e._s(e.audioFile.format))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelChapters)+"\n            ")]),e._v(" "),l("p",[e._v(e._s((null===(t=e.audioFile.chapters)||void 0===t?void 0:t.length)||0))])]),e._v(" "),e.audioFile.embeddedCoverArt?l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelEmbeddedCover)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.audioFile.embeddedCoverArt||""))])]):e._e()]),e._v(" "),l("div",{staticClass:"w-full sm:w-1/2"},[l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelCodec)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.audioFile.codec))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelChannels)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.audioFile.channels)+" ("+e._s(e.audioFile.channelLayout)+")")])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelBitrate)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.$bytesPretty(e.audioFile.bitRate||0,0)))])]),e._v(" "),l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v(e._s(e.$strings.LabelTimeBase))]),e._v(" "),l("p",[e._v(e._s(e.audioFile.timeBase))])]),e._v(" "),e.audioFile.language?l("div",{staticClass:"flex mb-1"},[l("p",{staticClass:"w-32 text-black-50"},[e._v("\n              "+e._s(e.$strings.LabelLanguage)+"\n            ")]),e._v(" "),l("p",[e._v(e._s(e.audioFile.language||""))])]):e._e()])]),e._v(" "),l("div",{staticClass:"w-full h-px bg-white/10 my-4"}),e._v(" "),l("p",{staticClass:"font-bold mb-2"},[e._v(e._s(e.$strings.LabelMetaTags))]),e._v(" "),e._l(e.metaTags,(function(t,o){return l("div",{key:o,staticClass:"flex mb-1 text-sm"},[l("p",{staticClass:"w-32 min-w-32 text-black-50 mb-1"},[e._v("\n          "+e._s(o.replace("tag",""))+"\n        ")]),e._v(" "),l("p",[e._v(e._s(t))])])}))]],2):e._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiBtn:l(42).default,UiTextInputWithLabel:l(121).default,UiTextareaWithLabel:l(186).default,ModalsModal:l(39).default})}}]);