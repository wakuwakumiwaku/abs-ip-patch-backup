(window.webpackJsonp=window.webpackJsonp||[]).push([[14,71,74,103,135,159],{1035:function(e,t,o){"use strict";o.r(t);o(35),o(122);var n=o(16),r=(o(22),o(26),o(85),o(41),o(27),o(150),o(14),o(44),o(45),o(38),o(8),o(52),o(147),o(28),o(40),o(5)),l=o(858);function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){Object(n.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var h={props:{libraryItem:{type:Object,default:function(){}}},data:function(){return{episodesCopy:[],filterKey:"incomplete",sortKey:"publishedAt",sortDesc:!0,selectedEpisode:null,showPodcastRemoveModal:!1,selectedEpisodes:[],episodesToRemove:[],processing:!1,search:null,searchTimeout:null,searchText:null,isSearching:!1,totalEpisodes:0,episodesPerPage:null,episodeIndexesMounted:[],episodeComponentRefs:{},windowHeight:0,episodesTableOffsetTop:0,episodeRowHeight:176,currScrollTop:0}},watch:{libraryItem:{handler:function(){this.refresh()}}},computed:{contextMenuItems:function(){var e=[];return this.userIsAdminOrUp&&e.push({text:this.$strings.MessageQuickMatchAllEpisodes,action:"quick-match-episodes"}),e.push({text:this.allEpisodesFinished?this.$strings.MessageMarkAllEpisodesNotFinished:this.$strings.MessageMarkAllEpisodesFinished,action:"batch-mark-as-finished"}),e},sortItems:function(){return[{text:this.$strings.LabelPubDate,value:"publishedAt"},{text:this.$strings.LabelTitle,value:"title"},{text:this.$strings.LabelSeason,value:"season"},{text:this.$strings.LabelEpisode,value:"episode"},{text:this.$strings.LabelFilename,value:"audioFile.metadata.filename"}]},filterItems:function(){return[{value:"all",text:this.$strings.LabelShowAll},{value:"incomplete",text:this.$strings.LabelIncomplete},{value:"complete",text:this.$strings.LabelComplete},{value:"in_progress",text:this.$strings.LabelInProgress}]},isSelectionMode:function(){return this.selectedEpisodes.length>0},userIsAdminOrUp:function(){return this.$store.getters["user/getIsAdminOrUp"]},media:function(){return this.libraryItem.media||{}},mediaMetadata:function(){return this.media.metadata||{}},episodes:function(){return this.media.episodes||[]},episodesSorted:function(){var e=this;return this.episodesCopy.filter((function(t){if("all"===e.filterKey)return!0;var o=e.$store.getters["user/getUserMediaProgress"](e.libraryItem.id,t.id);return"incomplete"===e.filterKey?!o||!o.isFinished:"complete"===e.filterKey?o&&o.isFinished:o&&!o.isFinished})).sort((function(a,b){if(e.sortDesc){var t=a;a=b,b=t}var o,n;if(e.sortKey.includes(".")){var r=function(e,s){return s.split(".").reduce((function(e,t){return null==e?void 0:e[t]}),e)};o=r(a,e.sortKey),n=r(b,e.sortKey)}else o=a[e.sortKey],n=b[e.sortKey];"publishedAt"===e.sortKey&&(o||(o=Number.MAX_VALUE),n||(n=Number.MAX_VALUE));var l=String(o).localeCompare(String(n),void 0,{numeric:!0,sensitivity:"base"});if(0!==l||"publishedAt"===e.sortKey)return l;if("season"===e.sortKey){var d=a.episode||"",c=b.episode||"",h=String(d).localeCompare(String(c),void 0,{numeric:!0,sensitivity:"base"});if(0!==h)return h}var m=a.publishedAt||Number.MAX_VALUE,f=b.publishedAt||Number.MAX_VALUE;return String(m).localeCompare(String(f),void 0,{numeric:!0,sensitivity:"base"})}))},episodesList:function(){var e=this;return this.episodesSorted.filter((function(t){var o,n;return!e.searchText||((null===(o=t.title)||void 0===o?void 0:o.toLowerCase().includes(e.searchText))||(null===(n=t.subtitle)||void 0===n?void 0:n.toLowerCase().includes(e.searchText)))}))},selectedIsFinished:function(){var e=this;return!this.selectedEpisodes.some((function(t){var o=e.$store.getters["user/getUserMediaProgress"](e.libraryItem.id,t.id);return!(null!=o&&o.isFinished)}))},allEpisodesFinished:function(){var e=this;return!this.episodesSorted.some((function(t){var o=e.$store.getters["user/getUserMediaProgress"](e.libraryItem.id,t.id);return!(null!=o&&o.isFinished)}))},dateFormat:function(){return this.$store.getters.getServerSetting("dateFormat")},timeFormat:function(){return this.$store.getters.getServerSetting("timeFormat")}},methods:{submit:function(){},inputUpdate:function(){var e=this;clearTimeout(this.searchTimeout),this.isSearching=!0;var t=this.searchText;this.searchTimeout=setTimeout((function(){var o;e.isSearching=!1,null!==(o=e.search)&&void 0!==o&&o.trim()?e.searchText=e.search.toLowerCase().trim():e.searchText="",t!==e.searchText&&e.init()}),750)},contextMenuAction:function(e){var t=e.action;if("quick-match-episodes"===t){if(this.processing)return;this.quickMatchAllEpisodes()}else if("batch-mark-as-finished"===t){if(this.processing)return;this.markAllEpisodesFinished()}},markAllEpisodesFinished:function(){var e=this,t=!this.allEpisodesFinished,o={message:t?this.$strings.MessageConfirmMarkAllEpisodesFinished:this.$strings.MessageConfirmMarkAllEpisodesNotFinished,callback:function(o){o&&e.batchUpdateEpisodesFinished(e.episodesCopy,t)},type:"yesNo"};this.$store.commit("globals/setConfirmPrompt",o)},quickMatchAllEpisodes:function(){var e=this;if(this.mediaMetadata.feedUrl){this.processing=!0;var t={message:this.$strings.MessageConfirmQuickMatchEpisodes,callback:function(t){t&&e.$axios.$post("/api/podcasts/".concat(e.libraryItem.id,"/match-episodes?override=1")).then((function(data){data.numEpisodesUpdated?e.$toast.success(e.$getString("ToastEpisodeUpdateSuccess",[data.numEpisodesUpdated])):e.$toast.info(e.$strings.ToastNoUpdatesNecessary)})).catch((function(t){console.error("Failed to request match episodes",t),e.$toast.error(e.$strings.ToastFailedToMatch)})),e.processing=!1},type:"yesNo"};this.$store.commit("globals/setConfirmPrompt",t)}else this.$toast.error(this.$strings.MessagePodcastHasNoRSSFeedForMatching)},addToPlaylist:function(e){this.$store.commit("globals/setSelectedPlaylistItems",[{libraryItem:this.libraryItem,episode:e}]),this.$store.commit("globals/setShowPlaylistsModal",!0)},addEpisodeToQueue:function(e){var t={libraryItemId:this.libraryItem.id,libraryId:this.libraryItem.libraryId,episodeId:e.id,title:e.title,subtitle:this.mediaMetadata.title,caption:e.publishedAt?this.$getString("LabelPublishedDate",[this.$formatDate(e.publishedAt,this.dateFormat)]):this.$strings.LabelUnknownPublishDate,duration:e.audioFile.duration||null,coverPath:this.media.coverPath||null};this.$store.commit("addItemToQueue",t)},toggleBatchFinished:function(){this.batchUpdateEpisodesFinished(this.selectedEpisodes,!this.selectedIsFinished)},batchUpdateEpisodesFinished:function(e,t){var o=this;if(e.length){this.processing=!0;var n=e.map((function(e){return{libraryItemId:o.libraryItem.id,episodeId:e.id,isFinished:t}}));return this.$axios.patch("/api/me/progress/batch/update",n).then((function(){o.$toast.success(o.$strings.ToastBatchUpdateSuccess),o.processing=!1,o.clearSelected()})).catch((function(e){o.$toast.error(o.$strings.ToastBatchUpdateFailed),console.error("Failed to batch update read/not read",e),o.processing=!1}))}},removeEpisodeModalToggled:function(e){e||(this.episodesToRemove=[])},clearSelected:function(){this.selectedEpisodes=[],this.setSelectionModeForEpisodes()},removeSelectedEpisodes:function(){this.episodesToRemove=this.selectedEpisodes,this.showPodcastRemoveModal=!0},episodeSelected:function(e){var t=e.isSelected,o=e.episode,n=this.isSelectionMode;t?this.selectedEpisodes.push(o):this.selectedEpisodes=this.selectedEpisodes.filter((function(e){return e.id!==o.id})),this.isSelectionMode!==n&&this.setSelectionModeForEpisodes()},setSelectionModeForEpisodes:function(){for(var e in this.episodeComponentRefs){var t;null!==(t=this.episodeComponentRefs[e])&&void 0!==t&&t.setSelectionMode&&this.episodeComponentRefs[e].setSelectionMode(this.isSelectionMode)}},playEpisode:function(e){for(var t=[],o=this.episodesList,i=o.findIndex((function(t){return t.id===e.id}));i<o.length;i++){var n=o[i],r=this.$store.getters["user/getUserMediaProgress"](this.libraryItem.id,n.id);null!=r&&r.isFinished&&e.id!==n.id||t.push({libraryItemId:this.libraryItem.id,libraryId:this.libraryItem.libraryId,episodeId:n.id,title:n.title,subtitle:this.mediaMetadata.title,caption:n.publishedAt?this.$getString("LabelPublishedDate",[this.$formatDate(n.publishedAt,this.dateFormat)]):this.$strings.LabelUnknownPublishDate,duration:n.audioFile.duration||null,coverPath:this.media.coverPath||null})}this.$eventBus.$emit("play-item",{libraryItemId:this.libraryItem.id,episodeId:e.id,queueItems:t})},removeEpisode:function(e){this.episodesToRemove=[e],this.showPodcastRemoveModal=!0},editEpisode:function(e){var t=this.episodesSorted.map((function(e){return e.id}));this.$store.commit("setEpisodeTableEpisodeIds",t),this.$store.commit("setSelectedLibraryItem",this.libraryItem),this.$store.commit("globals/setSelectedEpisode",e),this.$store.commit("globals/setShowEditPodcastEpisodeModal",!0)},viewEpisode:function(e){this.$store.commit("setSelectedLibraryItem",this.libraryItem),this.$store.commit("globals/setSelectedEpisode",e),this.$store.commit("globals/setShowViewPodcastEpisodeModal",!0)},destroyEpisodeComponents:function(){for(var e in this.episodeComponentRefs){var t;null!==(t=this.episodeComponentRefs[e])&&void 0!==t&&t.destroy&&this.episodeComponentRefs[e].destroy()}this.episodeComponentRefs={},this.episodeIndexesMounted=[]},mountEpisode:function(e){var t=this,o=document.getElementById("episode-".concat(e));if(o)if(this.episodeIndexesMounted.push(e),this.episodeComponentRefs[e]){var n=this.episodeComponentRefs[e];o.appendChild(n.$el),this.isSelectionMode?(n.setSelectionMode(!0),this.selectedEpisodes.some((function(i){return i.id===n.episodeId}))?n.isSelected=!0:n.isSelected=!1):n.setSelectionMode(!1)}else{var d=this,c=new(r.a.extend(l.default))({propsData:{index:e,libraryItemId:this.libraryItem.id,episode:this.episodesList[e],sortKey:this.sortKey},created:function(){this.$on("selected",(function(e){d.episodeSelected(e)})),this.$on("view",(function(e){d.viewEpisode(e)})),this.$on("play",(function(e){d.playEpisode(e)})),this.$on("addToQueue",(function(e){d.addEpisodeToQueue(e)})),this.$on("remove",(function(e){d.removeEpisode(e)})),this.$on("edit",(function(e){d.editEpisode(e)})),this.$on("addToPlaylist",(function(e){d.addToPlaylist(e)}))}});this.episodeComponentRefs[e]=c,c.$mount(),o.appendChild(c.$el),this.isSelectionMode&&(c.setSelectionMode(!0),this.selectedEpisodes.some((function(i){return i.id===t.episodesList[e].id}))&&(c.isSelected=!0))}else console.warn("Episode row el not found at "+e)},mountEpisodes:function(e,t){for(var i=e;i<t;i++)this.episodeIndexesMounted.includes(i)||this.mountEpisode(i)},handleScroll:function(){var e=this.currScrollTop,t=Math.floor(e/this.episodeRowHeight),o=Math.ceil((e+this.windowHeight)/this.episodeRowHeight);o=Math.min(this.totalEpisodes-1,o),this.episodeIndexesMounted=this.episodeIndexesMounted.filter((function(e){if(e<t||e>=o){var n=document.getElementById("lazy-episode-".concat(e));return n&&n.remove(),!1}return!0})),this.mountEpisodes(t,o+1)},scroll:function(e){var t;if(null!=e&&null!==(t=e.target)&&void 0!==t&&t.scrollTop){var o=Math.max(e.target.scrollTop-this.episodesTableOffsetTop,0);this.currScrollTop=o,this.handleScroll()}},initListeners:function(){var e=document.getElementById("item-page-wrapper");e&&e.addEventListener("scroll",this.scroll)},removeListeners:function(){var e=document.getElementById("item-page-wrapper");e&&e.removeEventListener("scroll",this.scroll)},filterSortChanged:function(){localStorage.setItem("podcastEpisodesFilter",this.filterKey),localStorage.setItem("podcastEpisodesSortBy",this.sortKey+(this.sortDesc?"-desc":"")),this.init()},refresh:function(){this.episodesCopy=this.episodes.map((function(e){return c({},e)})),this.init()},init:function(){var e=this;this.destroyEpisodeComponents(),this.totalEpisodes=this.episodesList.length;var t=document.getElementById("lazy-episodes-table");this.episodesTableOffsetTop=((null==t?void 0:t.offsetTop)||0)+64,this.windowHeight=window.innerHeight,this.$nextTick((function(){e.recalcEpisodeRowHeight(),e.episodesPerPage=Math.ceil(e.windowHeight/e.episodeRowHeight);var t=document.getElementById("item-page-wrapper"),o=t.scrollHeight-t.clientHeight;e.currScrollTop=Math.min(e.currScrollTop,o),e.handleScroll()}))},recalcEpisodeRowHeight:function(){var e=document.getElementById("episode-0")||document.getElementById("no-episodes");if(e){var t=getComputedStyle(e).height;this.episodeRowHeight=parseInt(t)||this.episodeRowHeight}}},mounted:function(){this.filterKey=localStorage.getItem("podcastEpisodesFilter")||"incomplete";var e=localStorage.getItem("podcastEpisodesSortBy")||"publishedAt-desc";this.sortKey=e.split("-")[0],this.sortDesc="desc"===e.split("-")[1],this.episodesCopy=this.episodes.map((function(e){return c({},e)})),this.initListeners(),this.init()},beforeDestroy:function(){this.removeListeners()}},m=(o(916),o(4)),component=Object(m.a)(h,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full py-6",attrs:{id:"lazy-episodes-table"}},[t("div",{staticClass:"flex flex-wrap flex-col md:flex-row md:items-center mb-4"},[t("div",{staticClass:"flex items-center flex-nowrap whitespace-nowrap mb-2 md:mb-0"},[t("p",{staticClass:"text-lg mb-0 font-semibold"},[e._v(e._s(e.$strings.HeaderEpisodes))]),e._v(" "),t("div",{staticClass:"inline-flex bg-white/5 px-1 mx-2 rounded-md text-sm text-gray-100"},[e.episodesList.length===e.episodes.length?t("p",[e._v(e._s(e.episodes.length))]):t("p",[e._v(e._s(e.episodesList.length)+" / "+e._s(e.episodes.length))])])]),e._v(" "),t("div",{staticClass:"grow hidden md:block"}),e._v(" "),t("div",{staticClass:"flex items-center"},[e.isSelectionMode?[t("ui-tooltip",{attrs:{text:e.selectedIsFinished?e.$strings.MessageMarkAsNotFinished:e.$strings.MessageMarkAsFinished,direction:"bottom"}},[t("ui-read-icon-btn",{staticClass:"mx-1.5",attrs:{disabled:e.processing,"is-read":e.selectedIsFinished},on:{click:e.toggleBatchFinished}})],1),e._v(" "),t("ui-btn",{staticClass:"h-9",attrs:{color:"bg-error",disabled:e.processing,small:""},on:{click:e.removeSelectedEpisodes}},[e._v(e._s(e.$getString("MessageRemoveEpisodes",[e.selectedEpisodes.length])))]),e._v(" "),t("ui-btn",{staticClass:"ml-2 h-9",attrs:{disabled:e.processing,small:""},on:{click:e.clearSelected}},[e._v(e._s(e.$strings.ButtonCancel))])]:[t("controls-filter-select",{staticClass:"w-36 h-9 md:ml-4",attrs:{items:e.filterItems},on:{change:e.filterSortChanged},model:{value:e.filterKey,callback:function(t){e.filterKey=t},expression:"filterKey"}}),e._v(" "),t("controls-sort-select",{staticClass:"w-44 md:w-48 h-9 ml-1 sm:ml-4",attrs:{descending:e.sortDesc,items:e.sortItems},on:{"update:descending":function(t){e.sortDesc=t},change:e.filterSortChanged},model:{value:e.sortKey,callback:function(t){e.sortKey=t},expression:"sortKey"}}),e._v(" "),t("div",{staticClass:"grow md:hidden"}),e._v(" "),e.contextMenuItems.length?t("ui-context-menu-dropdown",{staticClass:"ml-1",attrs:{items:e.contextMenuItems},on:{action:e.contextMenuAction}}):e._e()]],2)]),e._v(" "),e.episodes.length?t("div",{staticClass:"w-full py-3 mx-auto flex"},[t("form",{staticClass:"flex grow",on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[t("ui-text-input",{staticClass:"grow mr-2 text-sm md:text-base",attrs:{type:"search",placeholder:e.$strings.PlaceholderSearchEpisode},on:{input:e.inputUpdate},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]):e._e(),e._v(" "),t("div",{staticClass:"relative min-h-44"},[e._l(e.totalEpisodes,(function(e){return[t("div",{key:e,staticClass:"w-full h-44 px-2 py-3 overflow-hidden relative border-b border-white/10",attrs:{id:"episode-".concat(e-1)}})]})),e._v(" "),e.isSearching?t("div",{staticClass:"w-full h-full absolute inset-0 flex justify-center py-12",class:{"bg-black/50":e.totalEpisodes}},[t("ui-loading-indicator")],1):e.totalEpisodes?e._e():t("div",{staticClass:"h-44 flex items-center justify-center",attrs:{id:"no-episodes"}},[t("p",{staticClass:"text-lg"},[e._v(e._s(e.$strings.MessageNoEpisodes))])])],2),e._v(" "),t("modals-podcast-remove-episode",{attrs:{"library-item":e.libraryItem,episodes:e.episodesToRemove},on:{input:e.removeEpisodeModalToggled,clearSelected:e.clearSelected},model:{value:e.showPodcastRemoveModal,callback:function(t){e.showPodcastRemoveModal=t},expression:"showPodcastRemoveModal"}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{UiReadIconBtn:o(353).default,UiTooltip:o(76).default,UiBtn:o(42).default,ControlsFilterSelect:o(859).default,ControlsSortSelect:o(745).default,UiContextMenuDropdown:o(349).default,UiTextInput:o(68).default,UiLoadingIndicator:o(348).default,ModalsPodcastRemoveEpisode:o(860).default})},677:function(e,t,o){"use strict";o.r(t);var n={props:{type:{type:String,default:"full"}},data:function(){return{}},computed:{},methods:{},mounted:function(){}},r=o(4),component=Object(r.a)(n,(function(){var e=this,t=e._self._c;return t("div",["bonus"==e.type?[t("ui-tooltip",{attrs:{text:"Bonus",direction:"top"}},[t("span",{staticClass:"material-symbols ml-1",staticStyle:{"font-size":"0.8rem"}},[e._v("local_play")])])]:e._e(),e._v(" "),"trailer"==e.type?[t("ui-tooltip",{attrs:{text:"Trailer",direction:"top"}},[t("span",{staticClass:"material-symbols ml-1",staticStyle:{"font-size":"0.8rem"}},[e._v("local_movies")])])]:e._e()],2)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{UiTooltip:o(76).default})},745:function(e,t,o){"use strict";o.r(t);o(33),o(8);var n={props:{value:String,descending:Boolean,items:{type:Array,default:function(){return[]}}},data:function(){return{showMenu:!1}},computed:{selected:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},selectedDesc:{get:function(){return this.descending},set:function(e){this.$emit("update:descending",e)}},selectedText:function(){var e=this.selected;if(!e)return"";var t=this.items.find((function(i){return i.value===e}));return t?t.text:""}},methods:{clickOutside:function(){this.showMenu=!1},clickedOption:function(e){var t=this;this.selected===e?this.selectedDesc=!this.selectedDesc:this.selected=e,this.showMenu=!1,this.$nextTick((function(){return t.$emit("change",e)}))}}},r=o(4),component=Object(r.a)(n,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.clickOutside,expression:"clickOutside"}],ref:"wrapper",staticClass:"relative"},[t("button",{staticClass:"relative w-full h-full border border-gray-500 hover:border-gray-400 rounded-sm shadow-xs pl-3 pr-3 py-0 text-left focus:outline-hidden cursor-pointer",attrs:{type:"button","aria-haspopup":"menu","aria-expanded":e.showMenu},on:{click:function(t){t.preventDefault(),e.showMenu=!e.showMenu}}},[t("span",{staticClass:"flex items-center justify-between"},[t("span",{staticClass:"block truncate text-xs",class:e.selectedText?"":"text-gray-300"},[e._v(e._s(e.selectedText))]),e._v(" "),t("span",{staticClass:"material-symbols text-lg text-yellow-400",attrs:{"aria-label":e.descending?e.$strings.LabelSortDescending:e.$strings.LabelSortAscending}},[e._v(e._s(e.descending?"expand_more":"expand_less"))])])]),e._v(" "),t("ul",{directives:[{name:"show",rawName:"v-show",value:e.showMenu,expression:"showMenu"}],staticClass:"absolute z-10 mt-1 w-full bg-bg border border-black-200 shadow-lg max-h-80 rounded-md py-1 ring-1 ring-black/5 overflow-auto focus:outline-hidden text-sm",attrs:{role:"menu"}},[e._l(e.items,(function(o){return[t("li",{key:o.value,staticClass:"select-none relative py-2 pr-9 cursor-pointer hover:bg-white/5",class:o.value===e.selected?"bg-white/5 text-yellow-400":"text-gray-200 hover:text-white",attrs:{role:"menuitem"},on:{click:function(t){return e.clickedOption(o.value)}}},[t("div",{staticClass:"flex items-center"},[t("span",{staticClass:"font-normal ml-3 block truncate"},[e._v(e._s(o.text))])]),e._v(" "),o.value===e.selected?t("span",{staticClass:"text-yellow-400 absolute inset-y-0 right-0 flex items-center pr-4"},[t("span",{staticClass:"material-symbols text-xl",attrs:{"aria-label":e.descending?e.$strings.LabelSortDescending:e.$strings.LabelSortAscending}},[e._v(e._s(e.descending?"expand_more":"expand_less"))])]):e._e()])]}))],2)])}),[],!1,null,null,null);t.default=component.exports},804:function(e,t,o){var content=o(917);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(19).default)("8a3ca926",content,!0,{sourceMap:!1})},858:function(e,t,o){"use strict";o.r(t);o(22),o(43),o(17),o(14);var n={props:{index:Number,libraryItemId:String,episode:{type:Object,default:function(){return null}},sortKey:String},data:function(){return{isProcessingReadUpdate:!1,processingRemove:!1,isHovering:!1,isSelected:!1,isSelectionMode:!1}},computed:{store:function(){return this.$store||this.$nuxt.$store},axios:function(){return this.$axios||this.$nuxt.$axios},userCanUpdate:function(){return this.store.getters["user/getUserCanUpdate"]},userCanDelete:function(){return this.store.getters["user/getUserCanDelete"]},episodeId:function(){var e;return(null===(e=this.episode)||void 0===e?void 0:e.id)||""},episodeTitle:function(){var e;return(null===(e=this.episode)||void 0===e?void 0:e.title)||""},episodeSubtitle:function(){var e,t;return(null===(e=this.episode)||void 0===e?void 0:e.subtitle)||(null===(t=this.episode)||void 0===t?void 0:t.description)||""},episodeType:function(){var e;return(null===(e=this.episode)||void 0===e?void 0:e.episodeType)||""},publishedAt:function(){var e;return null===(e=this.episode)||void 0===e?void 0:e.publishedAt},dateFormat:function(){return this.store.getters.getServerSetting("dateFormat")},itemProgress:function(){return this.store.getters["user/getUserMediaProgress"](this.libraryItemId,this.episodeId)},itemProgressPercent:function(){var e;return(null===(e=this.itemProgress)||void 0===e?void 0:e.progress)||0},userIsFinished:function(){var e;return!(null===(e=this.itemProgress)||void 0===e||!e.isFinished)},libraryItemIdStreaming:function(){return this.store.getters.getLibraryItemIdStreaming},isStreamingFromDifferentLibrary:function(){return this.store.getters.getIsStreamingFromDifferentLibrary},isStreaming:function(){return this.store.getters.getIsMediaStreaming(this.libraryItemId,this.episodeId)},isQueued:function(){return this.store.getters.getIsMediaQueued(this.libraryItemId,this.episodeId)},streamIsPlaying:function(){return this.store.state.streamIsPlaying&&this.isStreaming},timeRemaining:function(){var e,t;if(this.streamIsPlaying)return this.$strings.ButtonPlaying;if(!this.itemProgress)return this.$elapsedPretty((null===(e=this.episode)||void 0===e?void 0:e.duration)||0);if(this.userIsFinished)return this.$strings.LabelFinished;var o=this.itemProgress.duration||(null===(t=this.episode)||void 0===t?void 0:t.duration)||0,n=Math.floor(o-this.itemProgress.currentTime);return this.$getString("LabelTimeLeft",[this.$elapsedPretty(n)])}},methods:{setSelectionMode:function(e){this.isSelectionMode=e,this.isSelectionMode||(this.isSelected=!1)},clickedEpisode:function(){this.$emit("view",this.episode)},clickedSelectionBg:function(){this.isSelected=!this.isSelected,this.selectedUpdated(this.isSelected)},selectedUpdated:function(e){this.$emit("selected",{isSelected:e,episode:this.episode})},mouseover:function(){this.isHovering=!0},mouseleave:function(){this.isHovering=!1},playClick:function(){this.streamIsPlaying?(this.$eventBus||this.$nuxt.$eventBus).$emit("pause-item"):this.$emit("play",this.episode)},queueBtnClick:function(){this.isQueued?this.store.commit("removeItemFromQueue",{libraryItemId:this.libraryItemId,episodeId:this.episodeId}):this.$emit("addToQueue",this.episode)},toggleFinished:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.userIsFinished&&this.itemProgressPercent>0&&!t){var o={message:this.$getString("MessageConfirmMarkItemFinished",[this.episodeTitle]),callback:function(t){t&&e.toggleFinished(!0)},type:"yesNo"};this.store.commit("globals/setConfirmPrompt",o)}else{var n={isFinished:!this.userIsFinished};this.isProcessingReadUpdate=!0,this.axios.$patch("/api/me/progress/".concat(this.libraryItemId,"/").concat(this.episodeId),n).then((function(){e.isProcessingReadUpdate=!1})).catch((function(t){console.error("Failed",t),e.isProcessingReadUpdate=!1,(e.$toast||e.$nuxt.$toast).error(n.isFinished?e.$strings.ToastItemMarkedAsFinishedFailed:e.$strings.ToastItemMarkedAsNotFinishedFailed)}))}},clickAddToPlaylist:function(){this.$emit("addToPlaylist",this.episode)},clickEdit:function(){this.$emit("edit",this.episode)},removeClick:function(){this.$emit("remove",this.episode)},destroy:function(){this.$destroy(),this.$el&&this.$el.parentNode?this.$el.parentNode.removeChild(this.$el):this.$el&&this.$el.remove&&this.$el.remove()}},mounted:function(){}},r=n,l=o(4),component=Object(l.a)(r,(function(){var e,t,o,n=this,r=n._self._c;return r("div",{staticClass:"w-full h-full cursor-pointer",attrs:{id:"lazy-episode-".concat(n.index)},on:{mouseover:n.mouseover,mouseleave:n.mouseleave}},[r("div",{staticClass:"flex",on:{click:n.clickedEpisode}},[r("div",{staticClass:"grow"},[r("div",{staticClass:"flex items-center",attrs:{dir:"auto"}},[r("span",{staticClass:"text-sm font-semibold"},[n._v(n._s(n.episodeTitle))]),n._v(" "),r("widgets-podcast-type-indicator",{attrs:{type:n.episodeType}})],1),n._v(" "),r("div",{staticClass:"h-10 flex items-center mt-1.5 mb-0.5 overflow-hidden"},[r("div",{staticClass:"text-sm text-gray-200 line-clamp-2",attrs:{dir:"auto"},domProps:{innerHTML:n._s(n.episodeSubtitle)}})]),n._v(" "),r("div",{staticClass:"h-8 flex items-center"},["audioFile.metadata.filename"===n.sortKey?r("p",{staticClass:"text-sm text-gray-300 truncate font-light"},[r("strong",{attrs:{className:"font-bold"}},[n._v(n._s(n.$strings.LabelFilename))]),n._v(": "+n._s(n.episode.audioFile.metadata.filename)+"\n        ")]):r("div",{staticClass:"w-full inline-flex justify-between max-w-xl"},[null!==(e=n.episode)&&void 0!==e&&e.season?r("p",{staticClass:"text-sm text-gray-300"},[n._v(n._s(n.$getString("LabelSeasonNumber",[n.episode.season])))]):n._e(),n._v(" "),null!==(t=n.episode)&&void 0!==t&&t.episode?r("p",{staticClass:"text-sm text-gray-300"},[n._v(n._s(n.$getString("LabelEpisodeNumber",[n.episode.episode])))]):n._e(),n._v(" "),null!==(o=n.episode)&&void 0!==o&&null!==(o=o.chapters)&&void 0!==o&&o.length?r("p",{staticClass:"text-sm text-gray-300"},[n._v(n._s(n.$getString("LabelChapterCount",[n.episode.chapters.length])))]):n._e(),n._v(" "),n.publishedAt?r("p",{staticClass:"text-sm text-gray-300"},[n._v(n._s(n.$getString("LabelPublishedDate",[n.$formatDate(n.publishedAt,n.dateFormat)])))]):n._e()])]),n._v(" "),r("div",{staticClass:"flex items-center pt-2"},[r("button",{staticClass:"h-8 px-4 border border-white/20 hover:bg-white/10 rounded-full flex items-center justify-center cursor-pointer focus:outline-hidden",class:n.userIsFinished?"text-white/40":"",on:{click:function(e){return e.stopPropagation(),n.playClick.apply(null,arguments)}}},[r("span",{staticClass:"material-symbols fill text-2xl",class:n.streamIsPlaying?"":"text-success",attrs:{"aria-hidden":"true"}},[n._v(n._s(n.streamIsPlaying?"pause":"play_arrow"))]),n._v(" "),r("span",{staticClass:"sr-only"},[n._v(n._s(n.streamIsPlaying?n.$strings.ButtonPause:n.$strings.ButtonPlay))]),n._v(" "),r("p",{staticClass:"pl-2 pr-1 text-sm font-semibold",attrs:{"aria-hidden":"true"}},[n._v(n._s(n.timeRemaining))])]),n._v(" "),n.libraryItemIdStreaming&&!n.isStreamingFromDifferentLibrary?r("ui-tooltip",{class:n.isQueued?"text-success":"",attrs:{text:n.isQueued?n.$strings.MessageRemoveFromPlayerQueue:n.$strings.MessageAddToPlayerQueue,direction:"top"}},[r("ui-icon-btn",{attrs:{icon:n.isQueued?"playlist_add_check":"playlist_play","aria-label":n.isQueued?n.$strings.LabelRemoveFromPlayerQueue:n.$strings.LabelAddToPlayerQueue,borderless:""},on:{click:n.queueBtnClick}})],1):n._e(),n._v(" "),r("ui-tooltip",{attrs:{text:n.userIsFinished?n.$strings.MessageMarkAsNotFinished:n.$strings.MessageMarkAsFinished,direction:"top"}},[r("ui-read-icon-btn",{staticClass:"mx-1 mt-0.5",attrs:{disabled:n.isProcessingReadUpdate,"is-read":n.userIsFinished,borderless:""},on:{click:n.toggleFinished}})],1),n._v(" "),r("ui-tooltip",{attrs:{text:n.$strings.LabelYourPlaylists,direction:"top"}},[r("ui-icon-btn",{attrs:{icon:"playlist_add","aria-label":n.$strings.LabelYourPlaylists,borderless:""},on:{click:n.clickAddToPlaylist}})],1),n._v(" "),n.userCanUpdate?r("ui-icon-btn",{attrs:{icon:"edit",borderless:""},on:{click:n.clickEdit}}):n._e(),n._v(" "),n.userCanDelete?r("ui-icon-btn",{attrs:{icon:"close","aria-label":n.$strings.HeaderRemoveEpisode,borderless:""},on:{click:n.removeClick}}):n._e()],1)]),n._v(" "),n.isHovering||n.isSelected||n.isSelectionMode?r("div",{staticClass:"hidden md:block w-12 min-w-12"}):n._e()]),n._v(" "),n.isSelected||n.isSelectionMode?r("div",{staticClass:"absolute top-0 left-0 w-full h-full bg-black/10 z-10 cursor-pointer",on:{click:function(e){return e.stopPropagation(),n.clickedSelectionBg.apply(null,arguments)}}}):n._e(),n._v(" "),r("div",{staticClass:"hidden md:block md:w-12 md:min-w-12 md:-right-0 md:absolute md:top-0 h-full transform transition-transform z-20",class:n.isHovering||n.isSelected||n.isSelectionMode?"translate-x-0":"translate-x-24"},[r("div",{staticClass:"flex h-full items-center"},[r("div",{staticClass:"mx-1"},[r("ui-checkbox",{attrs:{"checkbox-bg":"bg","aria-label":"Select episode"},on:{input:n.selectedUpdated},model:{value:n.isSelected,callback:function(e){n.isSelected=e},expression:"isSelected"}})],1)])]),n._v(" "),n.userIsFinished?n._e():r("div",{staticClass:"absolute bottom-0 left-0 h-0.5 bg-warning",style:{width:100*n.itemProgressPercent+"%"}})])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{WidgetsPodcastTypeIndicator:o(677).default,UiIconBtn:o(148).default,UiTooltip:o(76).default,UiReadIconBtn:o(353).default,UiCheckbox:o(184).default})},859:function(e,t,o){"use strict";o.r(t);o(33),o(8);var n={props:{value:String,items:{type:Array,default:function(){return[]}}},data:function(){return{showMenu:!1}},computed:{selected:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},selectedText:function(){var e=this;if(!this.selected)return"";var filter=this.items.find((function(i){return i.value===e.selected}));return filter?filter.text:""},filterData:function(){return this.$store.state.libraries.filterData||{}}},methods:{clearSelected:function(){var e=this;this.selected="all",this.showMenu=!1,this.$nextTick((function(){return e.$emit("change","all")}))},clickOutside:function(){this.showMenu=!1},clickedOption:function(option){var e=this,t=option.value;this.selected!==t?(this.selected=t,this.showMenu=!1,this.$nextTick((function(){return e.$emit("change",t)}))):this.showMenu=!1}}},r=o(4),component=Object(r.a)(n,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.clickOutside,expression:"clickOutside"}],ref:"wrapper",staticClass:"relative"},[t("div",{staticClass:"relative h-9"},[t("button",{staticClass:"relative w-full h-full border border-gray-500 hover:border-gray-400 rounded-sm shadow-xs pl-3 pr-3 py-0 text-left focus:outline-hidden cursor-pointer",attrs:{type:"button","aria-haspopup":"menu","aria-expanded":e.showMenu},on:{click:function(t){t.preventDefault(),e.showMenu=!e.showMenu}}},[t("span",{staticClass:"flex items-center justify-between"},[t("span",{staticClass:"block truncate text-xs"},[e._v(e._s(e.selectedText))])])]),e._v(" "),"all"===e.selected?t("span",{staticClass:"ml-3 absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},[t("svg",{staticClass:"h-5 w-5 text-gray-400",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"}})])]):t("button",{staticClass:"ml-3 absolute inset-y-0 right-0 flex items-center pr-2 cursor-pointer text-gray-400 hover:text-gray-300",attrs:{type:"button","aria-label":e.$strings.ButtonClearFilter},on:{mousedown:function(e){e.stopPropagation()},mouseup:function(e){e.stopPropagation()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.clearSelected.apply(null,arguments)}}},[t("span",{staticClass:"material-symbols",staticStyle:{"font-size":"1.1rem"}},[e._v("close")])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showMenu,expression:"showMenu"}],staticClass:"absolute z-10 mt-1 w-full bg-bg border border-black-200 shadow-lg max-h-96 rounded-md py-1 text-sm ring-1 ring-black/5 overflow-auto focus:outline-hidden"},[t("ul",{staticClass:"h-full w-full",attrs:{role:"menu"}},[e._l(e.items,(function(o){return[t("li",{key:o.value,staticClass:"select-none relative py-2 pr-9 cursor-pointer hover:bg-white/5",class:o.value===e.selected?"bg-white/5 text-yellow-400":"text-gray-200 hover:text-white",attrs:{role:"menuitem"},on:{click:function(t){return e.clickedOption(o)}}},[t("div",{staticClass:"flex items-center justify-between"},[t("span",{staticClass:"font-normal ml-3 block truncate"},[e._v(e._s(o.text))])]),e._v(" "),o.value===e.selected?t("div",{staticClass:"absolute inset-y-0 right-2 h-full flex items-center pointer-events-none"},[t("span",{staticClass:"material-symbols text-base text-yellow-400"},[e._v("check")])]):e._e()])]}))],2)])])}),[],!1,null,null,null);t.default=component.exports},860:function(e,t,o){"use strict";o.r(t);o(22),o(43),o(84),o(83),o(57),o(15),o(8),o(35),o(59),o(62),o(58);var n=o(7);o(29),o(17);function r(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,a){if(e){if("string"==typeof e)return l(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,a):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,a=!0,u=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return a=e.done,e},e:function(e){u=!0,d=e},f:function(){try{a||null==o.return||o.return()}finally{if(u)throw d}}}}function l(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,o=Array(a);t<a;t++)o[t]=e[t];return o}var d={props:{value:Boolean,libraryItem:{type:Object,default:function(){}},episodes:{type:Array,default:function(){return[]}}},data:function(){return{hardDeleteFile:!1,processing:!1}},watch:{value:function(e){e&&(this.hardDeleteFile=!1)}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},episode:function(){return 1===this.episodes.length?this.episodes[0]:null},title:function(){return this.episodes.length>1?this.$getString("HeaderRemoveEpisodes",[this.episodes.length]):this.$strings.HeaderRemoveEpisode},btnText:function(){return this.hardDeleteFile?this.$strings.ButtonDelete:this.$strings.ButtonRemove},episodeTitle:function(){return this.episode?this.episode.title:null}},methods:{submit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.processing=!0,o=e.hardDeleteFile?"?hard=1":"",n=r(e.episodes),t.prev=3,n.s();case 5:if((l=n.n()).done){t.next=17;break}return d=l.value,t.next=9,e.$axios.$delete("/api/podcasts/".concat(e.libraryItem.id,"/episode/").concat(d.id).concat(o)).then((function(){return!0})).catch((function(t){var o=t.response&&t.response.data?t.response.data:"Failed to remove episode";return console.error("Failed to remove episode",t),e.$toast.error(o),!1}));case 9:if(t.sent){t.next=15;break}return e.processing=!1,e.show=!1,e.$emit("clearSelected"),t.abrupt("return");case 15:t.next=5;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(3),n.e(t.t0);case 22:return t.prev=22,n.f(),t.finish(22);case 25:e.processing=!1,e.show=!1,e.$emit("clearSelected");case 28:case"end":return t.stop()}}),t,null,[[3,19,22,25]])})))()}},mounted:function(){}},c=o(4),component=Object(c.a)(d,(function(){var e=this,t=e._self._c;return t("modals-modal",{attrs:{name:"podcast-episode-remove-modal",width:500,height:"unset",processing:e.processing},scopedSlots:e._u([{key:"outer",fn:function(){return[t("div",{staticClass:"absolute top-0 left-0 p-5 w-2/3 overflow-hidden"},[t("p",{staticClass:"text-3xl text-white truncate"},[e._v(e._s(e.title))])])]},proxy:!0}]),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e._v(" "),t("div",{ref:"wrapper",staticClass:"px-8 py-6 w-full text-sm rounded-lg bg-bg shadow-lg border border-black-300 relative overflow-hidden"},[t("div",{staticClass:"mb-4"},[e.episode?t("p",{staticClass:"text-lg text-gray-200 mb-4"},[e._v("\n        "+e._s(e.$getString("MessageConfirmRemoveEpisode",[e.episodeTitle]))+"\n      ")]):t("p",{staticClass:"text-lg text-gray-200 mb-4"},[e._v(e._s(e.$getString("MessageConfirmRemoveEpisodes",[e.episodes.length])))]),e._v(" "),t("p",{staticClass:"text-xs font-semibold text-warning/90"},[e._v(e._s(e.$strings.MessageConfirmRemoveEpisodeNote))])]),e._v(" "),t("div",{staticClass:"flex justify-between items-center pt-4"},[t("ui-checkbox",{attrs:{label:e.$strings.LabelHardDeleteFile,"check-color":"error","checkbox-bg":"bg",small:"","label-class":"text-base text-gray-200 pl-3"},model:{value:e.hardDeleteFile,callback:function(t){e.hardDeleteFile=t},expression:"hardDeleteFile"}}),e._v(" "),t("ui-btn",{on:{click:e.submit}},[e._v(e._s(e.btnText))])],1)])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{UiCheckbox:o(184).default,UiBtn:o(42).default,ModalsModal:o(39).default})},916:function(e,t,o){"use strict";o(804)},917:function(e,t,o){var n=o(18)((function(i){return i[1]}));n.push([e.i,"\n.episode-item {\n  transition: all 0.4s ease;\n}\n.episode-enter-from,\n.episode-leave-to {\n  opacity: 0;\n  transform: translateX(30px);\n}\n.episode-leave-active {\n  position: absolute;\n}\n",""]),n.locals={},e.exports=n}}]);