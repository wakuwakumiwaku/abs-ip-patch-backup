(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{711:function(t,e,n){var content=n(756);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(19).default)("0d166219",content,!0,{sourceMap:!1})},755:function(t,e,n){"use strict";n(711)},756:function(t,e,n){var r=n(18)((function(i){return i[1]}));r.push([t.i,"\n#api-keys {\n  table-layout: fixed;\n  border-collapse: collapse;\n  border: 1px solid #474747;\n  width: 100%;\n}\n#api-keys td,\n#api-keys th {\n  /* border: 1px solid #2e2e2e; */\n  padding: 8px 8px;\n  text-align: left;\n}\n#api-keys td.py-0 {\n  padding: 0px 8px;\n}\n#api-keys tr:nth-child(even) {\n  background-color: #373838;\n}\n#api-keys tr:nth-child(odd) {\n  background-color: #2f2f2f;\n}\n#api-keys tr:hover {\n  background-color: #444;\n}\n#api-keys th {\n  font-size: 0.8rem;\n  font-weight: 600;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  background-color: #272727;\n}\n",""]),r.locals={},t.exports=r},835:function(t,e,n){"use strict";n.r(e);n(15),n(26),n(27),n(150),n(8);var r={data:function(){return{apiKeys:[],isDeletingApiKey:!1}},computed:{dateFormat:function(){return this.$store.state.serverSettings.dateFormat},timeFormat:function(){return this.$store.state.serverSettings.timeFormat}},methods:{getExpiresAtText:function(t){return new Date(t.expiresAt).getTime()<Date.now()?this.$strings.LabelExpired:this.$formatJsDatetime(new Date(t.expiresAt),this.dateFormat,this.timeFormat)},deleteApiKeyClick:function(t){var e=this;if(!this.isDeletingApiKey){var n={message:this.$getString("MessageConfirmDeleteApiKey",[t.name]),callback:function(n){n&&e.deleteApiKey(t)},type:"yesNo"};this.$store.commit("globals/setConfirmPrompt",n)}},deleteApiKey:function(t){var e=this;this.isDeletingApiKey=!0,this.$axios.$delete("/api/api-keys/".concat(t.id)).then((function(data){data.error?e.$toast.error(data.error):(e.removeApiKey(t.id),e.$emit("numApiKeys",e.apiKeys.length))})).catch((function(t){console.error("Failed to delete apiKey",t),e.$toast.error(e.$strings.ToastFailedToDelete)})).finally((function(){e.isDeletingApiKey=!1}))},editApiKey:function(t){this.$emit("edit",t)},addApiKey:function(t){this.apiKeys.push(t)},removeApiKey:function(t){this.apiKeys=this.apiKeys.filter((function(a){return a.id!==t}))},updateApiKey:function(t){this.apiKeys=this.apiKeys.map((function(a){return a.id===t.id?t:a}))},loadApiKeys:function(){var t=this;this.$axios.$get("/api/api-keys").then((function(e){t.apiKeys=e.apiKeys.sort((function(a,b){return a.createdAt-b.createdAt})),t.$emit("numApiKeys",t.apiKeys.length)})).catch((function(t){console.error("Failed to load apiKeys",t)}))}},mounted:function(){this.loadApiKeys()}},o=(n(755),n(4)),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"text-center"},[t.apiKeys.length>0?e("table",{attrs:{id:"api-keys"}},[e("tr",[e("th",[t._v(t._s(t.$strings.LabelName))]),t._v(" "),e("th",{staticClass:"w-44"},[t._v(t._s(t.$strings.LabelApiKeyUser))]),t._v(" "),e("th",{staticClass:"w-32"},[t._v(t._s(t.$strings.LabelExpiresAt))]),t._v(" "),e("th",{staticClass:"w-32"},[t._v(t._s(t.$strings.LabelCreatedAt))]),t._v(" "),e("th",{staticClass:"w-32"})]),t._v(" "),t._l(t.apiKeys,(function(n){return e("tr",{key:n.id,class:n.isActive?"":"bg-error/10!"},[e("td",[e("div",{staticClass:"flex items-center"},[e("p",{staticClass:"pl-2 truncate"},[t._v(t._s(n.name))])])]),t._v(" "),e("td",{staticClass:"text-xs"},[n.user?e("nuxt-link",{staticClass:"text-xs hover:underline",attrs:{to:"/config/users/".concat(n.user.id)}},[t._v("\n            "+t._s(n.user.username)+"\n          ")]):e("p",{staticClass:"text-xs"},[t._v("Error")])],1),t._v(" "),e("td",{staticClass:"text-xs"},[n.expiresAt?e("p",{staticClass:"text-xs",attrs:{title:n.expiresAt}},[t._v(t._s(t.getExpiresAtText(n)))]):e("p",{staticClass:"text-xs"},[t._v(t._s(t.$strings.LabelExpiresNever))])]),t._v(" "),e("td",{staticClass:"text-xs font-mono"},[e("ui-tooltip",{attrs:{direction:"top",text:t.$formatJsDatetime(new Date(n.createdAt),t.dateFormat,t.timeFormat)}},[t._v("\n            "+t._s(t.$formatJsDate(new Date(n.createdAt),t.dateFormat))+"\n          ")])],1),t._v(" "),e("td",{staticClass:"py-0"},[e("div",{staticClass:"w-full flex justify-left"},[e("div",{staticClass:"h-8 w-8 flex items-center justify-center text-white/50 hover:text-white/100 cursor-pointer",on:{click:function(e){return e.stopPropagation(),t.editApiKey(n)}}},[e("button",{staticClass:"material-symbols text-base",attrs:{type:"button","aria-label":t.$strings.ButtonEdit}},[t._v("edit")])]),t._v(" "),e("div",{staticClass:"h-8 w-8 flex items-center justify-center text-white/50 hover:text-error cursor-pointer",on:{click:function(e){return e.stopPropagation(),t.deleteApiKeyClick(n)}}},[e("button",{staticClass:"material-symbols text-base",attrs:{type:"button","aria-label":t.$strings.ButtonDelete}},[t._v("delete")])])])])])}))],2):e("p",{staticClass:"text-base text-gray-300 py-4"},[t._v(t._s(t.$strings.LabelNoApiKeys))])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiTooltip:n(76).default})}}]);