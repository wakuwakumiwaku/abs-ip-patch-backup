(window.webpackJsonp=window.webpackJsonp||[]).push([[63,57,137,149],{642:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(183);var l=r(237),o=r(149);function c(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||Object(l.a)(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},657:function(t,e,r){"use strict";r.r(e);var n={props:{type:{type:String,default:"error"}},data:function(){return{}},computed:{icon:function(){return"error"===this.type||"warning"===this.type?"report":"info"},wrapperClass:function(){switch(this.type){case"error":return"bg-error/5 border-error/60 text-error";case"warning":return"bg-warning/5 border-warning/60 text-warning";case"success":return"bg-success/5 border-success/60 text-success";case"info":return"bg-info/5 border-info/60 text-info";default:return"bg-primary/5 border-primary/60 text-primary"}}},methods:{},mounted:function(){}},l=r(4),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full border rounded-lg flex items-center relative py-4 pl-16",class:t.wrapperClass},[e("div",{staticClass:"absolute top-0 left-4 h-full flex items-center"},[e("span",{staticClass:"material-symbols text-2xl"},[t._v(t._s(t.icon))])]),t._v(" "),t._t("default")],2)}),[],!1,null,null,null);e.default=component.exports},727:function(t,e,r){"use strict";r.r(e);r(15);var n={props:{title:String,files:{type:Array,default:function(){return[]}}},data:function(){return{expand:!1}},computed:{},methods:{clickBar:function(){this.expand=!this.expand}},mounted:function(){}},l=r(4),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full my-4"},[e("div",{staticClass:"w-full bg-primary px-6 py-1 flex items-center cursor-pointer",on:{click:function(e){return e.stopPropagation(),t.clickBar.apply(null,arguments)}}},[e("p",{staticClass:"pr-4"},[t._v(t._s(t.title))]),t._v(" "),e("span",{staticClass:"bg-black-400 rounded-xl py-0.5 px-2 text-sm font-mono"},[t._v(t._s(t.files.length))]),t._v(" "),e("div",{staticClass:"grow"}),t._v(" "),e("div",{staticClass:"cursor-pointer h-9 w-9 rounded-full hover:bg-black-400 flex justify-center items-center duration-500",class:t.expand?"transform rotate-180":""},[e("span",{staticClass:"material-symbols text-3xl"},[t._v("expand_more")])])]),t._v(" "),e("transition",{attrs:{name:"slide"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.expand,expression:"expand"}],staticClass:"w-full"},[e("table",{staticClass:"text-sm tracksTable"},[e("tr",[e("th",{staticClass:"text-left"},[t._v(t._s(t.$strings.LabelFilename))]),t._v(" "),e("th",{staticClass:"text-left"},[t._v(t._s(t.$strings.LabelSize))]),t._v(" "),e("th",{staticClass:"text-left"},[t._v(t._s(t.$strings.LabelType))])]),t._v(" "),t._l(t.files,(function(r){return[e("tr",{key:r.path},[e("td",{staticClass:"pl-2"},[t._v("\n              "+t._s(r.name)+"\n            ")]),t._v(" "),e("td",{staticClass:"font-mono"},[t._v("\n              "+t._s(t.$bytesPretty(r.size))+"\n            ")]),t._v(" "),e("td",[t._v("\n              "+t._s(r.filetype)+"\n            ")])])]}))],2)])])],1)}),[],!1,null,null,null);e.default=component.exports},853:function(t,e,r){"use strict";r.r(e);r(147);var n=r(16),l=r(220),o=r(7),c=r(642),d=(r(29),r(22),r(17),r(26),r(56),r(27),r(57),r(44),r(45),r(38),r(8),r(62),r(28),r(58),r(350),r(188)),f=r.n(d);function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var v={props:{item:{type:Object,default:function(){}},mediaType:String,processing:Boolean,provider:String},data:function(){return{itemData:{title:"",author:"",series:""},error:"",isUploading:!1,uploadFailed:!1,uploadSuccess:!1,isFetchingMetadata:!1,uploadProgress:{loaded:0,total:0}}},computed:{isPodcast:function(){return"podcast"===this.mediaType},directory:function(){var t=this;if(!this.itemData.title)return"";if(this.isPodcast)return this.itemData.title;var e=[this.itemData.author,this.itemData.series,this.itemData.title].filter(Boolean).map((function(e){return t.$sanitizeFilename(e)}));return f.a.join.apply(f.a,Object(c.a)(e))},isNonInteractable:function(){return this.isUploading||this.isFetchingMetadata},nonInteractionLabel:function(){return this.isUploading?this.$strings.MessageUploading:this.isFetchingMetadata?this.$strings.LabelFetchingMetadata:void 0},uploadProgressPercent:function(){return 0===this.uploadProgress.total?0:Math.min(100,Math.round(this.uploadProgress.loaded/this.uploadProgress.total*100))},uploadProgressText:function(){var t=this.$bytesPretty(this.uploadProgress.loaded),e=this.$bytesPretty(this.uploadProgress.total);return"".concat(this.uploadProgressPercent,"% (").concat(t," / ").concat(e,")")}},methods:{setUploadStatus:function(t){this.isUploading="uploading"===t,this.uploadFailed="failed"===t,this.uploadSuccess="success"===t,"uploading"!==t&&(this.uploadProgress={loaded:0,total:0})},setUploadProgress:function(progress){this.isUploading&&progress&&(this.uploadProgress={loaded:progress.loaded||0,total:progress.total||0})},titleUpdated:function(){this.error=""},fetchMetadata:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.itemData.title.trim().length){e.next=2;break}return e.abrupt("return");case 2:return t.isFetchingMetadata=!0,t.error="",e.prev=4,r=new URLSearchParams({title:t.itemData.title,author:t.itemData.author,provider:t.provider}),e.next=8,t.$axios.$get("/api/search/books?".concat(r));case 8:n=e.sent,o=Object(l.a)(n),c=o[0],o.slice(1),c?t.itemData=h(h({},t.itemData),{},{title:c.title,author:c.author,series:null===(d=(c.series||[])[0])||void 0===d?void 0:d.series}):t.error=t.$strings.ErrorUploadFetchMetadataNoResults,e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),console.error("Failed",e.t0),t.error=t.$strings.ErrorUploadFetchMetadataAPI;case 19:return e.prev=19,t.isFetchingMetadata=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[4,15,19,22]])})))()},getData:function(){if(!this.itemData.title)return this.error=this.$strings.ErrorUploadLacksTitle,null;this.error="";var t=this.item.itemFiles.concat(this.item.otherFiles);return h(h({index:this.item.index,directory:this.directory},this.itemData),{},{files:t})}},mounted:function(){this.item&&(this.itemData.title=this.item.title,this.itemData.author=this.item.author,this.itemData.series=this.item.series)}},x=r(4),component=Object(x.a)(v,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative w-full py-4 px-6 border border-white/10 shadow-lg rounded-md my-6"},[e("div",{staticClass:"absolute -top-3 -left-3 w-8 h-8 bg-bg border border-white/10 flex items-center justify-center rounded-full"},[e("p",{staticClass:"text-base text-white/80 font-mono"},[t._v("#"+t._s(t.item.index))])]),t._v(" "),t.processing||t.uploadFailed||t.uploadSuccess?t._e():e("div",{staticClass:"absolute -top-3 -right-3 w-8 h-8 bg-bg border border-white/10 flex items-center justify-center rounded-full hover:bg-error cursor-pointer",on:{click:function(e){return t.$emit("remove")}}},[e("span",{staticClass:"text-base text-white/80 font-mono material-symbols"},[t._v("close")])]),t._v(" "),t.uploadSuccess||t.uploadFailed?t._e():[t.error?e("widgets-alert",{attrs:{type:"error"}},[e("p",{staticClass:"text-base"},[t._v(t._s(t.error))])]):t._e(),t._v(" "),e("div",{staticClass:"flex my-2 -mx-2"},[e("div",{staticClass:"w-1/2 px-2"},[e("ui-text-input-with-label",{attrs:{disabled:t.processing,label:t.$strings.LabelTitle},on:{input:t.titleUpdated},model:{value:t.itemData.title,callback:function(e){t.$set(t.itemData,"title","string"==typeof e?e.trim():e)},expression:"itemData.title"}})],1),t._v(" "),e("div",{staticClass:"w-1/2 px-2"},[t.isPodcast?e("div",{staticClass:"w-full"},[e("p",{staticClass:"px-1 text-sm font-semibold"},[t._v("\n            "+t._s(t.$strings.LabelDirectory)+"\n            "),e("em",{staticClass:"font-normal text-xs pl-2"},[t._v("(auto)")])]),t._v(" "),e("ui-text-input",{staticClass:"w-full font-mono text-xs",attrs:{value:t.directory,disabled:""}})],1):e("div",{staticClass:"flex items-end"},[e("ui-text-input-with-label",{attrs:{disabled:t.processing,label:t.$strings.LabelAuthor},model:{value:t.itemData.author,callback:function(e){t.$set(t.itemData,"author","string"==typeof e?e.trim():e)},expression:"itemData.author"}}),t._v(" "),e("ui-tooltip",{attrs:{direction:"top",text:t.$strings.LabelUploaderItemFetchMetadataHelp}},[e("button",{staticClass:"ml-2 mb-1 w-8 h-8 bg-bg border border-white/10 flex items-center justify-center rounded-full hover:bg-primary cursor-pointer",attrs:{type:"button"},on:{click:t.fetchMetadata}},[e("span",{staticClass:"text-base text-white/80 font-mono material-symbols"},[t._v("sync")])])])],1)])]),t._v(" "),t.isPodcast?t._e():e("div",{staticClass:"flex my-2 -mx-2"},[e("div",{staticClass:"w-1/2 px-2"},[e("ui-text-input-with-label",{attrs:{disabled:t.processing,label:t.$strings.LabelSeries,note:"(optional)",inputClass:"h-10"},model:{value:t.itemData.series,callback:function(e){t.$set(t.itemData,"series","string"==typeof e?e.trim():e)},expression:"itemData.series"}})],1),t._v(" "),e("div",{staticClass:"w-1/2 px-2"},[e("div",{staticClass:"w-full"},[e("label",{staticClass:"px-1 text-sm font-semibold"},[t._v("\n            "+t._s(t.$strings.LabelDirectory)+"\n            "),e("em",{staticClass:"font-normal text-xs pl-2"},[t._v("(auto)")])]),t._v(" "),e("ui-text-input",{staticClass:"w-full font-mono text-xs h-10",attrs:{value:t.directory,disabled:""}})],1)])]),t._v(" "),e("tables-uploaded-files-table",{staticClass:"mt-8",attrs:{files:t.item.itemFiles,title:t.$strings.HeaderItemFiles}}),t._v(" "),t.item.otherFiles.length?e("tables-uploaded-files-table",{attrs:{title:t.$strings.HeaderOtherFiles,files:t.item.otherFiles}}):t._e(),t._v(" "),t.item.ignoredFiles.length?e("tables-uploaded-files-table",{attrs:{title:t.$strings.HeaderIgnoredFiles,files:t.item.ignoredFiles}}):t._e()],t._v(" "),t.uploadSuccess?e("widgets-alert",{attrs:{type:"success"}},[e("p",{staticClass:"text-base"},[t._v('"'+t._s(t.itemData.title)+'" '+t._s(t.$strings.MessageUploaderItemSuccess))])]):t._e(),t._v(" "),t.uploadFailed?e("widgets-alert",{attrs:{type:"error"}},[e("p",{staticClass:"text-base"},[t._v('"'+t._s(t.itemData.title)+'" '+t._s(t.$strings.MessageUploaderItemFailed))])]):t._e(),t._v(" "),t.isNonInteractable?e("div",{staticClass:"absolute top-0 left-0 w-full h-full bg-black/50 flex items-center justify-center z-20"},[e("ui-loading-indicator",[e("div",{staticClass:"mb-4"},[e("span",{staticClass:"text-lg font-medium text-white"},[t._v("\n          "+t._s(t.nonInteractionLabel)+"\n        ")])]),t._v(" "),t.isUploading?e("div",{staticClass:"w-64 mx-auto mb-2"},[e("div",{staticClass:"flex items-center justify-center mb-2"},[e("span",{staticClass:"text-sm font-medium text-white/60 text-center w-full"},[t._v("\n            "+t._s(t.uploadProgressText)+"\n          ")])]),t._v(" "),e("div",{staticClass:"w-full bg-primary/20 rounded-full h-2.5"},[e("div",{staticClass:"bg-green-500 h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:t.uploadProgressPercent+"%"}})])]):t._e()])],1):t._e()],2)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{WidgetsAlert:r(657).default,UiTextInputWithLabel:r(121).default,UiTooltip:r(76).default,UiTextInput:r(68).default,TablesUploadedFilesTable:r(727).default,UiLoadingIndicator:r(348).default})}}]);