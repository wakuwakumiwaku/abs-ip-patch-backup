(window.webpackJsonp=window.webpackJsonp||[]).push([[154],{872:function(t,e,n){"use strict";n.r(e);n(22),n(43),n(84),n(33),n(83),n(57),n(15),n(14),n(8),n(35),n(59),n(62),n(58);function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(t){if("string"==typeof t)return c(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,l=function(){};return{s:l,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function c(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=Array(a);e<a;e++)n[e]=t[e];return n}var l={props:{audioTracks:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},data:function(){return{showAdvancedView:!1,selectedCodec:"aac",selectedBitrate:"128k",selectedChannels:2,customCodec:"aac",customBitrate:"128k",customChannels:2,currentCodec:"",currentBitrate:"",currentChannels:"",currentChanelLayout:"",isCodecsDifferent:!1}},computed:{codecItems:function(){return[{text:"Copy",value:"copy"},{text:"AAC",value:"aac"},{text:"OPUS",value:"opus"}]},bitrateItems:function(){return[{text:"32k",value:"32k"},{text:"64k",value:"64k"},{text:"128k",value:"128k"},{text:"192k",value:"192k"}]},channelsItems:function(){return[{text:"1 (mono)",value:1},{text:"2 (stereo)",value:2}]}},methods:{customBitrateChanged:function(t){localStorage.setItem("embedMetadataBitrate",t)},customChannelsChanged:function(t){localStorage.setItem("embedMetadataChannels",t)},customCodecChanged:function(t){localStorage.setItem("embedMetadataCodec",t)},getEncodingOptions:function(){return this.showAdvancedView?{codec:this.customCodec||this.selectedCodec||"aac",bitrate:this.customBitrate||this.selectedBitrate||"128k",channels:this.customChannels||this.selectedChannels||2}:{codec:this.selectedCodec||"aac",bitrate:this.selectedBitrate||"128k",channels:this.selectedChannels||2}},setPreset:function(){var t=this;if("aac"!==this.currentCodec||this.isCodecsDifferent?this.selectedCodec="aac":this.selectedCodec="copy",this.currentBitrate){var e=[32,64,128,192].find((function(e){return e>=t.currentBitrate}))||192;this.selectedBitrate=e+"k"}else this.selectedBitrate="128k";!this.currentChannels||isNaN(this.currentChannels)?this.selectedChannels=2:this.selectedChannels=Math.max(Math.min(Number(this.currentChannels),2),1)},setCurrentValues:function(){if(0!==this.audioTracks.length){this.currentChannels=this.audioTracks[0].channels,this.currentChanelLayout=this.audioTracks[0].channelLayout,this.currentCodec=this.audioTracks[0].codec;var t,e=0,n=r(this.audioTracks);try{for(n.s();!(t=n.n()).done;){var track=t.value;e+=isNaN(track.bitRate)?0:track.bitRate,track.channels>this.currentChannels&&(this.currentChannels=track.channels),track.codec!==this.currentCodec&&(console.warn("Audio track codec is different from the first track",track.codec),this.isCodecsDifferent=!0)}}catch(t){n.e(t)}finally{n.f()}this.currentBitrate=Math.round(e/this.audioTracks.length/1e3)}},init:function(){this.customBitrate=localStorage.getItem("embedMetadataBitrate")||"128k",this.customChannels=localStorage.getItem("embedMetadataChannels")||2,this.customCodec=localStorage.getItem("embedMetadataCodec")||"aac",this.setCurrentValues(),this.setPreset()}},mounted:function(){this.init()}},o=n(4),component=Object(o.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full py-2"},[e("div",{staticClass:"flex -mb-px"},[e("button",{staticClass:"w-1/2 h-8 rounded-tl-md relative border border-black-200 flex items-center justify-center disabled:cursor-not-allowed",class:t.showAdvancedView?"text-gray-400 hover:text-gray-300 bg-primary/70 hover:bg-primary/60":"text-white bg-bg hover:bg-bg/60 border-b-bg",attrs:{type:"button",disabled:t.disabled},on:{click:function(e){t.showAdvancedView=!1}}},[e("p",{staticClass:"text-sm"},[t._v(t._s(t.$strings.HeaderPresets))])]),t._v(" "),e("button",{staticClass:"w-1/2 h-8 rounded-tr-md relative border border-black-200 flex items-center justify-center -ml-px disabled:cursor-not-allowed",class:t.showAdvancedView?"text-white bg-bg hover:bg-bg/60 border-b-bg":"text-gray-400 hover:text-gray-300 bg-primary/70 hover:bg-primary/60",attrs:{type:"button",disabled:t.disabled},on:{click:function(e){t.showAdvancedView=!0}}},[e("p",{staticClass:"text-sm"},[t._v(t._s(t.$strings.HeaderAdvanced))])])]),t._v(" "),e("div",{staticClass:"p-4 md:p-8 border border-black-200 rounded-b-md mr-px bg-bg"},[t.showAdvancedView?[e("div",[e("div",{staticClass:"flex flex-wrap gap-4 sm:gap-8 justify-start sm:justify-center mb-4"},[e("div",{staticClass:"w-40"},[e("ui-text-input-with-label",{attrs:{label:t.$strings.LabelAudioCodec,disabled:t.disabled},on:{input:t.customCodecChanged},model:{value:t.customCodec,callback:function(e){t.customCodec=e},expression:"customCodec"}})],1),t._v(" "),e("div",{staticClass:"w-40"},[e("ui-text-input-with-label",{attrs:{label:t.$strings.LabelAudioBitrate,disabled:t.disabled},on:{input:t.customBitrateChanged},model:{value:t.customBitrate,callback:function(e){t.customBitrate=e},expression:"customBitrate"}})],1),t._v(" "),e("div",{staticClass:"w-40"},[e("ui-text-input-with-label",{attrs:{label:t.$strings.LabelAudioChannels,type:"number",disabled:t.disabled},on:{input:t.customChannelsChanged},model:{value:t.customChannels,callback:function(e){t.customChannels=e},expression:"customChannels"}})],1)]),t._v(" "),e("p",{staticClass:"text-xs sm:text-sm text-warning sm:text-center"},[t._v(t._s(t.$strings.LabelEncodingWarningAdvancedSettings))])])]:[e("div",{staticClass:"flex flex-wrap gap-4 sm:gap-8 justify-start sm:justify-center"},[e("div",{staticClass:"flex flex-col items-start gap-2"},[e("p",{staticClass:"text-sm w-40"},[t._v(t._s(t.$strings.LabelCodec))]),t._v(" "),e("ui-toggle-btns",{attrs:{items:t.codecItems,disabled:t.disabled},model:{value:t.selectedCodec,callback:function(e){t.selectedCodec=e},expression:"selectedCodec"}}),t._v(" "),e("p",{staticClass:"text-xs text-gray-300"},[t._v("\n            "+t._s(t.$strings.LabelCurrently)+" "),e("span",{staticClass:"text-white"},[t._v(t._s(t.currentCodec))]),t._v(" "),t.isCodecsDifferent?e("span",{staticClass:"text-warning"},[t._v("(mixed)")]):t._e()])],1),t._v(" "),e("div",{staticClass:"flex flex-col items-start gap-2"},[e("p",{staticClass:"text-sm w-40"},[t._v(t._s(t.$strings.LabelBitrate))]),t._v(" "),e("ui-toggle-btns",{attrs:{items:t.bitrateItems,disabled:t.disabled},model:{value:t.selectedBitrate,callback:function(e){t.selectedBitrate=e},expression:"selectedBitrate"}}),t._v(" "),e("p",{staticClass:"text-xs text-gray-300"},[t._v("\n            "+t._s(t.$strings.LabelCurrently)+" "),e("span",{staticClass:"text-white"},[t._v(t._s(t.currentBitrate)+" KB/s")])])],1),t._v(" "),e("div",{staticClass:"flex flex-col items-start gap-2"},[e("p",{staticClass:"text-sm w-40"},[t._v(t._s(t.$strings.LabelChannels))]),t._v(" "),e("ui-toggle-btns",{attrs:{items:t.channelsItems,disabled:t.disabled},model:{value:t.selectedChannels,callback:function(e){t.selectedChannels=e},expression:"selectedChannels"}}),t._v(" "),e("p",{staticClass:"text-xs text-gray-300"},[t._v("\n            "+t._s(t.$strings.LabelCurrently)+" "),e("span",{staticClass:"text-white"},[t._v(t._s(t.currentChannels)+" ("+t._s(t.currentChanelLayout)+")")])])],1)])]],2)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiToggleBtns:n(365).default,UiTextInputWithLabel:n(121).default})}}]);