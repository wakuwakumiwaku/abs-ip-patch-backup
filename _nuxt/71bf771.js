(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{849:function(t,e,o){"use strict";o.r(e);var n=o(16);o(17),o(22),o(26),o(14),o(44),o(45),o(38),o(8),o(28);function l(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function r(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?l(Object(o),!0).forEach((function(e){Object(n.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var h={props:{daysListening:{type:Object,default:function(){}}},data:function(){return{contentWidth:0,maxInnerWidth:0,innerHeight:91,blockWidth:13,data:[],daysListenedInTheLastYear:0,monthLabels:[],tooltipEl:null,tooltipTextEl:null,tooltipArrowEl:null,showingTooltipIndex:-1,outlineColors:["rgba(27, 31, 35, 0.06)","rgba(255,255,255,0.03)"],bgColors:["rgb(45,45,45)","rgb(14, 68, 41)","rgb(0, 109, 50)","rgb(38, 166, 65)","rgb(57, 211, 83)"]}},computed:{weeksToShow:function(){return Math.min(52,Math.floor(this.maxInnerWidth/this.blockWidth)-1)},innerWidth:function(){return 13*(this.weeksToShow+1)},daysToShow:function(){return 7*this.weeksToShow+this.dayOfWeekToday},dayOfWeekToday:function(){return(new Date).getDay()},dayLabels:function(){return[{label:this.$formatJsDate(new Date(2023,0,2),"EEE"),style:{transform:"translate(".concat(-25,"px, ",13,"px)"),lineHeight:"10px",fontSize:"10px"}},{label:this.$formatJsDate(new Date(2023,0,4),"EEE"),style:{transform:"translate(".concat(-25,"px, ").concat(39,"px)"),lineHeight:"10px",fontSize:"10px"}},{label:this.$formatJsDate(new Date(2023,0,6),"EEE"),style:{transform:"translate(".concat(-25,"px, ").concat(65,"px)"),lineHeight:"10px",fontSize:"10px"}}]},legendBlocks:function(){return[{id:"legend-0",style:"background-color:".concat(this.bgColors[0],";outline:1px solid ").concat(this.outlineColors[0],";outline-offset:-1px;")},{id:"legend-1",style:"background-color:".concat(this.bgColors[1],";outline:1px solid ").concat(this.outlineColors[1],";outline-offset:-1px;")},{id:"legend-2",style:"background-color:".concat(this.bgColors[2],";outline:1px solid ").concat(this.outlineColors[1],";outline-offset:-1px;")},{id:"legend-3",style:"background-color:".concat(this.bgColors[3],";outline:1px solid ").concat(this.outlineColors[1],";outline-offset:-1px;")},{id:"legend-4",style:"background-color:".concat(this.bgColors[4],";outline:1px solid ").concat(this.outlineColors[1],";outline-offset:-1px;")}]}},methods:{destroyTooltip:function(){this.tooltipEl&&this.tooltipEl.remove(),this.tooltipEl=null,this.showingTooltipIndex=-1},createTooltip:function(){var t=document.createElement("div");t.className="absolute top-0 left-0 rounded-sm bg-gray-500 text-white p-2 text-white max-w-xs pointer-events-none",t.style.display="none",t.id="heatmap-tooltip";var e=document.createElement("p");e.innerText="Tooltip",e.style.fontSize="10px",e.style.lineHeight="10px",t.appendChild(e);var o=document.createElement("div");o.className="text-gray-500 arrow-down-small absolute -bottom-1 left-0 right-0 mx-auto",t.appendChild(o),this.tooltipEl=t,this.tooltipTextEl=e,this.tooltipArrowEl=o,document.body.appendChild(this.tooltipEl)},showTooltip:function(t,e,rect){if(!this.tooltipEl||this.showingTooltipIndex!==t){this.tooltipEl||this.createTooltip(),this.showingTooltipIndex=t,this.tooltipEl.style.display="block",this.tooltipTextEl.innerHTML=e.value?this.$getString("MessageHeatmapListeningTimeTooltip",[this.$elapsedPrettyLocalized(e.value,!0),e.datePretty]):this.$getString("MessageHeatmapNoListeningSessions",[e.datePretty]);var o=this.tooltipEl.getBoundingClientRect().width/2,n=rect.x-o,l=0;n<0?(l=Math.abs(n),n=0):rect.x+o>window.innerWidth-10&&(n+=l=window.innerWidth-10-(rect.x+o)),this.tooltipEl.style.transform="translate(".concat(n,"px, ").concat(rect.y-32,"px)"),this.tooltipArrowEl.style.transform="translate(".concat(5-l,"px, 0px)")}},hideTooltip:function(){this.showingTooltipIndex>=0&&this.tooltipEl&&(this.tooltipEl.style.display="none",this.showingTooltipIndex=-1)},mouseover:function(t){if(isNaN(t.target.dataset.index))this.hideTooltip();else{var e=this.data[t.target.dataset.index],rect=t.target.getBoundingClientRect();this.showTooltip(t.target.dataset.index,e,rect)}},mouseout:function(t){this.hideTooltip()},buildData:function(){this.data=[];for(var t=0,e=0,o=[],n=364+this.dayOfWeekToday,l=this.$addDaysToToday(-n),i=0;i<n+1;i++){var h=0===i?l:this.$addDaysToDate(l,i),d=this.$formatJsDate(h,"yyyy-MM-dd");this.daysListening[d]>0&&this.daysListenedInTheLastYear++;var c=i-(n-this.daysToShow);if(!(c<0)){var y={col:Math.floor(c/7),row:c%7,date:h,dateString:d,datePretty:this.$formatJsDate(h,"MMM d, yyyy"),monthString:this.$formatJsDate(h,"MMM"),dayOfMonth:Number(d.split("-").pop()),yearString:d.split("-").shift(),value:this.daysListening[d]||0};o.push(y),y.value>0&&(y.value>t&&(t=y.value),(!e||y.value<e)&&(e=y.value))}}for(var f=t-e+.01,x=0,m=o;x<m.length;x++){var v=m[x],w=this.bgColors[0],T=this.outlineColors[0];if(v.value){T=this.outlineColors[1];var C=(v.value-e)/f,E=Math.floor(4*C)+1;w=this.bgColors[E]||"red"}this.data.push(r(r({},v),{},{style:"transform:translate(".concat(13*v.col,"px,").concat(13*v.row,"px);background-color:").concat(w,";outline:1px solid ").concat(T,";outline-offset:-1px;")}))}this.monthLabels=[];for(var S=null,k=0;k<this.data.length;k++){if(this.data[k].monthString!==S)Math.floor(this.data[k].dayOfMonth/7)<=2&&(this.monthLabels.push({id:this.data[k].dateString+"-ml",label:this.data[k].monthString,style:{transform:"translate(".concat(13*this.data[k].col,"px, -15px)"),lineHeight:"10px",fontSize:"10px"}}),S=this.data[k].monthString)}},init:function(){var t=document.getElementById("heatmap");this.contentWidth=t.clientWidth,this.maxInnerWidth=this.contentWidth-52,this.daysListenedInTheLastYear=0,this.buildData()}},updated:function(){},mounted:function(){this.init()},beforeDestroy:function(){}},d=o(4),component=Object(d.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full",attrs:{id:"heatmap"}},[e("div",{staticClass:"mx-auto",staticStyle:{"background-color":"rgba(13, 17, 23, 0)"},style:{height:t.innerHeight+160+"px",width:t.innerWidth+52+"px"}},[e("p",{staticClass:"mb-2 px-1 text-sm text-gray-200"},[t._v(t._s(t.$getString("MessageDaysListenedInTheLastYear",[t.daysListenedInTheLastYear])))]),t._v(" "),e("div",{staticClass:"border border-white/25 rounded-sm py-2 w-full",staticStyle:{"background-color":"#232323"},style:{height:t.innerHeight+80+"px"}},[e("div",{staticClass:"ml-10 mt-5 absolute",style:{width:t.innerWidth+"px",height:t.innerHeight+"px"},on:{mouseover:t.mouseover,mouseout:t.mouseout}},[t._l(t.dayLabels,(function(o){return e("div",{key:o.label,staticClass:"absolute top-0 left-0 text-gray-300",style:o.style},[t._v(t._s(o.label))])})),t._v(" "),t._l(t.monthLabels,(function(o){return e("div",{key:o.id,staticClass:"absolute top-0 left-0 text-gray-300",style:o.style},[t._v(t._s(o.label))])})),t._v(" "),t._l(t.data,(function(t,o){return e("div",{key:t.dateString,staticClass:"absolute top-0 left-0 h-2.5 w-2.5 rounded-xs",style:t.style,attrs:{"data-index":o}})})),t._v(" "),e("div",{staticClass:"flex py-2 px-4",style:{marginTop:t.innerHeight+"px"}},[e("div",{staticClass:"grow"}),t._v(" "),e("p",{staticClass:"text-gray-400 px-1",staticStyle:{"font-size":"10px","line-height":"10px"}},[t._v(t._s(t.$strings.LabelLess))]),t._v(" "),t._l(t.legendBlocks,(function(t){return e("div",{key:t.id,staticClass:"h-2.5 w-2.5 rounded-xs",staticStyle:{"margin-left":"1.5px","margin-right":"1.5px"},style:t.style})})),t._v(" "),e("p",{staticClass:"text-gray-400 px-1",staticStyle:{"font-size":"10px","line-height":"10px"}},[t._v(t._s(t.$strings.LabelMore))])],2)],2)])])])}),[],!1,null,null,null);e.default=component.exports}}]);